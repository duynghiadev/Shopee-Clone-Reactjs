## ÄÃ¢y lÃ  Docs tá»± research:

## Sá»­ dá»¥ng react router káº¿t há»£p vá»›i react query ?

- Khi sá»­ dá»¥ng `React Router` káº¿t há»£p vá»›i `React Query`, chÃºng ta cÃ³ thá»ƒ táº­n dá»¥ng cÃ¡c tÃ­nh nÄƒng cá»§a cáº£ hai thÆ° viá»‡n Ä‘á»ƒ xÃ¢y dá»±ng á»©ng dá»¥ng web Ä‘Ã¡ng tin cáº­y vá»›i phÃ¢n trang vÃ  quáº£n lÃ½ dá»¯ liá»‡u hiá»‡u quáº£.

- DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ cÆ¡ báº£n vá» cÃ¡ch sá»­ dá»¥ng `React Router` vÃ  `React Query` cÃ¹ng nhau:

1. CÃ i Ä‘áº·t `React Router` vÃ  `React Query`:

```bash
npm install react-router-dom react-query
```

- DÃ²ng code nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cÃ i Ä‘áº·t hai thÆ° viá»‡n `React Router` vÃ  `React Query` thÃ´ng qua npm (Node Package Manager).

  - `npm` lÃ  má»™t cÃ´ng cá»¥ quáº£n lÃ½ gÃ³i cho Node.js vÃ  npm Registry lÃ  má»™t kho lÆ°u trá»¯ trá»±c tuyáº¿n chá»©a cÃ¡c gÃ³i pháº§n má»m JavaScript mÃ  báº¡n cÃ³ thá»ƒ táº£i xuá»‘ng vÃ  sá»­ dá»¥ng trong dá»± Ã¡n cá»§a mÃ¬nh.
  - `install` lÃ  má»™t lá»‡nh trong npm Ä‘á»ƒ cÃ i Ä‘áº·t cÃ¡c gÃ³i pháº§n má»m. Khi cháº¡y lá»‡nh install, npm sáº½ táº£i xuá»‘ng vÃ  cÃ i Ä‘áº·t cÃ¡c gÃ³i Ä‘Æ°á»£c liá»‡t kÃª trong dÃ²ng lá»‡nh vÃ o dá»± Ã¡n cá»§a báº¡n.
  - `react-router-dom` lÃ  má»™t thÆ° viá»‡n há»— trá»£ Ä‘á»‹nh tuyáº¿n (`routing`) trong React. NÃ³ cung cáº¥p cÃ¡c thÃ nh pháº§n (`component`) vÃ  API Ä‘á»ƒ báº¡n cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh cÃ¡c `route` vÃ  hiá»ƒn thá»‹ cÃ¡c component tÆ°Æ¡ng á»©ng vá»›i tá»«ng `route`.
  - `react-query` lÃ  má»™t thÆ° viá»‡n quáº£n lÃ½ tráº¡ng thÃ¡i vÃ  truy váº¥n dá»¯ liá»‡u trong React. NÃ³ cung cáº¥p cÃ¡c hooks vÃ  API Ä‘á»ƒ báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c truy váº¥n dá»¯ liá»‡u, lÆ°u trá»¯ káº¿t quáº£ vÃ  quáº£n lÃ½ cache má»™t cÃ¡ch dá»… dÃ ng.

- Khi cháº¡y dÃ²ng lá»‡nh trÃªn, npm sáº½ tÃ¬m kiáº¿m vÃ  táº£i vá» cÃ¡c gÃ³i `react-router-dom` vÃ  `react-query` tá»« npm Registry, sau Ä‘Ã³ cÃ i Ä‘áº·t chÃºng vÃ o thÆ° má»¥c node_modules trong dá»± Ã¡n cá»§a báº¡n. Sau khi quÃ¡ trÃ¬nh cÃ i Ä‘áº·t hoÃ n táº¥t, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c thÃ nh pháº§n vÃ  API cá»§a hai thÆ° viá»‡n nÃ y trong á»©ng dá»¥ng React cá»§a mÃ¬nh.

2. Táº¡o cÃ¡c components vÃ  Ä‘á»‹nh nghÄ©a cÃ¡c route trong á»©ng dá»¥ng cá»§a báº¡n, vÃ­ dá»¥:

```jsx
import { BrowserRouter as Router, Switch, Route } from 'react-router-dom'
import { QueryClient, QueryClientProvider } from 'react-query'
import Home from './components/Home'
import PostList from './components/PostList'
import PostDetails from './components/PostDetails'

const queryClient = new QueryClient()

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <Router>
        <Switch>
          <Route exact path='/' component={Home} />
          <Route exact path='/posts' component={PostList} />
          <Route path='/posts/:id' component={PostDetails} />
        </Switch>
      </Router>
    </QueryClientProvider>
  )
}

export default App
```

- Äoáº¡n code trÃªn mÃ´ táº£ cÃ¡ch sá»­ dá»¥ng `React Router` vÃ  `React Query` trong á»©ng dá»¥ng React. DÆ°á»›i Ä‘Ã¢y lÃ  giáº£i thÃ­ch tá»«ng pháº§n cá»§a mÃ£ nguá»“n:

- `import { BrowserRouter as Router, Switch, Route } from 'react-router-dom':` ÄÃ¢y lÃ  cÃ¡ch import cÃ¡c thÃ nh pháº§n tá»« thÆ° viá»‡n `React Router`. `BrowserRouter` Ä‘Æ°á»£c Ä‘áº·t tÃªn láº¡i thÃ nh `Router` Ä‘á»ƒ sá»­ dá»¥ng trong mÃ£ nguá»“n.

- `import { QueryClient, QueryClientProvider } from 'react-query':` ÄÃ¢y lÃ  cÃ¡ch import cÃ¡c thÃ nh pháº§n tá»« thÆ° viá»‡n `React Query`. `QueryClient` lÃ  má»™t Ä‘á»‘i tÆ°á»£ng quáº£n lÃ½ tráº¡ng thÃ¡i vÃ  cache cá»§a `React Query`, vÃ  `QueryClientProvider` lÃ  má»™t thÃ nh pháº§n cung cáº¥p `QueryClient` cho cÃ¡c thÃ nh pháº§n con trong á»©ng dá»¥ng.

- `const queryClient = new QueryClient():` ÄÃ¢y lÃ  khá»Ÿi táº¡o má»™t instance cá»§a `QueryClient`, má»™t Ä‘á»‘i tÆ°á»£ng quáº£n lÃ½ tráº¡ng thÃ¡i vÃ  cache cá»§a `React Query`. Instance nÃ y sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi `QueryClientProvider` Ä‘á»ƒ cung cáº¥p cho cÃ¡c thÃ nh pháº§n con trong á»©ng dá»¥ng.

- Trong hÃ m `App()`, chÃºng ta sá»­ dá»¥ng `QueryClientProvider` Ä‘á»ƒ bao bá»c á»©ng dá»¥ng vÃ  cung cáº¥p `queryClient` cho cÃ¡c thÃ nh pháº§n con. Äiá»u nÃ y cho phÃ©p cÃ¡c thÃ nh pháº§n con sá»­ dá»¥ng `React Query` Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c truy váº¥n dá»¯ liá»‡u vÃ  quáº£n lÃ½ cache.

- ChÃºng ta sá»­ dá»¥ng `Router` Ä‘á»ƒ bao bá»c cÃ¡c thÃ nh pháº§n cá»§a á»©ng dá»¥ng vÃ  Ä‘á»‹nh tuyáº¿n giá»¯a cÃ¡c trang. `Switch` lÃ  má»™t thÃ nh pháº§n cá»§a `React Router` dÃ¹ng Ä‘á»ƒ chá»n ra chá»‰ má»™t `Route` phÃ¹ há»£p vá»›i URL hiá»‡n táº¡i.

- ChÃºng ta Ä‘á»‹nh nghÄ©a cÃ¡c `Route` Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ¡c URL vÃ  thÃ nh pháº§n tÆ°Æ¡ng á»©ng Ä‘á»ƒ hiá»ƒn thá»‹. Trong vÃ­ dá»¥ nÃ y, chÃºng ta cÃ³ ba `Route`:

  - `exact path='/'` cho trang chá»§ (component `Home`).
  - `exact path='/posts'` cho danh sÃ¡ch bÃ i viáº¿t (component `PostList`).
  - `path='/posts/:id'` cho chi tiáº¿t bÃ i viáº¿t (component `PostDetails`), trong Ä‘Ã³ `:id` lÃ  má»™t tham sá»‘ Ä‘á»™ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh ID cá»§a bÃ i viáº¿t.

- Cuá»‘i cÃ¹ng, chÃºng ta xuáº¥t `App` Ä‘á»ƒ sá»­ dá»¥ng trong á»©ng dá»¥ng chÃ­nh.

- Vá»›i cáº¥u hÃ¬nh nÃ y, `React Router` sáº½ xÃ¡c Ä‘á»‹nh cÃ¡c URL vÃ  hiá»ƒn thá»‹ cÃ¡c thÃ nh pháº§n tÆ°Æ¡ng á»©ng trong á»©ng dá»¥ng. `React Query` sáº½ cung cáº¥p kháº£ nÄƒng thá»±c hiá»‡n truy váº¥n dá»¯ liá»‡u vÃ  quáº£n lÃ½ cache cho cÃ¡c thÃ nh pháº§n con.

3. Trong cÃ¡c components cá»§a báº¡n, sá»­ dá»¥ng cÃ¡c hooks cá»§a `React Query` Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c truy váº¥n dá»¯ liá»‡u vÃ  quáº£n lÃ½ state cá»§a chÃºng, vÃ­ dá»¥:

```jsx
import { useQuery } from 'react-query'
import { useParams } from 'react-router-dom'

const fetchPost = async (postId) => {
  const response = await fetch(`api/posts/${postId}`)
  const data = await response.json()
  return data
}

function PostDetails() {
  const { id } = useParams()

  const { data, isLoading, isError, error } = useQuery(['post', id], () => fetchPost(id))

  if (isLoading) {
    return <div>Loading...</div>
  }

  if (isError) {
    return <div>Error: {error.message}</div>
  }

  return (
    <div>
      <h1>Post Details</h1>
      <p>ID: {data.id}</p>
      <p>Title: {data.title}</p>
      <p>Content: {data.content}</p>
    </div>
  )
}

export default PostDetails
```

- Äoáº¡n mÃ£ trÃªn mÃ´ táº£ má»™t trang chi tiáº¿t bÃ i viáº¿t trong á»©ng dá»¥ng sá»­ dá»¥ng `React Query` vÃ  `React Router`.

  - `import { useQuery } from 'react-query'` vÃ  `import { useParams } from 'react-router-dom'`: ÄÃ¢y lÃ  cÃ¡ch import `useQuery` tá»« `React Query` Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n dá»¯ liá»‡u vÃ  `useParams` tá»« `React Router` Ä‘á»ƒ truy cáº­p vÃ o cÃ¡c tham sá»‘ Ä‘á»™ng trong URL.

  - `const fetchPost = async (postId) => { ... }`: ÄÃ¢y lÃ  hÃ m `fetchPost` Ä‘á»ƒ láº¥y dá»¯ liá»‡u cá»§a má»™t bÃ i viáº¿t tá»« API. NÃ³ sá»­ dá»¥ng `postId` lÃ m tham sá»‘ Ä‘á»ƒ xÃ¡c Ä‘á»‹nh bÃ i viáº¿t cáº§n láº¥y. HÃ m nÃ y sá»­ dá»¥ng `fetch` Ä‘á»ƒ gá»­i yÃªu cáº§u GET Ä‘áº¿n API vÃ  tráº£ vá» dá»¯ liá»‡u bÃ i viáº¿t dÆ°á»›i dáº¡ng JSON. DÃ²ng nÃ y sá»­ dá»¥ng phÆ°Æ¡ng thá»©c `json()` cá»§a Ä‘á»‘i tÆ°á»£ng `response` Ä‘á»ƒ chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u tráº£ vá» thÃ nh Ä‘á»‘i tÆ°á»£ng (object) JavaScript. HÃ m nÃ y tráº£ vá» má»™t Promise, vÃ¬ váº­y chÃºng ta sá»­ dá»¥ng tá»« khÃ³a await Ä‘á»ƒ Ä‘á»£i viá»‡c chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u thÃ nh cÃ´ng.

  - Trong component `PostDetails`, chÃºng ta sá»­ dá»¥ng `useParams` Ä‘á»ƒ láº¥y tham sá»‘ `id` tá»« URL. Tham sá»‘ nÃ y xÃ¡c Ä‘á»‹nh ID cá»§a bÃ i viáº¿t Ä‘Æ°á»£c yÃªu cáº§u.

  - ChÃºng ta sá»­ dá»¥ng `useQuery` Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n dá»¯ liá»‡u cá»§a bÃ i viáº¿t. ChÃºng ta truyá»n vÃ o má»™t máº£ng `['post', id]` lÃ m `queryKey`, trong Ä‘Ã³ `'post'` lÃ  má»™t nhÃ£n Ä‘á»‹nh danh cho truy váº¥n vÃ  `id` lÃ  ID cá»§a bÃ i viáº¿t Ä‘á»ƒ xÃ¡c Ä‘á»‹nh truy váº¥n duy nháº¥t. Äá»‘i sá»‘ thá»© hai cá»§a `useQuery` lÃ  má»™t hÃ m callback chá»©a logic Ä‘á»ƒ láº¥y dá»¯ liá»‡u bÃ i viáº¿t tá»« API báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `fetchPost` vÃ  truyá»n `id` lÃ m tham sá»‘.

  - `useQuery` sáº½ quáº£n lÃ½ tráº¡ng thÃ¡i truy váº¥n vÃ  cache dá»¯ liá»‡u. ChÃºng ta sá»­ dá»¥ng cÃ¡c biáº¿n `data`, `isLoading`, `isError` vÃ  `error` Ä‘Æ°á»£c tráº£ vá» tá»« `useQuery` Ä‘á»ƒ xá»­ lÃ½ tráº¡ng thÃ¡i cá»§a truy váº¥n. CÃ¡c biáº¿n Ä‘Ã³ cÃ³ sáºµn trong `useQuery`.

  - Trong pháº§n render, chÃºng ta kiá»ƒm tra tráº¡ng thÃ¡i `isLoading` vÃ  `isError` Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng bÃ¡o tÆ°Æ¡ng á»©ng. Náº¿u Ä‘ang táº£i dá»¯ liá»‡u, chÃºng ta hiá»ƒn thá»‹ thÃ´ng bÃ¡o "Loading...". Náº¿u cÃ³ lá»—i, chÃºng ta hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i vÃ  hiá»ƒn thá»‹ `error.message`, `error` lÃ  thÃ´ng tin lá»—i nÃ³ Ä‘Æ°á»£c tráº£ vá» tá»« hook `useQuery`, nÃ³ cÃ³ sáºµn trong `isError`.

  - Náº¿u tráº¡ng thÃ¡i truy váº¥n lÃ  thÃ nh cÃ´ng (`isLoading` vÃ  `isError` Ä‘á»u lÃ  `false`), chÃºng ta hiá»ƒn thá»‹ chi tiáº¿t bÃ i viáº¿t báº±ng cÃ¡ch truy cáº­p vÃ o `data`. ChÃºng ta sá»­ dá»¥ng cÃ¡c trÆ°á»ng `id`, `title` vÃ  `content` Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin bÃ i viáº¿t.

- Component `PostDetails` sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c `Route` Ä‘á»ƒ hiá»ƒn thá»‹ trang chi tiáº¿t bÃ i viáº¿t dá»±a trÃªn `ID` Ä‘Æ°á»£c truyá»n qua URL.

âœ…âœ… Tá»•ng láº¡i: TrÃªn Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ cÆ¡ báº£n vá» viá»‡c sá»­ dá»¥ng `React Router` káº¿t há»£p vá»›i `React Query` trong á»©ng dá»¥ng cá»§a báº¡n. Báº±ng cÃ¡ch sá»­ dá»¥ng cáº£ hai thÆ° viá»‡n nÃ y, báº¡n cÃ³ thá»ƒ quáº£n lÃ½ `routing` vÃ  truy váº¥n dá»¯ liá»‡u má»™t cÃ¡ch hiá»‡u quáº£, mang láº¡i tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng tá»‘t hÆ¡n vÃ  tá»‘i Æ°u hÃ³a viá»‡c táº£i dá»¯ liá»‡u tá»« server.

## âŒâŒ LÆ°u Ã½: Trong queryKey: ['post', id]. CÃ¡i nÃ y cáº§n hiá»ƒu ká»¹, báº¯t buá»™c pháº£i hiá»ƒu: ğŸ‘‡ğŸ‘‡ğŸ‘‡

## âŒâŒ DÆ°á»›i Ä‘Ã¢y lÃ  giáº£i thÃ­ch tá»«ng tham sá»‘ trong queryKey: ğŸ‘‡ğŸ‘‡ğŸ‘‡

## HÃ£y giáº£i thÃ­ch vá» tham sá»‘ Ä‘áº§u tiÃªn ['post'] trong `queryKey` rÃµ rÃ ng hÆ¡n ?

- Tham sá»‘ Ä‘áº§u tiÃªn `['post']` trong `queryKey` Ä‘áº¡i diá»‡n cho loáº¡i truy váº¥n. NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh danh loáº¡i dá»¯ liá»‡u báº¡n Ä‘ang truy váº¥n.

- Trong trÆ°á»ng há»£p nÃ y, `'post'` lÃ  má»™t chuá»—i Ä‘áº¡i diá»‡n cho loáº¡i dá»¯ liá»‡u `"post"` mÃ  báº¡n muá»‘n truy váº¥n. Loáº¡i dá»¯ liá»‡u nÃ y cÃ³ thá»ƒ lÃ  báº¥t ká»³ chuá»—i nÃ o mÃ  báº¡n tá»± Ä‘áº·t tÃªn Ä‘á»ƒ phÃ¹ há»£p vá»›i mÃ´ hÃ¬nh dá»¯ liá»‡u cá»§a á»©ng dá»¥ng cá»§a báº¡n. VÃ­ dá»¥: `'user'`, `'comment'`, `'product'`, vv.

- VÃ­ dá»¥: Náº¿u á»©ng dá»¥ng cá»§a báº¡n lÃ  má»™t blog vÃ  báº¡n muá»‘n truy váº¥n cÃ¡c bÃ i Ä‘Äƒng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `['post']` lÃ m `queryKey` Ä‘á»ƒ xÃ¡c Ä‘á»‹nh loáº¡i truy váº¥n lÃ  `"post"`.

- Má»¥c Ä‘Ã­ch cá»§a viá»‡c sá»­ dá»¥ng loáº¡i truy váº¥n trong `queryKey` lÃ  Ä‘á»ƒ xÃ¡c Ä‘á»‹nh vÃ  phÃ¢n loáº¡i cÃ¡c truy váº¥n dá»±a trÃªn loáº¡i dá»¯ liá»‡u. Khi báº¡n cÃ³ nhiá»u loáº¡i dá»¯ liá»‡u khÃ¡c nhau trong á»©ng dá»¥ng cá»§a mÃ¬nh, viá»‡c Ä‘á»‹nh danh má»—i loáº¡i dá»¯ liá»‡u thÃ´ng qua `queryKey` giÃºp React Query quáº£n lÃ½ vÃ  xá»­ lÃ½ cÃ¡c truy váº¥n má»™t cÃ¡ch chÃ­nh xÃ¡c.

## Tham sá»‘ thá»© 2 trong `queryKey` lÃ  `id`. NÃ³ cÃ³ nghÄ©a lÃ  sao. TÃ´i chÆ°a hiá»ƒu láº¯m ?

- Tham sá»‘ thá»© hai trong `queryKey`, trong trÆ°á»ng há»£p cá»§a báº¡n lÃ  `id`, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh má»™t giÃ¡ trá»‹ Ä‘áº·c biá»‡t (vÃ­ dá»¥: ID cá»§a bÃ i viáº¿t) Ä‘á»ƒ truy váº¥n dá»¯ liá»‡u cá»¥ thá»ƒ tá»« server.

- Khi báº¡n truy váº¥n dá»¯ liá»‡u tá»« má»™t nguá»“n dá»¯ liá»‡u nhÆ° má»™t API, thÃ´ng thÆ°á»ng báº¡n cáº§n chá»‰ Ä‘á»‹nh má»™t giÃ¡ trá»‹ duy nháº¥t Ä‘á»ƒ xÃ¡c Ä‘á»‹nh dá»¯ liá»‡u cáº§n láº¥y. Trong trÆ°á»ng há»£p cá»§a báº¡n lÃ  `queryKey: ['post', id]`, `id` Ä‘áº¡i diá»‡n cho giÃ¡ trá»‹ Ä‘áº·c biá»‡t (vÃ­ dá»¥: ID cá»§a bÃ i viáº¿t) mÃ  báº¡n muá»‘n truy váº¥n.

- Vá»›i má»—i giÃ¡ trá»‹ `id` khÃ¡c nhau, báº¡n cÃ³ thá»ƒ truy váº¥n dá»¯ liá»‡u cá»§a cÃ¡c bÃ i viáº¿t khÃ¡c nhau tá»« server. Khi `id` thay Ä‘á»•i, React Query sáº½ tá»± Ä‘á»™ng gá»­i yÃªu cáº§u má»›i Ä‘á»ƒ láº¥y dá»¯ liá»‡u tÆ°Æ¡ng á»©ng tá»« server.

- VÃ­ dá»¥: Náº¿u báº¡n muá»‘n truy váº¥n dá»¯ liá»‡u bÃ i viáº¿t cÃ³ ID lÃ  1, báº¡n sáº½ sá»­ dá»¥ng `queryKey: ['post', 1]`. Äiá»u nÃ y cho biáº¿t báº¡n muá»‘n truy váº¥n dá»¯ liá»‡u bÃ i viáº¿t vá»›i `ID` lÃ  `1` tá»« server.

- TÃ³m láº¡i, viá»‡c sá»­ dá»¥ng `id` lÃ  má»™t cÃ¡ch Ä‘á»ƒ xÃ¡c Ä‘á»‹nh má»™t giÃ¡ trá»‹ Ä‘áº·c biá»‡t vÃ  chá»‰ Ä‘á»‹nh dá»¯ liá»‡u cá»¥ thá»ƒ báº¡n muá»‘n truy váº¥n tá»« server.

## Khi tÃ´i khai bÃ¡o nhÆ° váº­y `queryKey: ['post', id]` thÃ¬ tÃ´i sáº½ láº¥y táº¥t cáº£ cÃ¡c bÃ i viáº¿t trong `server` lun háº£ ?

- KhÃ´ng, khi báº¡n khai bÃ¡o `queryKey: ['post', id]`, nghÄ©a lÃ  báº¡n chá»‰ Ä‘á»‹nh má»™t `queryKey` cá»¥ thá»ƒ Ä‘á»ƒ truy váº¥n dá»¯ liá»‡u cá»§a má»™t bÃ i viáº¿t duy nháº¥t tá»« server. `QueryKey` nÃ y gá»“m hai pháº§n tá»­: `'post'` vÃ  `id`.

- Vá»›i cÃ¡ch truy váº¥n nhÆ° váº­y, React Query sáº½ tá»± Ä‘á»™ng thÃªm `queryKey` vÃ o bá»™ nhá»› cache Ä‘á»ƒ lÆ°u trá»¯ káº¿t quáº£ truy váº¥n cá»§a bÃ i viáº¿t Ä‘Ã³. Khi báº¡n thá»±c hiá»‡n truy váº¥n vá»›i `queryKey` tÆ°Æ¡ng tá»± trong tÆ°Æ¡ng lai, React Query sáº½ trÆ°á»›c tiÃªn kiá»ƒm tra xem liá»‡u dá»¯ liá»‡u Ä‘Ã£ tá»“n táº¡i trong cache hay chÆ°a.

- Náº¿u dá»¯ liá»‡u Ä‘Ã£ tá»“n táº¡i trong cache vÃ  chÆ°a háº¿t háº¡n (thá»i gian háº¿t háº¡n Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi `staleTime`), React Query sáº½ tráº£ vá» dá»¯ liá»‡u tá»« cache mÃ  khÃ´ng gá»­i yÃªu cáº§u má»›i Ä‘áº¿n server. Äiá»u nÃ y giÃºp cáº£i thiá»‡n hiá»‡u suáº¥t á»©ng dá»¥ng.

- Náº¿u dá»¯ liá»‡u trong cache Ä‘Ã£ háº¿t háº¡n hoáº·c chÆ°a tá»“n táº¡i trong cache, React Query sáº½ tá»± Ä‘á»™ng gá»­i yÃªu cáº§u má»›i Ä‘áº¿n server Ä‘á»ƒ láº¥y dá»¯ liá»‡u cá»§a bÃ i viáº¿t tÆ°Æ¡ng á»©ng. Sau khi nháº­n Ä‘Æ°á»£c káº¿t quáº£ tá»« server, nÃ³ sáº½ cáº­p nháº­t cache vÃ  tráº£ vá» káº¿t quáº£ cho báº¡n sá»­ dá»¥ng.

- VÃ¬ váº­y, vá»›i `queryKey: ['post', id]`, báº¡n chá»‰ truy váº¥n dá»¯ liá»‡u cá»§a má»™t bÃ i viáº¿t duy nháº¥t cÃ³ `ID` tÆ°Æ¡ng á»©ng tá»« server, khÃ´ng pháº£i táº¥t cáº£ cÃ¡c bÃ i viáº¿t.

## CÃ³ nghÄ©a lÃ  cÃ¡c bÃ i viáº¿t cá»§a tÃ´i Ä‘Ã£ `render` lÃªn mÃ n hÃ¬nh háº¿t rá»“i. VÃ  khi tÃ´i khai bÃ¡o nhÆ° váº­y thÃ¬ cÃ³ nghÄ©a lÃ  tÃ´i `click` vÃ o 1 bÃ i viáº¿t báº¥t kÃ¬ trÃªn mÃ n hÃ¬nh, lÃ  `id` cá»§a bÃ i viáº¿t Ä‘Ã³ Ä‘Æ°á»£c lÆ°u trong `cache`. `queryKey: ['post', id]`, Váº­y dÃ²ng nÃ y cÃ³ `id` lÃ  `id` cá»§a má»—i bÃ i viáº¿t mÃ  tÃ´i `click` vÃ o Ä‘Ã³ háº£ ?

- ÄÃºng, khi báº¡n khai bÃ¡o `queryKey: ['post', id]`, trong Ä‘Ã³ `id` lÃ  `id` cá»§a bÃ i viáº¿t mÃ  báº¡n Ä‘ang xem hoáº·c `click` vÃ o. Äiá»u nÃ y cho phÃ©p React Query xÃ¡c Ä‘á»‹nh vÃ  lÆ°u trá»¯ káº¿t quáº£ truy váº¥n cho tá»«ng bÃ i viáº¿t cá»¥ thá»ƒ trong cache.

- Khi báº¡n `click` vÃ o má»™t bÃ i viáº¿t trÃªn mÃ n hÃ¬nh, báº¡n cÃ³ thá»ƒ truyá»n `id` cá»§a bÃ i viáº¿t Ä‘Ã³ vÃ o `queryKey` Ä‘á»ƒ thá»±c hiá»‡n truy váº¥n dá»¯ liá»‡u cá»§a bÃ i viáº¿t tá»« server. React Query sáº½ sá»­ dá»¥ng `queryKey` nÃ y Ä‘á»ƒ xÃ¡c Ä‘á»‹nh káº¿t quáº£ truy váº¥n tÆ°Æ¡ng á»©ng trong cache.

- VÃ­ dá»¥, náº¿u báº¡n `click` vÃ o bÃ i viáº¿t cÃ³ `id` lÃ  `1`, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `queryKey: ['post', 1]` Ä‘á»ƒ truy váº¥n dá»¯ liá»‡u cá»§a bÃ i viáº¿t Ä‘Ã³. Khi Ä‘Ã³, React Query sáº½ kiá»ƒm tra cache vÃ  tráº£ vá» káº¿t quáº£ truy váº¥n cá»§a bÃ i viáº¿t cÃ³ `id` lÃ  `1` náº¿u nÃ³ Ä‘Ã£ tá»“n táº¡i trong cache vÃ  chÆ°a háº¿t háº¡n. Náº¿u chÆ°a tá»“n táº¡i hoáº·c Ä‘Ã£ háº¿t háº¡n, React Query sáº½ gá»­i yÃªu cáº§u má»›i Ä‘áº¿n server Ä‘á»ƒ láº¥y dá»¯ liá»‡u cá»§a bÃ i viáº¿t vÃ  cáº­p nháº­t cache.

- Viá»‡c sá»­ dá»¥ng `queryKey` vá»›i `id` cá»§a bÃ i viáº¿t giÃºp React Query quáº£n lÃ½ vÃ  láº¥y dá»¯ liá»‡u tÆ°Æ¡ng á»©ng tá»« cache vÃ  server dá»… dÃ ng cho tá»«ng bÃ i viáº¿t riÃªng biá»‡t.

## Váº­y tÃ³m láº¡i `['post', id]` trong `queryKey`, cÃ³ nghÄ©a lÃ  khi cÃ¡c bÃ i viáº¿t Ä‘Æ°á»£c lÆ°u trong cache thÃ¬ `'post'` Ä‘Ã³ng vai trÃ² nhÆ° `key`, cÃ²n `id` Ä‘Ã³ng vai trÃ² nhÆ° `value` Ä‘Ãºng khÃ´ng ?

- ÄÃºng, báº¡n Ä‘Ã£ hiá»ƒu Ä‘Ãºng. Trong `queryKey: ['post', id]`, `'post'` Ä‘Ã³ng vai trÃ² nhÆ° má»™t pháº§n tá»­ `key` vÃ  `id` Ä‘Ã³ng vai trÃ² nhÆ° má»™t pháº§n tá»­ `value` trong máº£ng `queryKey`.

- CÃ¡c máº£ng `queryKey` Ä‘Æ°á»£c sá»­ dá»¥ng trong React Query nhÆ° má»™t cÃ¡ch Ä‘á»ƒ xÃ¡c Ä‘á»‹nh duy nháº¥t má»™t truy váº¥n dá»¯ liá»‡u. Trong trÆ°á»ng há»£p nÃ y, `'post'` lÃ  pháº§n tá»­ `key` vÃ  Ä‘áº¡i diá»‡n cho loáº¡i dá»¯ liá»‡u bÃ i viáº¿t trong truy váº¥n. `id` lÃ  pháº§n tá»­ `value` vÃ  Ä‘áº¡i diá»‡n cho giÃ¡ trá»‹ cá»¥ thá»ƒ cá»§a `id` cá»§a bÃ i viáº¿t mÃ  báº¡n muá»‘n truy váº¥n.

- Khi sá»­ dá»¥ng `queryKey: ['post', id]`, React Query sáº½ sá»­ dá»¥ng cáº£ `key` vÃ  `value` Ä‘á»ƒ xÃ¡c Ä‘á»‹nh truy váº¥n cá»¥ thá»ƒ vÃ  quáº£n lÃ½ káº¿t quáº£ truy váº¥n cho tá»«ng bÃ i viáº¿t dá»±a trÃªn `id` tÆ°Æ¡ng á»©ng.

## HÃ£y nÃªu khÃ¡i niá»‡m useMutation trong react query ?

## VÃ­ dá»¥ vá» useMutation trong react query ?

## VÃ­ dá»¥ vá» useQuery trong react query ?

## HÃ£y nÃªu khÃ¡i niá»‡m useQuery trong react query ?

## Tá»•ng quan vá» useMutation vÃ  useQuery trong react query ?

## React Toastify

## ÄÃ¢y lÃ  Docs cá»§a ÄÆ°á»£c Dev:

TIáº¿p ná»‘i video láº§n trÆ°á»›c, láº§n nÃ y chÃºng ta sáº½ thá»±c hiá»‡n chá»©c nÄƒng Edit vÃ  Delete Student báº±ng React Query nhÃ©.

ğŸ’“Kiáº¿n thá»©c cÃ¡c báº¡n sáº½ Ä‘Æ°á»£c há»c trong video nÃ y:

ğŸ‰ Sá»­ dá»¥ng react router káº¿t há»£p vá»›i react query
ğŸ‰ useMutation vÃ  useQuery
ğŸ‰ React Toastify

ğŸ•°ï¸Ná»™i dung chÃ­nh

00:00 - Edit Student
15:50 - Sá»­ dá»¥ng React Toastify
18:40 - Xá»­ lÃ½ lá»—i submit tá»« server tráº£ vá»
22:11 - Delete Student
