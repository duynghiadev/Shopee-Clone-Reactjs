# React.memo

ChÃºng ta dÃ¹ng React.memo khi khÃ´ng muá»‘n component bá»‹ re-render má»—i khi component cha re-render

> CÃ¡c tÃ¡c nhÃ¢n lÃ m component re-render: cáº­p nháº­t state, cáº­p nháº­t prop, component cha re-render

React.memo lÃ  má»™t HOC, váº­y nÃªn chá»‰ cáº§n bao bá»c component lÃ  Ä‘Æ°á»£c

```jsx
const newComponent = React.memo(Component);
```

React.memo chá»‰ tÃ¡c Ä‘á»™ng Ä‘áº¿n prop, khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n state

CÆ¡ cháº¿ memo lÃ  cÆ¡ cháº¿ dÃ¹ng bá»™ nhá»› (RAM) Ä‘á»ƒ lÆ°u trá»¯, vÃ¬ tháº¿ khi dÃ¹ng nhá»¯ng thá»© liÃªn quan Ä‘áº¿n memo nghÄ©a lÃ  chÃºng ta Ä‘ang Ä‘Ã¡nh Ä‘á»•i giá»¯a tá»‘n nhiá»u bá»™ nhá»› hÆ¡n Ä‘á»ƒ tÄƒng tá»‘c performance.

Váº­y nÃªn Ä‘á»«ng láº¡m dá»¥ng quÃ¡ nhÃ©!

## Ná»™i dung nÃ y khÃ´ng liÃªn quan Ä‘áº¿n bÃ i há»c, nhÆ°ng tÃ´i bá»• sung vÃ o Ä‘á»ƒ hiá»ƒu hÆ¡n vá» TypeScript:

- Trong TypeScript, cÃ¡c interfaces Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ mÃ´ táº£ cÃ¡c kiá»ƒu Ä‘á»‘i tÆ°á»£ng. Tuy nhiÃªn, náº¿u báº¡n Ä‘ang lÃ m viá»‡c vá»›i má»™t sá»‘ Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n giáº£n, khÃ´ng cáº§n thiáº¿t pháº£i táº¡o má»™t interface má»›i cho má»—i Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Thay vÃ o Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng má»™t cÃ¡ch tiáº¿p cáº­n khÃ¡c gá»i lÃ  "type inference" Ä‘á»ƒ TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.

- VÃ­ dá»¥, giáº£ sá»­ báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n giáº£n nhÆ° sau:

```jsx
const user = {
  name: "John",
  age: 30,
  isActive: true,
};
```

- Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng type inference Ä‘á»ƒ TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng user nhÆ° sau:

```jsx
const user = {
  name: "John",
  age: 30,
  isActive: true,
};

type User = typeof user;
```

- Trong Ä‘oáº¡n mÃ£ nÃ y, chÃºng ta sá»­ dá»¥ng tá»« khÃ³a typeof Ä‘á»ƒ láº¥y kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng user. Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng type alias User Ä‘á»ƒ Ä‘áº·t tÃªn cho kiá»ƒu dá»¯ liá»‡u nÃ y.

- **_Vá»›i cÃ¡ch tiáº¿p cáº­n nÃ y, chÃºng ta khÃ´ng cáº§n pháº£i khai bÃ¡o má»™t interface má»›i cho má»—i Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n giáº£n nhÆ° trÃªn, mÃ  TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u dá»±a trÃªn giÃ¡ trá»‹ cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Tuy nhiÃªn, Ä‘á»‘i vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p hÆ¡n, viá»‡c sá»­ dá»¥ng interfaces sáº½ giÃºp cho code cá»§a báº¡n trá»Ÿ nÃªn rÃµ rÃ ng vÃ  dá»… báº£o trÃ¬ hÆ¡n._**

### Type Inference Ä‘Æ°á»£c gá»i lÃ  gÃ¬ ?

**1. KhÃ¡i niá»‡m:**

- Type inference lÃ  quÃ¡ trÃ¬nh TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a biáº¿n hoáº·c hÃ m dá»±a trÃªn cÃ¡ch mÃ  chÃºng Ä‘Æ°á»£c khai bÃ¡o vÃ  sá»­ dá»¥ng trong mÃ£ nguá»“n. TypeScript sá»­ dá»¥ng cÃ¡c ká»¹ thuáº­t phÃ¢n tÃ­ch tÄ©nh Ä‘á»ƒ phÃ¢n tÃ­ch mÃ£ nguá»“n vÃ  suy ra kiá»ƒu dá»¯ liá»‡u má»™t cÃ¡ch tá»± Ä‘á»™ng, giÃºp cho viá»‡c viáº¿t mÃ£ chÃ­nh xÃ¡c hÆ¡n vÃ  giáº£m thiá»ƒu sá»‘ lÆ°á»£ng lá»—i. Viá»‡c sá»­ dá»¥ng type inference cÅ©ng giÃºp cho mÃ£ nguá»“n trá»Ÿ nÃªn dá»… Ä‘á»c vÃ  dá»… báº£o trÃ¬ hÆ¡n.

**2. Cho tÃ´i vÃ­ dá»¥ tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao cá»§a Type Inference ?**

- DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥ tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao cá»§a type inference trong TypeScript:

_a. VÃ­ dá»¥ cÆ¡ báº£n: Type inference trong khai bÃ¡o biáº¿n:_

- Khi báº¡n khai bÃ¡o má»™t biáº¿n mÃ  khÃ´ng xÃ¡c Ä‘á»‹nh kiá»ƒu dá»¯ liá»‡u, TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a biáº¿n Ä‘Ã³ dá»±a trÃªn giÃ¡ trá»‹ Ä‘Æ°á»£c gÃ¡n cho biáº¿n Ä‘Ã³.

```jsx
let name = "John"; // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u lÃ  string
let age = 30; // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u lÃ  number
```

_b. VÃ­ dá»¥ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c vÃ  thuá»™c tÃ­nh trong object:_

- Khi báº¡n sá»­ dá»¥ng phÆ°Æ¡ng thá»©c hoáº·c thuá»™c tÃ­nh trong object, TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ dá»±a trÃªn cÃ¡c phÆ°Æ¡ng thá»©c vÃ  thuá»™c tÃ­nh cÃ³ sáºµn.

```jsx
const person = {
  name: "John",
  age: 30,
  greet() {
    console.log(
      `Hello, my name is ${this.name} and I am ${this.age} years old.`
    );
  },
};

person.greet(); // Hello, my name is John and I am 30 years old.

// TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng person lÃ 
// { name: string, age: number, greet: () => void }
```

_c.VÃ­ dá»¥ sá»­ dá»¥ng generics:_

- Khi sá»­ dá»¥ng generics, TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u dá»±a trÃªn kiá»ƒu dá»¯ liá»‡u Ä‘Æ°á»£c truyá»n vÃ o

```jsx
function reverse<T>(items: T[]): T[] {
  return items.reverse();
}

const numbers = [1, 2, 3, 4, 5];
const reversedNumbers = reverse(numbers); // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u lÃ  number[]

const strings = ["apple", "banana", "orange"];
const reversedStrings = reverse(strings); // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u lÃ  string[]
```

_d.VÃ­ dá»¥ sá»­ dá»¥ng hÃ m callback:_

- Khi sá»­ dá»¥ng hÃ m callback, TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u dá»±a trÃªn tham sá»‘ Ä‘Æ°á»£c truyá»n vÃ o.

```jsx
function add(a: number, b: number, callback: (result: number) => void) {
  const result = a + b;
  callback(result);
}

add(2, 3, (result) => {
  console.log(result); // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a result lÃ  number
});
```

**_[ğŸ‘†ğŸ‘† TrÃªn Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥ tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao cá»§a type inference trong TypeScript.]_**

**3. HÃ£y cho tÃ´i biáº¿t Union Type lÃ  gÃ¬ ?**

- Trong TypeScript, union type lÃ  má»™t kiá»ƒu dá»¯ liá»‡u cho phÃ©p biáº¿n hoáº·c tham sá»‘ cÃ³ thá»ƒ cÃ³ nhiá»u kiá»ƒu dá»¯ liá»‡u khÃ¡c nhau. Khi sá»­ dá»¥ng union type, biáº¿n hoáº·c tham sá»‘ cÃ³ thá»ƒ chá»©a giÃ¡ trá»‹ cá»§a báº¥t ká»³ kiá»ƒu dá»¯ liá»‡u nÃ o trong union type Ä‘Ã³.

- CÃº phÃ¡p cá»§a union type Ä‘Æ°á»£c thá»ƒ hiá»‡n báº±ng kÃ½ tá»± "|" giá»¯a cÃ¡c kiá»ƒu dá»¯ liá»‡u. VÃ­ dá»¥: `string | number` Ä‘áº¡i diá»‡n cho má»™t union type cho phÃ©p biáº¿n hoáº·c tham sá»‘ cÃ³ thá»ƒ lÃ  má»™t chuá»—i hoáº·c má»™t sá»‘.

**_VÃ­ dá»¥ tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao:_**

**_a. VÃ­ dá»¥ cÆ¡ báº£n 1:_**

```jsx
function printId(id: string | number) {
  console.log(`ID is: ${id}`);
}

printId("abc123"); // ID is: abc123
printId(123); // ID is: 123
```

- Trong vÃ­ dá»¥ trÃªn, hÃ m `printId` cÃ³ tham sá»‘ `id` lÃ  union type `string | number`. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  tham sá»‘ `id` cÃ³ thá»ƒ lÃ  má»™t chuá»—i hoáº·c má»™t sá»‘. Khi hÃ m Ä‘Æ°á»£c gá»i, giÃ¡ trá»‹ cá»§a tham sá»‘ sáº½ Ä‘Æ°á»£c in ra mÃ n hÃ¬nh.

**_b. VÃ­ dá»¥ cÆ¡ báº£n 2:_**

- Union type trong TypeScript cho phÃ©p chÃºng ta Ä‘á»‹nh nghÄ©a má»™t biáº¿n hoáº·c tham sá»‘ cÃ³ thá»ƒ cÃ³ giÃ¡ trá»‹ cá»§a má»™t hoáº·c nhiá»u loáº¡i khÃ¡c nhau.

```jsx
function printID(id: number | string) {
  console.log(`ID: ${id}`);
}

printID(100); // ID: 100
printID("abc"); // ID: abc
```

- á» vÃ­ dá»¥ nÃ y, chÃºng ta Ä‘á»‹nh nghÄ©a tham sá»‘ id cÃ³ thá»ƒ lÃ  kiá»ƒu number hoáº·c string. Khi cháº¡y hÃ m printID, chÃºng ta cÃ³ thá»ƒ truyá»n vÃ o má»™t giÃ¡ trá»‹ kiá»ƒu number hoáº·c string.

**_c. VÃ­ dá»¥ nÃ¢ng cao:_**

```jsx
interface Circle {
  kind: "circle";
  radius: number;
}

interface Square {
  kind: "square";
  sideLength: number;
}

type Shape = Circle | Square;

function getArea(shape: Shape): number {
  switch (shape.kind) {
    case "circle":
      return Math.PI * shape.radius ** 2;
    case "square":
      return shape.sideLength ** 2;
  }
}

const myCircle: Circle = { kind: "circle", radius: 5 };
const mySquare: Square = { kind: "square", sideLength: 10 };

console.log(getArea(myCircle)); // 78.53981633974483
console.log(getArea(mySquare)); // 100
```

**ğŸš€ğŸš€LÆ°u Ã½:ğŸš€ğŸš€**

```jsx
function getArea(shape: Shape): number {
```

- `DÃ²ng nÃ y cÃ³ nghÄ©a lÃ :`DÃ²ng nÃ y khai bÃ¡o má»™t function cÃ³ tÃªn lÃ  getArea, nháº­n má»™t tham sá»‘ lÃ  shape cÃ³ kiá»ƒu dá»¯ liá»‡u lÃ  Shape, vÃ  tráº£ vá» má»™t giÃ¡ trá»‹ cÃ³ kiá»ƒu lÃ  number. Cá»¥ thá»ƒ, khi gá»i hÃ m getArea, ta truyá»n vÃ o má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ kiá»ƒu dá»¯ liá»‡u lÃ  Shape, vÃ  hÃ m sáº½ tÃ­nh toÃ¡n diá»‡n tÃ­ch cá»§a hÃ¬nh Ä‘Ã³ vÃ  tráº£ vá» giÃ¡ trá»‹ kiá»ƒu number.

- á» vÃ­ dá»¥ nÃ y, chÃºng ta Ä‘á»‹nh nghÄ©a hai interface Circle vÃ  Square Ä‘á»ƒ mÃ´ táº£ hÃ¬nh trÃ²n vÃ  hÃ¬nh vuÃ´ng. Sau Ä‘Ã³, chÃºng ta Ä‘á»‹nh nghÄ©a má»™t union type Shape báº±ng cÃ¡ch káº¿t há»£p hai interface trÃªn. Trong hÃ m getArea, chÃºng ta sá»­ dá»¥ng switch Ä‘á»ƒ kiá»ƒm tra xem shape lÃ  hÃ¬nh trÃ²n hay hÃ¬nh vuÃ´ng, vÃ  tÃ­nh diá»‡n tÃ­ch tÆ°Æ¡ng á»©ng. Khi cháº¡y hÃ m getArea, chÃºng ta cÃ³ thá»ƒ truyá»n vÃ o má»™t giÃ¡ trá»‹ kiá»ƒu Circle hoáº·c Square, nhÆ° myCircle hoáº·c mySquare.
