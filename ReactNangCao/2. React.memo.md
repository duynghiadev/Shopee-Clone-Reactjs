# React.memo

- ChÃºng ta dÃ¹ng React.memo khi khÃ´ng muá»‘n component bá»‹ re-render má»—i khi component cha re-render

> CÃ¡c tÃ¡c nhÃ¢n lÃ m component re-render: cáº­p nháº­t state, cáº­p nháº­t prop, component cha re-render

- React.memo lÃ  má»™t Higher Order Component (HOC), váº­y nÃªn chá»‰ cáº§n bao bá»c component lÃ  Ä‘Æ°á»£c

```jsx
const newComponent = React.memo(Component);
```

- React.memo chá»‰ tÃ¡c Ä‘á»™ng Ä‘áº¿n prop, khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n state

- CÆ¡ cháº¿ memo lÃ  cÆ¡ cháº¿ dÃ¹ng bá»™ nhá»› (RAM) Ä‘á»ƒ lÆ°u trá»¯, vÃ¬ tháº¿ khi dÃ¹ng nhá»¯ng thá»© liÃªn quan Ä‘áº¿n memo nghÄ©a lÃ  chÃºng ta Ä‘ang Ä‘Ã¡nh Ä‘á»•i giá»¯a tá»‘n nhiá»u bá»™ nhá»› hÆ¡n Ä‘á»ƒ tÄƒng tá»‘c performance.

- Váº­y nÃªn Ä‘á»«ng láº¡m dá»¥ng quÃ¡ nhÃ©!

## VÃ¬ sao ta khÃ´ng dÃ¹ng React.memo() bÃªn trong method render hoáº·c lÃ  bÃªn trong functional component. VÃ¬ nÃ³ sáº½ lÃ m component bá»‹ unmount liÃªn tá»¥c má»—i khi re-render. ?

- VÃ¬ má»—i láº§n component re-render sáº½ gá»i láº¡i function React.memo() => Ä‘iá»u nÃ y lÃ m component trong React.memo() bá»‹ unmount

## Sao gá»i láº¡i dáº«n Ä‘áº¿n Unmount ?

- CÃ¡i component bÃªn trong khÃ´ng tá»“n táº¡i ná»¯a, bá»‹ xÃ³a vÃ o táº¡o láº¡i cÃ¡i má»›i

## VÃ¬ sao khÃ´ng dÃ¹ng React.memo() bÃªn trong method render hoáº·c lÃ  bÃªn trong functional component ?

- React.memo() lÃ  má»™t hÃ m giÃºp tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t báº±ng cÃ¡ch ngÄƒn cháº·n cÃ¡c component Ä‘Æ°á»£c render láº¡i khi cÃ¡c props cá»§a chÃºng khÃ´ng thay Ä‘á»•i. NÃ³ hoáº¡t Ä‘á»™ng báº±ng cÃ¡ch so sÃ¡nh cÃ¡c props cá»§a component má»›i vá»›i cÃ¡c props cá»§a component trÆ°á»›c Ä‘Ã³, náº¿u chÃºng báº±ng nhau thÃ¬ React sáº½ sá»­ dá»¥ng káº¿t quáº£ Ä‘Æ°á»£c cache cá»§a component cÅ© thay vÃ¬ render láº¡i component má»›i.

- Tuy nhiÃªn, khÃ´ng nÃªn sá»­ dá»¥ng React.memo() bÃªn trong method render hoáº·c bÃªn trong functional component. LÃ½ do lÃ  khi báº¡n sá»­ dá»¥ng React.memo() bÃªn trong method render hoáº·c functional component, thÃ¬ má»—i láº§n component Ä‘Æ°á»£c render láº¡i, React.memo() sáº½ Ä‘Æ°á»£c gá»i láº¡i vÃ  kiá»ƒm tra láº¡i cÃ¡c props cá»§a component. Äiá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n hiá»‡u suáº¥t cháº­m hÆ¡n do pháº£i thá»±c hiá»‡n cÃ¡c tÃ­nh toÃ¡n khÃ´ng cáº§n thiáº¿t.

- Thay vÃ o Ä‘Ã³, báº¡n nÃªn sá»­ dá»¥ng React.memo() Ä‘á»ƒ bao bá»c cÃ¡c component con trong component cha, vÃ  chá»‰ sá»­ dá»¥ng nÃ³ cho cÃ¡c component con mÃ  báº¡n mong muá»‘n tá»‘i Æ°u hiá»‡u suáº¥t. Äiá»u nÃ y giÃºp trÃ¡nh cÃ¡c láº§n render khÃ´ng cáº§n thiáº¿t cho cÃ¡c component khÃ´ng cáº§n tá»‘i Æ°u hiá»‡u suáº¥t, vÃ  chá»‰ tá»‘i Æ°u hiá»‡u suáº¥t cho cÃ¡c component quan trá»ng.

- NgoÃ i ra, báº¡n cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng React.memo() cho cÃ¡c component Ä‘Æ°á»£c truyá»n vÃ o báº±ng props, Ä‘áº·c biá»‡t lÃ  cÃ¡c component cÃ³ tÃ­nh cháº¥t pure (khÃ´ng thay Ä‘á»•i state hoáº·c props cá»§a chÃºng). Viá»‡c nÃ y sáº½ giÃºp trÃ¡nh viá»‡c render láº¡i cÃ¡c component con má»—i khi props cá»§a chÃºng thay Ä‘á»•i.

- TÃ³m láº¡i, báº¡n nÃªn sá»­ dá»¥ng React.memo() má»™t cÃ¡ch cáº©n tháº­n vÃ  chá»‰ sá»­ dá»¥ng nÃ³ cho cÃ¡c component quan trá»ng trong á»©ng dá»¥ng cá»§a báº¡n.

## React.memo() Ä‘Æ°á»£c sá»­ dá»¥ng cho props hay state ?

- React.memo() Ä‘Æ°á»£c sá»­ dá»¥ng cho props cá»§a component. NÃ³ hoáº¡t Ä‘á»™ng báº±ng cÃ¡ch so sÃ¡nh cÃ¡c props má»›i cá»§a component vá»›i cÃ¡c props trÆ°á»›c Ä‘Ã³, vÃ  náº¿u cÃ¡c props nÃ y khÃ´ng thay Ä‘á»•i thÃ¬ component sáº½ khÃ´ng Ä‘Æ°á»£c render láº¡i.

- Trong React, state lÃ  má»™t thuá»™c tÃ­nh cá»§a component Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi React vÃ  chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c thay Ä‘á»•i báº±ng cÃ¡ch sá»­ dá»¥ng phÆ°Æ¡ng thá»©c `setState()`. Tuy nhiÃªn, `React.memo()` khÃ´ng thá»ƒ sá»­ dá»¥ng cho state cá»§a component, bá»Ÿi vÃ¬ nÃ³ khÃ´ng theo dÃµi cÃ¡c thay Ä‘á»•i cá»§a state. Thay vÃ o Ä‘Ã³, báº¡n nÃªn sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c tá»‘i Æ°u khÃ¡c cá»§a React nhÆ° `shouldComponentUpdate()` hoáº·c sá»­ dá»¥ng cÃ¡c hook nhÆ° `useMemo()` hoáº·c `useCallback()` Ä‘á»ƒ tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t cá»§a component dá»±a trÃªn state.

- VÃ¬ váº­y, náº¿u báº¡n muá»‘n tá»‘i Æ°u hiá»‡u suáº¥t cá»§a má»™t component dá»±a trÃªn cÃ¡c thay Ä‘á»•i cá»§a state, báº¡n nÃªn sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c vÃ  hook tá»‘i Æ°u khÃ¡c cá»§a React thay vÃ¬ React.memo()`.

## Táº¡i sao React.memo() nÃ³ khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng cho state ?

- React.memo() khÃ´ng Ä‘Æ°á»£c sá»­ dá»¥ng cho state cá»§a component bá»Ÿi vÃ¬ nÃ³ khÃ´ng theo dÃµi cÃ¡c thay Ä‘á»•i cá»§a state. State lÃ  má»™t thuá»™c tÃ­nh cá»§a component Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi React vÃ  chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c thay Ä‘á»•i báº±ng cÃ¡ch sá»­ dá»¥ng phÆ°Æ¡ng thá»©c `setState()`.

- Khi state cá»§a má»™t component thay Ä‘á»•i, React sáº½ tá»± Ä‘á»™ng gá»i phÆ°Æ¡ng thá»©c `render()` Ä‘á»ƒ render láº¡i component Ä‘Ã³. Tuy nhiÃªn, náº¿u cÃ¡c props cá»§a component khÃ´ng thay Ä‘á»•i vÃ  báº¡n sá»­ dá»¥ng React.memo() Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t, component váº«n sáº½ khÃ´ng Ä‘Æ°á»£c render láº¡i.

- Tuy nhiÃªn, náº¿u báº¡n muá»‘n tá»‘i Æ°u hiá»‡u suáº¥t cá»§a má»™t component dá»±a trÃªn cÃ¡c thay Ä‘á»•i cá»§a state, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c tá»‘i Æ°u khÃ¡c cá»§a React nhÆ° `shouldComponentUpdate()` hoáº·c sá»­ dá»¥ng cÃ¡c hook nhÆ° `useMemo()` hoáº·c `useCallback()`. Äiá»u nÃ y giÃºp cho component chá»‰ Ä‘Æ°á»£c render láº¡i khi state cá»§a nÃ³ thay Ä‘á»•i, giÃºp cáº£i thiá»‡n hiá»‡u suáº¥t cá»§a á»©ng dá»¥ng.

## VÃ­ dá»¥ Ä‘á»ƒ hiá»ƒu thÃªm:

```jsx
import React, { useState } from "react";

function ChildComponent1({ name }) {
  console.log(`Rendering ChildComponent1 with name ${name}`);
  return <p>Hello, {name}!</p>;
}

const MemoizedChildComponent1 = React.memo(ChildComponent1);

function ChildComponent2({ age }) {
  console.log(`Rendering ChildComponent2 with age ${age}`);
  return <p>You are {age} years old.</p>;
}

function ParentComponent() {
  const [name, setName] = useState("React");
  const [age, setAge] = useState(25);

  return (
    <div>
      <MemoizedChildComponent1 name={name} />
      <ChildComponent1 name={name} />
      <ChildComponent2 age={age} />
      <button onClick={() => setName("React Hooks")}>Change Name</button>
      <button onClick={() => setAge(age + 1)}>Change Age</button>
    </div>
  );
}
```

ğŸ‘‰`HÃ£y giáº£i thÃ­ch chi tiáº¿t cho tÃ´i function ChildComponent1 cÃ³ thay Ä‘á»•i khÃ´ng, máº·c dÃ¹ nÃ³ Ä‘Ã£ Ä‘Æ°á»£c bá»c bá»Ÿi dÃ²ng nÃ y const MemoizedChildComponent1 = React.memo(ChildComponent1);`

- Trong vÃ­ dá»¥ nÃ y, component `ChildComponent1` Ä‘Æ°á»£c bá»c bá»Ÿi `React.memo` vÃ  táº¡o ra biáº¿n `MemoizedChildComponent1` má»›i, tuy nhiÃªn, trong `ParentComponent`, cáº£ `MemoizedChildComponent1` vÃ  `ChildComponent1` Ä‘á»u Ä‘Æ°á»£c sá»­ dá»¥ng vÃ  nháº­n cÃ¹ng má»™t prop `name` tá»« state `name` cá»§a `ParentComponent`.

- Khi `name` thay Ä‘á»•i, `MemoizedChildComponent1` khÃ´ng bá»‹ render láº¡i vÃ¬ nÃ³ Ä‘Ã£ Ä‘Æ°á»£c bá»c bá»Ÿi `React.memo` vÃ  nÃ³ chá»‰ sáº½ render láº¡i náº¿u cÃ¡c props Ä‘Æ°á»£c truyá»n vÃ o thay Ä‘á»•i. Trong trÆ°á»ng há»£p nÃ y, prop `name` Ä‘Æ°á»£c truyá»n vÃ o váº«n lÃ  cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng string vÃ  khÃ´ng thay Ä‘á»•i giÃ¡ trá»‹ cá»§a nÃ³.

- Tuy nhiÃªn, `ChildComponent1` khÃ´ng Ä‘Æ°á»£c bá»c bá»Ÿi `React.memo` vÃ  sáº½ luÃ´n render láº¡i má»—i khi `ParentComponent` render. VÃ¬ váº­y, náº¿u `name` thay Ä‘á»•i, cáº£ `MemoizedChildComponent1` vÃ  `ChildComponent1` Ä‘á»u sáº½ render láº¡i.

- Do Ä‘Ã³, trong trÆ°á»ng há»£p nÃ y, `ChildComponent1` cÃ³ thay Ä‘á»•i vÃ  sáº½ render láº¡i má»—i khi `ParentComponent` render, báº¥t ká»ƒ Ä‘Ã£ Ä‘Æ°á»£c bá»c bá»Ÿi `React.memo` hay khÃ´ng.

ğŸ‘‰`Váº­y ChildComponent1 vÃ  MemoizedChildComponent1  ai sáº½ render láº¡i ?`

- Trong trÆ°á»ng há»£p nÃ y, khi chÃºng ta thay Ä‘á»•i giÃ¡ trá»‹ cá»§a state `name` báº±ng cÃ¡ch nháº¥n vÃ o nÃºt "Change Name", thÃ¬ chá»‰ cÃ³ `ChildComponent1` sáº½ bá»‹ re-render vÃ  `MemoizedChildComponent1` sáº½ khÃ´ng re-render.

- Äiá»u nÃ y xáº£y ra vÃ¬ `ChildComponent1` Ä‘Æ°á»£c truyá»n `name` thÃ´ng qua props, trong khi `MemoizedChildComponent1` Ä‘Æ°á»£c táº¡o ra báº±ng cÃ¡ch bá»c `ChildComponent1` trong `React.memo()`. VÃ¬ váº­y, chá»‰ khi `name` thay Ä‘á»•i thÃ´ng qua props truyá»n vÃ o `ChildComponent1`, `ChildComponent1` má»›i Ä‘Æ°á»£c re-render. Trong khi Ä‘Ã³, `MemoizedChildComponent1` sáº½ khÃ´ng re-render do Ä‘Ã£ Ä‘Æ°á»£c bá»c bá»Ÿi `React.memo()`.

## Interface khai bÃ¡o Ä‘á»ƒ lÃ m gÃ¬ ?

- Interface lÃ  má»™t tÃ­nh nÄƒng cá»§a TypeScript, nÃ³ giÃºp báº¡n xÃ¡c Ä‘á»‹nh cáº¥u trÃºc cá»§a má»™t Ä‘á»‘i tÆ°á»£ng (object) hoáº·c má»™t lá»›p (class). NÃ³ cho phÃ©p báº¡n Ä‘á»‹nh nghÄ©a cÃ¡c thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c vÃ  kiá»ƒu dá»¯ liá»‡u mÃ  Ä‘á»‘i tÆ°á»£ng hoáº·c lá»›p cáº§n pháº£i cÃ³.

- Khi báº¡n Ä‘á»‹nh nghÄ©a má»™t interface, báº¡n khÃ´ng táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ, mÃ  chá»‰ Ä‘á»‹nh nghÄ©a kiá»ƒu cho cÃ¡c Ä‘á»‘i tÆ°á»£ng tÆ°Æ¡ng tá»± nhau. Sau Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng interface Ä‘á»ƒ khai bÃ¡o kiá»ƒu cho cÃ¡c biáº¿n, tham sá»‘ hoáº·c giÃ¡ trá»‹ tráº£ vá» cá»§a cÃ¡c hÃ m.

- VÃ­ dá»¥, giáº£ sá»­ báº¡n Ä‘ang phÃ¡t triá»ƒn má»™t á»©ng dá»¥ng web vá»›i TypeScript vÃ  báº¡n cáº§n má»™t interface Ä‘á»ƒ Ä‘á»‹nh nghÄ©a kiá»ƒu cho Ä‘á»‘i tÆ°á»£ng User. Báº¡n cÃ³ thá»ƒ viáº¿t interface nhÆ° sau:

```jsx
interface User {
  id: number;
  name: string;
  email: string;
  age?: number;
}
```

- Trong interface nÃ y, chÃºng ta Ä‘Ã£ xÃ¡c Ä‘á»‹nh cáº¥u trÃºc cá»§a má»™t Ä‘á»‘i tÆ°á»£ng User, bao gá»“m cÃ¡c thuá»™c tÃ­nh nhÆ° id, name, email, vÃ  age. Thuá»™c tÃ­nh age Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u báº±ng dáº¥u cháº¥m há»i, Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  nÃ³ lÃ  tÃ¹y chá»n.

- Sau khi báº¡n Ä‘Ã£ Ä‘á»‹nh nghÄ©a interface, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng nÃ³ Ä‘á»ƒ khai bÃ¡o kiá»ƒu cho cÃ¡c biáº¿n, tham sá»‘ hoáº·c giÃ¡ trá»‹ tráº£ vá» cá»§a cÃ¡c hÃ m. VÃ­ dá»¥, náº¿u báº¡n muá»‘n khai bÃ¡o má»™t biáº¿n user vá»›i kiá»ƒu dá»¯ liá»‡u lÃ  User, báº¡n cÃ³ thá»ƒ lÃ m nhÆ° sau:

```jsx
const user: User = {
  id: 1,
  name: "John Doe",
  email: "john.doe@example.com",
};
```

- Trong vÃ­ dá»¥ nÃ y, chÃºng ta Ä‘Ã£ sá»­ dá»¥ng interface User Ä‘á»ƒ khai bÃ¡o kiá»ƒu cho biáº¿n user. Biáº¿n nÃ y pháº£i cÃ³ cáº¥u trÃºc giá»‘ng nhÆ° Ä‘á»‘i tÆ°á»£ng User, bao gá»“m cÃ¡c thuá»™c tÃ­nh id, name vÃ  email.

- Interface cÃ²n cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a kiá»ƒu cho tham sá»‘ vÃ  giÃ¡ trá»‹ tráº£ vá» cá»§a cÃ¡c hÃ m. VÃ­ dá»¥, náº¿u báº¡n muá»‘n khai bÃ¡o má»™t hÃ m cÃ³ tham sá»‘ lÃ  má»™t Ä‘á»‘i tÆ°á»£ng User vÃ  tráº£ vá» má»™t chuá»—i, báº¡n cÃ³ thá»ƒ lÃ m nhÆ° sau:

```jsx
function getUserInfo(user: User): string {
  return `User ${user.name} has email ${user.email}`;
}
```

- Trong vÃ­ dá»¥ nÃ y, chÃºng ta Ä‘Ã£ sá»­ dá»¥ng interface User Ä‘á»ƒ khai bÃ¡o kiá»ƒu cho tham sá»‘ user cá»§a hÃ m getUserInfo. Äiá»u nÃ y Ä‘áº£m báº£o ráº±ng chá»‰ cÃ³ cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ cáº¥u trÃºc giá»‘ng nhÆ° User má»›i cÃ³ thá»ƒ Ä‘Æ°á»£c truyá»n vÃ o hÃ m nÃ y. NgoÃ i ra, chÃºng ta cÅ©ng Ä‘Ã£ khai bÃ¡o kiá»ƒu tráº£ vá» cá»§a hÃ m lÃ  string.

**_- ğŸ¯ NhÆ° váº­y, interface lÃ  má»™t tÃ­nh nÄƒng ráº¥t há»¯u Ã­ch trong TypeScript Ä‘á»ƒ giÃºp xÃ¡c Ä‘á»‹nh kiá»ƒu cho cÃ¡c Ä‘á»‘i tÆ°á»£ng vÃ  cÃ¡c hÃ m trong á»©ng dá»¥ng cá»§a báº¡n. NÃ³ giÃºp tÄƒng tÃ­nh rÃµ rÃ ng vÃ  Ä‘Ã¡ng tin cáº­y cá»§a mÃ£ cá»§a báº¡n, vÃ  giÃºp trÃ¡nh cÃ¡c lá»—i kiá»ƒu dá»¯ liá»‡u phá»• biáº¿n trong cÃ¡c á»©ng dá»¥ng JavaScript._**

## Ná»™i dung nÃ y khÃ´ng liÃªn quan Ä‘áº¿n bÃ i há»c, nhÆ°ng tÃ´i bá»• sung vÃ o Ä‘á»ƒ hiá»ƒu hÆ¡n vá» TypeScript:

- Trong TypeScript, cÃ¡c interfaces Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ mÃ´ táº£ cÃ¡c kiá»ƒu Ä‘á»‘i tÆ°á»£ng. Tuy nhiÃªn, náº¿u báº¡n Ä‘ang lÃ m viá»‡c vá»›i má»™t sá»‘ Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n giáº£n, khÃ´ng cáº§n thiáº¿t pháº£i táº¡o má»™t interface má»›i cho má»—i Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Thay vÃ o Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng má»™t cÃ¡ch tiáº¿p cáº­n khÃ¡c gá»i lÃ  "type inference" Ä‘á»ƒ TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.

- VÃ­ dá»¥, giáº£ sá»­ báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n giáº£n nhÆ° sau:

```jsx
const user = {
  name: "John",
  age: 30,
  isActive: true,
};
```

- Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng type inference Ä‘á»ƒ TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng user nhÆ° sau:

```jsx
const user = {
  name: "John",
  age: 30,
  isActive: true,
};

type User = typeof user;
```

- Trong Ä‘oáº¡n mÃ£ nÃ y, chÃºng ta sá»­ dá»¥ng tá»« khÃ³a typeof Ä‘á»ƒ láº¥y kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng user. Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng type alias User Ä‘á»ƒ Ä‘áº·t tÃªn cho kiá»ƒu dá»¯ liá»‡u nÃ y.

- **_Vá»›i cÃ¡ch tiáº¿p cáº­n nÃ y, chÃºng ta khÃ´ng cáº§n pháº£i khai bÃ¡o má»™t interface má»›i cho má»—i Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n giáº£n nhÆ° trÃªn, mÃ  TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u dá»±a trÃªn giÃ¡ trá»‹ cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Tuy nhiÃªn, Ä‘á»‘i vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p hÆ¡n, viá»‡c sá»­ dá»¥ng interfaces sáº½ giÃºp cho code cá»§a báº¡n trá»Ÿ nÃªn rÃµ rÃ ng vÃ  dá»… báº£o trÃ¬ hÆ¡n._**

### Type Inference Ä‘Æ°á»£c gá»i lÃ  gÃ¬ ?

**1. KhÃ¡i niá»‡m:**

- Type inference lÃ  quÃ¡ trÃ¬nh TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a biáº¿n hoáº·c hÃ m dá»±a trÃªn cÃ¡ch mÃ  chÃºng Ä‘Æ°á»£c khai bÃ¡o vÃ  sá»­ dá»¥ng trong mÃ£ nguá»“n. TypeScript sá»­ dá»¥ng cÃ¡c ká»¹ thuáº­t phÃ¢n tÃ­ch tÄ©nh Ä‘á»ƒ phÃ¢n tÃ­ch mÃ£ nguá»“n vÃ  suy ra kiá»ƒu dá»¯ liá»‡u má»™t cÃ¡ch tá»± Ä‘á»™ng, giÃºp cho viá»‡c viáº¿t mÃ£ chÃ­nh xÃ¡c hÆ¡n vÃ  giáº£m thiá»ƒu sá»‘ lÆ°á»£ng lá»—i. Viá»‡c sá»­ dá»¥ng type inference cÅ©ng giÃºp cho mÃ£ nguá»“n trá»Ÿ nÃªn dá»… Ä‘á»c vÃ  dá»… báº£o trÃ¬ hÆ¡n.

**2. Cho tÃ´i vÃ­ dá»¥ tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao cá»§a Type Inference ?**

- DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥ tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao cá»§a type inference trong TypeScript:

_a. VÃ­ dá»¥ cÆ¡ báº£n: Type inference trong khai bÃ¡o biáº¿n:_

- Khi báº¡n khai bÃ¡o má»™t biáº¿n mÃ  khÃ´ng xÃ¡c Ä‘á»‹nh kiá»ƒu dá»¯ liá»‡u, TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a biáº¿n Ä‘Ã³ dá»±a trÃªn giÃ¡ trá»‹ Ä‘Æ°á»£c gÃ¡n cho biáº¿n Ä‘Ã³.

```jsx
let name = "John"; // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u lÃ  string
let age = 30; // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u lÃ  number
```

_b. VÃ­ dá»¥ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c vÃ  thuá»™c tÃ­nh trong object:_

- Khi báº¡n sá»­ dá»¥ng phÆ°Æ¡ng thá»©c hoáº·c thuá»™c tÃ­nh trong object, TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ dá»±a trÃªn cÃ¡c phÆ°Æ¡ng thá»©c vÃ  thuá»™c tÃ­nh cÃ³ sáºµn.

```jsx
const person = {
  name: "John",
  age: 30,
  greet() {
    console.log(
      `Hello, my name is ${this.name} and I am ${this.age} years old.`
    );
  },
};

person.greet(); // Hello, my name is John and I am 30 years old.

// TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng person lÃ 
// { name: string, age: number, greet: () => void }
```

_c.VÃ­ dá»¥ sá»­ dá»¥ng generics:_

- Khi sá»­ dá»¥ng generics, TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u dá»±a trÃªn kiá»ƒu dá»¯ liá»‡u Ä‘Æ°á»£c truyá»n vÃ o

```jsx
function reverse<T>(items: T[]): T[] {
  return items.reverse();
}

const numbers = [1, 2, 3, 4, 5];
const reversedNumbers = reverse(numbers); // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u lÃ  number[]

const strings = ["apple", "banana", "orange"];
const reversedStrings = reverse(strings); // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u lÃ  string[]
```

_d.VÃ­ dá»¥ sá»­ dá»¥ng hÃ m callback:_

- Khi sá»­ dá»¥ng hÃ m callback, TypeScript sáº½ tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u dá»±a trÃªn tham sá»‘ Ä‘Æ°á»£c truyá»n vÃ o.

```jsx
function add(a: number, b: number, callback: (result: number) => void) {
  const result = a + b;
  callback(result);
}

add(2, 3, (result) => {
  console.log(result); // TypeScript tá»± Ä‘á»™ng suy ra kiá»ƒu dá»¯ liá»‡u cá»§a result lÃ  number
});
```

**_ğŸ¯[ğŸ‘†ğŸ‘† TrÃªn Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥ tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao cá»§a type inference trong TypeScript.]_**

**3. HÃ£y cho tÃ´i biáº¿t Union Type lÃ  gÃ¬ ?**

- Trong TypeScript, union type lÃ  má»™t kiá»ƒu dá»¯ liá»‡u cho phÃ©p biáº¿n hoáº·c tham sá»‘ cÃ³ thá»ƒ cÃ³ nhiá»u kiá»ƒu dá»¯ liá»‡u khÃ¡c nhau. Khi sá»­ dá»¥ng union type, biáº¿n hoáº·c tham sá»‘ cÃ³ thá»ƒ chá»©a giÃ¡ trá»‹ cá»§a báº¥t ká»³ kiá»ƒu dá»¯ liá»‡u nÃ o trong union type Ä‘Ã³.

- CÃº phÃ¡p cá»§a union type Ä‘Æ°á»£c thá»ƒ hiá»‡n báº±ng kÃ½ tá»± "|" giá»¯a cÃ¡c kiá»ƒu dá»¯ liá»‡u. VÃ­ dá»¥: `string | number` Ä‘áº¡i diá»‡n cho má»™t union type cho phÃ©p biáº¿n hoáº·c tham sá»‘ cÃ³ thá»ƒ lÃ  má»™t chuá»—i hoáº·c má»™t sá»‘.

**_VÃ­ dá»¥ tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao:_**

**_a. VÃ­ dá»¥ cÆ¡ báº£n 1:_**

```jsx
function printId(id: string | number) {
  console.log(`ID is: ${id}`);
}

printId("abc123"); // ID is: abc123
printId(123); // ID is: 123
```

- Trong vÃ­ dá»¥ trÃªn, hÃ m `printId` cÃ³ tham sá»‘ `id` lÃ  union type `string | number`. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  tham sá»‘ `id` cÃ³ thá»ƒ lÃ  má»™t chuá»—i hoáº·c má»™t sá»‘. Khi hÃ m Ä‘Æ°á»£c gá»i, giÃ¡ trá»‹ cá»§a tham sá»‘ sáº½ Ä‘Æ°á»£c in ra mÃ n hÃ¬nh.

**_b. VÃ­ dá»¥ cÆ¡ báº£n 2:_**

- Union type trong TypeScript cho phÃ©p chÃºng ta Ä‘á»‹nh nghÄ©a má»™t biáº¿n hoáº·c tham sá»‘ cÃ³ thá»ƒ cÃ³ giÃ¡ trá»‹ cá»§a má»™t hoáº·c nhiá»u loáº¡i khÃ¡c nhau.

```jsx
function printID(id: number | string) {
  console.log(`ID: ${id}`);
}

printID(100); // ID: 100
printID("abc"); // ID: abc
```

- á» vÃ­ dá»¥ nÃ y, chÃºng ta Ä‘á»‹nh nghÄ©a tham sá»‘ id cÃ³ thá»ƒ lÃ  kiá»ƒu `number` hoáº·c `string`. Khi cháº¡y hÃ m printID, chÃºng ta cÃ³ thá»ƒ truyá»n vÃ o má»™t giÃ¡ trá»‹ kiá»ƒu `number` hoáº·c `string`.

**_c. VÃ­ dá»¥ nÃ¢ng cao:_**

```jsx
interface Circle {
  kind: "circle";
  radius: number;
}

interface Square {
  kind: "square";
  sideLength: number;
}

type Shape = Circle | Square;

function getArea(shape: Shape): number {
  switch (shape.kind) {
    case "circle":
      return Math.PI * shape.radius ** 2;
    case "square":
      return shape.sideLength ** 2;
  }
}

const myCircle: Circle = { kind: "circle", radius: 5 };
const mySquare: Square = { kind: "square", sideLength: 10 };

console.log(getArea(myCircle)); // 78.53981633974483
console.log(getArea(mySquare)); // 100
```

**ğŸš€ğŸš€LÆ°u Ã½:ğŸš€ğŸš€**

```jsx
function getArea(shape: Shape): number {
```

- `DÃ²ng nÃ y cÃ³ nghÄ©a lÃ :`DÃ²ng nÃ y khai bÃ¡o má»™t function cÃ³ tÃªn lÃ  `getArea`, nháº­n má»™t tham sá»‘ lÃ  `shape` cÃ³ kiá»ƒu dá»¯ liá»‡u lÃ  `Shape`, vÃ  tráº£ vá» má»™t giÃ¡ trá»‹ cÃ³ kiá»ƒu lÃ  `number`. Cá»¥ thá»ƒ, khi gá»i hÃ m `getArea`, ta truyá»n vÃ o má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ kiá»ƒu dá»¯ liá»‡u lÃ  `Shape`, vÃ  hÃ m sáº½ tÃ­nh toÃ¡n diá»‡n tÃ­ch cá»§a hÃ¬nh Ä‘Ã³ vÃ  tráº£ vá» giÃ¡ trá»‹ kiá»ƒu `number`.

- á» vÃ­ dá»¥ nÃ y, chÃºng ta Ä‘á»‹nh nghÄ©a hai `interface Circle vÃ  Square` Ä‘á»ƒ mÃ´ táº£ hÃ¬nh trÃ²n vÃ  hÃ¬nh vuÃ´ng. Sau Ä‘Ã³, chÃºng ta Ä‘á»‹nh nghÄ©a má»™t `union type` `Shape` báº±ng cÃ¡ch káº¿t há»£p hai interface trÃªn. Trong hÃ m `getArea`, chÃºng ta sá»­ dá»¥ng switch Ä‘á»ƒ kiá»ƒm tra xem `shape` lÃ  hÃ¬nh trÃ²n hay hÃ¬nh vuÃ´ng, vÃ  tÃ­nh diá»‡n tÃ­ch tÆ°Æ¡ng á»©ng. Khi cháº¡y hÃ m `getArea`, chÃºng ta cÃ³ thá»ƒ truyá»n vÃ o má»™t giÃ¡ trá»‹ kiá»ƒu `Circle` hoáº·c `Square`, nhÆ° myCircle hoáº·c mySquare.
