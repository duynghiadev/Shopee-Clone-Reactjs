## HÃ£y nÃªu khÃ¡i niá»‡m vá» useContext chi tiáº¿t vÃ  dá»… hiá»ƒu nháº¥t ?

- `useContext` lÃ  má»™t hook trong React, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truyá»n dá»¯ liá»‡u tá»« má»™t `component cha` Ä‘áº¿n má»™t hoáº·c nhiá»u `component con` bÃªn trong cÃ¢y `component` cá»§a nÃ³, mÃ  khÃ´ng cáº§n pháº£i truyá»n `props` qua nhiá»u táº§ng `component` trung gian.

- Khi sá»­ dá»¥ng `useContext`, ta táº¡o ra má»™t `Context object`, lÆ°u trá»¯ cÃ¡c giÃ¡ trá»‹ mÃ  muá»‘n chia sáº» giá»¯a cÃ¡c `component`. Sau Ä‘Ã³, trong cÃ¡c `component` cáº§n sá»­ dá»¥ng giÃ¡ trá»‹ Ä‘Ã³, ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ Ä‘Ã³ tá»« `Context object`.

- CÃ¡ch sá»­ dá»¥ng `useContext` nhÆ° sau:

**1. Táº¡o má»™t `Context object`:**

```jsx
const MyContext = React.createContext(defaultValue);
```

**2. Äáº·t giÃ¡ trá»‹ vÃ o trong `Context object`:**

```jsx
<MyContext.Provider value={value}>...</MyContext.Provider>
```

**3. Sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ tá»« `Context object`:**

```jsx
const value = useContext(MyContext);
```

- Khi giÃ¡ trá»‹ cá»§a `Context object` thay Ä‘á»•i, React sáº½ tá»± Ä‘á»™ng `render` láº¡i cÃ¡c component con sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ tá»« `Context object`.

- Vá»›i cÃ¡ch sá»­ dá»¥ng nÃ y, ta cÃ³ thá»ƒ dá»… dÃ ng truyá»n dá»¯ liá»‡u giá»¯a cÃ¡c component trong cÃ¢y component cá»§a mÃ¬nh mÃ  khÃ´ng cáº§n pháº£i truyá»n `props` qua nhiá»u táº§ng component trung gian, giÃºp cho viá»‡c quáº£n lÃ½ `state` vÃ  xá»­ lÃ½ dá»¯ liá»‡u trá»Ÿ nÃªn dá»… dÃ ng vÃ  hiá»‡u quáº£ hÆ¡n.

## useContext thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m chá»©c nÄƒng gÃ¬ trong Reactjs ?

- `useContext` thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng trong React Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» truyá»n dá»¯ liá»‡u qua nhiá»u component con trong á»©ng dá»¥ng. Thay vÃ¬ truyá»n `props` tá»« component cha Ä‘áº¿n component con, ta cÃ³ thá»ƒ sá»­ dá»¥ng `Context` Ä‘á»ƒ cung cáº¥p dá»¯ liá»‡u cho táº¥t cáº£ cÃ¡c component trong má»™t tree component mÃ  khÃ´ng cáº§n pháº£i truyá»n `props` qua nhiá»u cáº¥p.

- `VÃ­ dá»¥`, khi xÃ¢y dá»±ng má»™t á»©ng dá»¥ng e-commerce, thÃ´ng tin vá» giá» hÃ ng cá»§a ngÆ°á»i dÃ¹ng sáº½ cáº§n Ä‘Æ°á»£c truyá»n tá»« component cha (vÃ­ dá»¥ nhÆ° trang sáº£n pháº©m) Ä‘áº¿n cÃ¡c component con nhÆ° header, sidebar, footer. Sá»­ dá»¥ng `Context`, ta cÃ³ thá»ƒ táº¡o má»™t `Context` riÃªng Ä‘á»ƒ lÆ°u trá»¯ thÃ´ng tin vá» giá» hÃ ng vÃ  cung cáº¥p cho táº¥t cáº£ cÃ¡c component trong á»©ng dá»¥ng mÃ  khÃ´ng cáº§n pháº£i truyá»n `props` qua nhiá»u cáº¥p.

- Vá»›i `useContext`, ta cÃ³ thá»ƒ láº¥y dá»¯ liá»‡u Ä‘Æ°á»£c cung cáº¥p tá»« `Context` báº¥t cá»© khi nÃ o vÃ  á»Ÿ báº¥t ká»³ component nÃ o trong tree component cá»§a á»©ng dá»¥ng.

## Nhá»¯ng cÃ¡ch dÃ¹ng useContext thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng vÃ  hiá»‡u quáº£ nháº¥t ?

- CÃ¡ch sá»­ dá»¥ng `useContext` thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng vÃ  hiá»‡u quáº£ nháº¥t trong React lÃ  Ä‘á»ƒ truyá»n dá»¯ liá»‡u vÃ  chá»©c nÄƒng tá»« component cha Ä‘áº¿n cÃ¡c component con má»™t cÃ¡ch dá»… dÃ ng vÃ  trá»±c tiáº¿p.

- Äá»ƒ sá»­ dá»¥ng `useContext`, ta cáº§n cÃ³ má»™t `context` Ä‘Ã£ Ä‘Æ°á»£c khai bÃ¡o trÆ°á»›c Ä‘Ã³ báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `createContext()` cá»§a React.

- `VÃ­ dá»¥`, chÃºng ta muá»‘n táº¡o má»™t `context` Ä‘á»ƒ lÆ°u trá»¯ thÃ´ng tin ngÃ´n ngá»¯ hiá»‡n táº¡i cá»§a á»©ng dá»¥ng, ta cÃ³ thá»ƒ khai bÃ¡o nhÆ° sau:

```jsx
// Khai bÃ¡o context
const LanguageContext = React.createContext();

// Provider - Cung cáº¥p dá»¯ liá»‡u
function LanguageProvider(props) {
  const [language, setLanguage] = useState("en");

  return (
    <LanguageContext.Provider value={{ language, setLanguage }}>
      {props.children}
    </LanguageContext.Provider>
  );
}

// Component con sá»­ dá»¥ng useContext Ä‘á»ƒ láº¥y dá»¯ liá»‡u tá»« context
function MyComponent() {
  const { language, setLanguage } = useContext(LanguageContext);

  return (
    <div>
      <p>Current language: {language}</p>
      <button onClick={() => setLanguage("vn")}>Change language to VN</button>
    </div>
  );
}
```

- Trong Ä‘oáº¡n code trÃªn, ta Ä‘Ã£ táº¡o ra má»™t `context` lÃ  `LanguageContext` vÃ  má»™t component con lÃ  `MyComponent`. Trong `LanguageProvider`, ta Ä‘Ã£ sá»­ dá»¥ng `LanguageContext`.`Provider` Ä‘á»ƒ cung cáº¥p dá»¯ liá»‡u (gá»“m `language` vÃ  `setLanguage`) cho cÃ¡c component con. Trong `MyComponent`, ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y dá»¯ liá»‡u tá»« `LanguageContext` vÃ  hiá»ƒn thá»‹ thÃ´ng tin ngÃ´n ngá»¯ hiá»‡n táº¡i cÃ¹ng vá»›i má»™t nÃºt báº¥m Ä‘á»ƒ thay Ä‘á»•i ngÃ´n ngá»¯.

- Viá»‡c sá»­ dá»¥ng `useContext` giÃºp cho viá»‡c truyá»n dá»¯ liá»‡u vÃ  chá»©c nÄƒng giá»¯a cÃ¡c component trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n mÃ  khÃ´ng cáº§n pháº£i sá»­ dá»¥ng cÃ¡c `prop` truyá»n xuá»‘ng tá»« component cha. NÃ³ cÅ©ng giÃºp cho viá»‡c quáº£n lÃ½ `state` vÃ  `logic` á»©ng dá»¥ng trá»Ÿ nÃªn thuáº­n tiá»‡n hÆ¡n.

## `Value` cÃ³ pháº£i lÃ  `props` máº·c Ä‘á»‹nh cá»§a `useContext` hay khÃ´ng ? Giáº£i thÃ­ch lÃ½ do vÃ¬ sao ?

- `KhÃ´ng`, `value` khÃ´ng pháº£i lÃ  `props` máº·c Ä‘á»‹nh cá»§a `useContext`.

- Trong React, khi sá»­ dá»¥ng `useContext`, ta cáº§n truyá»n vÃ o má»™t giÃ¡ trá»‹ lÃ  `Context object`, Ä‘Æ°á»£c táº¡o ra tá»« hÃ m `React.createContext()`. VÃ  giÃ¡ trá»‹ cá»§a `Context object` nÃ y Ä‘Æ°á»£c truyá»n vÃ o thÃ´ng qua `Provider component`.

- `value` lÃ  thuá»™c tÃ­nh cá»§a `Provider component`, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truyá»n dá»¯ liá»‡u xuá»‘ng cho cÃ¡c component con. Náº¿u khÃ´ng khai bÃ¡o giÃ¡ trá»‹ cho thuá»™c tÃ­nh `value` thÃ¬ giÃ¡ trá»‹ máº·c Ä‘á»‹nh sáº½ lÃ  `undefined`.

- VÃ­ dá»¥:

```jsx
// Táº¡o Context object
const ThemeContext = React.createContext("light");

function App() {
  return (
    // Sá»­ dá»¥ng Provider Ä‘á»ƒ truyá»n giÃ¡ trá»‹ xuá»‘ng component con
    <ThemeContext.Provider value="dark">
      <Navbar />
    </ThemeContext.Provider>
  );
}

function Navbar() {
  // Sá»­ dá»¥ng useContext Ä‘á»ƒ láº¥y giÃ¡ trá»‹ Ä‘Ã£ Ä‘Æ°á»£c truyá»n xuá»‘ng tá»« Provider
  const theme = useContext(ThemeContext);

  return (
    <div>
      <p>Theme: {theme}</p>
    </div>
  );
}
```

- Trong vÃ­ dá»¥ trÃªn, giÃ¡ trá»‹ `"dark"` Ä‘Æ°á»£c truyá»n vÃ o qua thuá»™c tÃ­nh `value` cá»§a `Provider component`. Sau Ä‘Ã³, trong component `Navbar`, ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ `theme`. GiÃ¡ trá»‹ nÃ y chÃ­nh lÃ  giÃ¡ trá»‹ Ä‘Æ°á»£c truyá»n xuá»‘ng tá»« `Provider`.

- Khi sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ tá»« `ThemeContext` trong component `Navbar`, giÃ¡ trá»‹ Ä‘Æ°á»£c tráº£ vá» lÃ  `"dark"`, vÃ¬ trong `App`, `ThemeContext.Provider` Ä‘Ã£ Ä‘Æ°á»£c khai bÃ¡o vá»›i value lÃ  `"dark"`. VÃ¬ váº­y, khi `Navbar` sá»­ dá»¥ng `useContext`, nÃ³ sáº½ nháº­n Ä‘Æ°á»£c giÃ¡ trá»‹ `"dark"` tá»« `ThemeContext`.

## `Value` lÃ  `props` máº·c Ä‘á»‹nh cá»§a `Provider` Ä‘Ãºng khÃ´ng ?

- `ÄÃºng`, value lÃ  má»™t prop máº·c Ä‘á»‹nh cá»§a Provider trong React. Prop nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truyá»n giÃ¡ trá»‹ cá»§a Context Ä‘áº¿n cÃ¡c component con náº±m trong Provider. Khi giÃ¡ trá»‹ cá»§a Context thay Ä‘á»•i, Provider sáº½ tá»± Ä‘á»™ng cáº­p nháº­t láº¡i giÃ¡ trá»‹ nÃ y cho cÃ¡c component con.

## Táº¡i sao khai bÃ¡o `context` á»Ÿ ngoÃ i hÃ m ?

- Khai bÃ¡o `Context` á»Ÿ ngoÃ i hÃ m lÃ  Ä‘á»ƒ cÃ³ thá»ƒ sá»­ dá»¥ng láº¡i `Context` Ä‘Ã³ á»Ÿ báº¥t ká»³ thÃ nh pháº§n nÃ o trong á»©ng dá»¥ng React, thay vÃ¬ pháº£i khai bÃ¡o láº¡i á»Ÿ má»—i thÃ nh pháº§n. Äiá»u nÃ y giÃºp cho viá»‡c quáº£n lÃ½ `state` cá»§a á»©ng dá»¥ng dá»… dÃ ng hÆ¡n, giáº£m sá»± trÃ¹ng láº·p code vÃ  cáº£i thiá»‡n kháº£ nÄƒng tÃ¡i sá»­ dá»¥ng cá»§a code.

- VÃ­ dá»¥, náº¿u ta cáº§n sá»­ dá»¥ng cÃ¹ng má»™t `Context` trong hai component khÃ¡c nhau, thÃ¬ ta cÃ³ thá»ƒ khai bÃ¡o `Context` á»Ÿ ngoÃ i cáº£ hai component vÃ  sá»­ dá»¥ng chung, thay vÃ¬ pháº£i khai bÃ¡o láº¡i á»Ÿ tá»«ng component. Viá»‡c nÃ y cÅ©ng giÃºp cho viá»‡c báº£o trÃ¬ vÃ  chá»‰nh sá»­a code dá»… dÃ ng hÆ¡n.

## VÃ­ dá»¥ cá»Ÿ báº£n vá» `useContext` vÃ  giáº£i thÃ­ch code chit tiáº¿t nháº¥t ?

**1. VÃ­ dá»¥ 1: Sá»­ dá»¥ng `useContext` Ä‘á»ƒ chia sáº» dá»¯ liá»‡u giá»¯a cÃ¡c component**

- Trong vÃ­ dá»¥ nÃ y, chÃºng ta sáº½ táº¡o ra má»™t `context` lÃ  `UserContext` Ä‘á»ƒ chia sáº» thÃ´ng tin cá»§a user giá»¯a cÃ¡c component. Äáº§u tiÃªn, ta sáº½ khai bÃ¡o `context` trong file `UserContext.jsx` nhÆ° sau:

```jsx
import React from "react";

const UserContext = React.createContext({});

export default UserContext;
```

- á» Ä‘Ã¢y, ta Ä‘Ã£ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c `createContext` cá»§a React Ä‘á»ƒ táº¡o ra má»™t `context` vá»›i giÃ¡ trá»‹ khá»Ÿi táº¡o lÃ  má»™t `object rá»—ng`.

- Tiáº¿p theo, ta sáº½ táº¡o ra má»™t component App trong file `App.jsx` Ä‘á»ƒ cung cáº¥p dá»¯ liá»‡u cho `context`:

```jsx
import React, { useState } from "react";
import UserContext from "./UserContext";
import UserProfile from "./UserProfile";

function App() {
  const [user, setUser] = useState({
    name: "John Doe",
    age: 30,
    email: "john.doe@example.com",
  });

  return (
    <UserContext.Provider value={user}>
      <div className="App">
        <h1>Welcome to my app</h1>
        <UserProfile />
      </div>
    </UserContext.Provider>
  );
}

export default App;
```

- á» Ä‘Ã¢y, ta Ä‘Ã£ sá»­ dá»¥ng component `UserContext.Provider` Ä‘á»ƒ cung cáº¥p giÃ¡ trá»‹ cho `context`. GiÃ¡ trá»‹ Ä‘Æ°á»£c cung cáº¥p lÃ  `user`, má»™t object chá»©a thÃ´ng tin cá»§a `user`. Component `UserProfile` sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin nÃ y.

- Trong file `UserProfile.jsx`, ta sáº½ sá»­ dá»¥ng hook `useContext` Ä‘á»ƒ láº¥y thÃ´ng tin `user` tá»« `context`:

```jsx
import React, { useContext } from "react";
import UserContext from "./UserContext";

function UserProfile() {
  const user = useContext(UserContext);

  return (
    <div>
      <h2>User Profile</h2>
      <p>Name: {user.name}</p>
      <p>Age: {user.age}</p>
      <p>Email: {user.email}</p>
    </div>
  );
}

export default UserProfile;
```

- á» Ä‘Ã¢y, ta Ä‘Ã£ sá»­ dá»¥ng hook `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ cá»§a `context UserContext` vÃ  lÆ°u vÃ o biáº¿n `user`. Sau Ä‘Ã³, ta sá»­ dá»¥ng thÃ´ng tin trong biáº¿n `user` Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin cá»§a `user`.

**2. VÃ­ dá»¥ 2: Sá»­ dá»¥ng `useContext` Ä‘á»ƒ chia sáº» dá»¯ liá»‡u giá»¯a cÃ¡c component**

- Trong vÃ­ dá»¥ nÃ y, chÃºng ta sáº½ táº¡o ra má»™t `Context` Ä‘Æ¡n giáº£n Ä‘á»ƒ lÆ°u trá»¯ ngÃ´n ngá»¯ hiá»‡n táº¡i cá»§a á»©ng dá»¥ng vÃ  sá»­ dá»¥ng `useContext` Ä‘á»ƒ truyá»n giÃ¡ trá»‹ ngÃ´n ngá»¯ nÃ y giá»¯a cÃ¡c component.

```jsx
// Táº¡o context vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  tiáº¿ng Anh
const LanguageContext = React.createContext("en");

function App() {
  // Sá»­ dá»¥ng useState Ä‘á»ƒ quáº£n lÃ½ giÃ¡ trá»‹ ngÃ´n ngá»¯ hiá»‡n táº¡i
  const [language, setLanguage] = useState("en");

  // HÃ m thay Ä‘á»•i ngÃ´n ngá»¯
  const handleChangeLanguage = (event) => {
    setLanguage(event.target.value);
  };

  return (
    <div>
      <label htmlFor="language">Select language:</label>
      <select id="language" onChange={handleChangeLanguage}>
        <option value="en">English</option>
        <option value="fr">French</option>
        <option value="es">Spanish</option>
      </select>
      {/* Äáº·t giÃ¡ trá»‹ ngÃ´n ngá»¯ vÃ o Context Ä‘á»ƒ truyá»n giÃ¡ trá»‹ nÃ y cho cÃ¡c component con */}
      <LanguageContext.Provider value={language}>
        <Header />
        <Content />
      </LanguageContext.Provider>
    </div>
  );
}

function Header() {
  // Sá»­ dá»¥ng useContext Ä‘á»ƒ láº¥y giÃ¡ trá»‹ ngÃ´n ngá»¯ tá»« Context
  const language = useContext(LanguageContext);

  return (
    <h1>
      {language === "en" ? "Hello" : language === "fr" ? "Bonjour" : "Hola"}
    </h1>
  );
}

function Content() {
  // Sá»­ dá»¥ng useContext Ä‘á»ƒ láº¥y giÃ¡ trá»‹ ngÃ´n ngá»¯ tá»« Context
  const language = useContext(LanguageContext);

  return (
    <p>
      {language === "en"
        ? "Welcome to my website!"
        : language === "fr"
        ? "Bienvenue sur mon site web!"
        : "Bienvenido a mi sitio web!"}
    </p>
  );
}
```

- Trong vÃ­ dá»¥ trÃªn, chÃºng ta táº¡o má»™t `context LanguageContext` vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  "en" (tiáº¿ng Anh). Trong component App, chÃºng ta sá»­ dá»¥ng `useState` Ä‘á»ƒ quáº£n lÃ½ giÃ¡ trá»‹ ngÃ´n ngá»¯ hiá»‡n táº¡i, vÃ  sá»­ dá»¥ng `handleChangeLanguage` Ä‘á»ƒ thay Ä‘á»•i giÃ¡ trá»‹ nÃ y khi ngÆ°á»i dÃ¹ng chá»n ngÃ´n ngá»¯ má»›i.

- Sau Ä‘Ã³, chÃºng ta Ä‘áº·t giÃ¡ trá»‹ ngÃ´n ngá»¯ hiá»‡n táº¡i vÃ o `context` báº±ng cÃ¡ch sá»­ dá»¥ng `<LanguageContext.Provider>` vÃ  truyá»n giÃ¡ trá»‹ nÃ y cho cÃ¡c component con (`Header` vÃ  `Content`).

- Trong cÃ¡c component con, chÃºng ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ ngÃ´n ngá»¯ tá»« `context` vÃ  hiá»ƒn thá»‹ ná»™i dung tÆ°Æ¡ng á»©ng vá»›i ngÃ´n ngá»¯ Ä‘Ã³.

**3. VÃ­ dá»¥ 3: Sá»­ dá»¥ng `Context` Ä‘á»ƒ quáº£n lÃ½ state vÃ  hÃ nh Ä‘á»™ng cá»§a á»©ng dá»¥ng.**

- Äáº§u tiÃªn, ta cáº§n táº¡o má»™t `Context` object báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `createContext()` cá»§a React:

```jsx
import React, { useState } from "react";

const AppContext = React.createContext();
```

- Sau Ä‘Ã³, ta cáº§n táº¡o má»™t `Provider component` Ä‘á»ƒ cung cáº¥p cÃ¡c giÃ¡ trá»‹ trong `Context` cho toÃ n bá»™ á»©ng dá»¥ng:

```jsx
function AppProvider({ children }) {
  const [count, setCount] = useState(0);

  const increment = () => setCount(count + 1);
  const decrement = () => setCount(count - 1);

  const value = { count, increment, decrement };

  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;
}
```

- á» Ä‘Ã¢y, ta Ä‘á»‹nh nghÄ©a má»™t sá»‘ `state` vÃ  hÃ nh Ä‘á»™ng cáº§n thiáº¿t cho á»©ng dá»¥ng (á»Ÿ Ä‘Ã¢y lÃ  biáº¿n `count` vÃ  cÃ¡c hÃ m `increment` vÃ  `decrement`), vÃ  Ä‘Ã³ng gÃ³i chÃºng vÃ o má»™t Ä‘á»‘i tÆ°á»£ng `value`. Äá»‘i tÆ°á»£ng nÃ y sáº½ Ä‘Æ°á»£c truyá»n vÃ o `Provider component` báº±ng thuá»™c tÃ­nh `value`.

- Sau Ä‘Ã³, ta cÃ³ thá»ƒ sá»­ dá»¥ng `Context` trong báº¥t ká»³ component nÃ o trong á»©ng dá»¥ng báº±ng cÃ¡ch sá»­ dá»¥ng hook `useContext`:

```jsx
import React, { useContext } from "react";
import AppContext from "./AppContext";

function Counter() {
  const { count, increment, decrement } = useContext(AppContext);

  return (
    <div>
      <h1>{count}</h1>
      <button onClick={increment}>+</button>
      <button onClick={decrement}>-</button>
    </div>
  );
}
```

- á» Ä‘Ã¢y, ta sá»­ dá»¥ng hook `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ cá»§a `Context` (á»Ÿ Ä‘Ã¢y lÃ  Ä‘á»‘i tÆ°á»£ng `value` ta Ä‘Ã£ Ä‘á»‹nh nghÄ©a trong `AppProvider`). Ta cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c biáº¿n vÃ  hÃ m Ä‘Ã£ Ä‘á»‹nh nghÄ©a trong Ä‘á»‘i tÆ°á»£ng `value` Ä‘á»ƒ thay Ä‘á»•i tráº¡ng thÃ¡i cá»§a `component`.

- VÃ­ dá»¥ nÃ y chá»‰ lÃ  má»™t á»©ng dá»¥ng cÆ¡ báº£n cá»§a `Context` trong React. Ta cÃ³ thá»ƒ sá»­ dá»¥ng `Context` Ä‘á»ƒ quáº£n lÃ½ nhiá»u tráº¡ng thÃ¡i vÃ  hÃ nh Ä‘á»™ng cá»§a á»©ng dá»¥ng má»™t cÃ¡ch hiá»‡u quáº£ hÆ¡n.

## useContext()

- `useContext` náº±m trong `Context API` cá»§a React, giÃºp chÃºng ta khÃ´ng cÃ²n cáº£nh truyá»n `prop` dÃ i loáº±n ngoáº±n tá»« Ã´ng -> cha -> con -> cháº¯t ná»¯a.

## CÃ¡ch dÃ¹ng Provider Ä‘á»ƒ bao bá»c component:

**- DÃ¹ng má»™t `Provider` bao bá»c component muá»‘n dÃ¹ng, chá»‰ cáº§n component náº±m trong `Provider` lÃ  dÃ¹ng Ä‘Æ°á»£c háº¿t!**

- ÄÃºng váº­y, khi sá»­ dá»¥ng `Context API`, chÃºng ta sáº½ táº¡o ra má»™t `Context Provider` bao bá»c toÃ n bá»™ cÃ¡c component cáº§n truy cáº­p Ä‘áº¿n dá»¯ liá»‡u Ä‘Ã³. Khi Ä‘Ã³, cÃ¡c component sáº½ cÃ³ thá»ƒ truy cáº­p Ä‘áº¿n dá»¯ liá»‡u Ä‘Ã³ thÃ´ng qua hook `useContext`.

- VÃ­ dá»¥, chÃºng ta cÃ³ má»™t á»©ng dá»¥ng TodoList, chÃºng ta sáº½ lÆ°u danh sÃ¡ch cÃ¡c cÃ´ng viá»‡c cáº§n lÃ m trong `state` cá»§a component App, vÃ  muá»‘n chia sáº» `state` nÃ y cho cÃ¡c component con cá»§a App.

```jsx
import React, { useState } from "react";
import TodoList from "./TodoList";

// Táº¡o context báº±ng createContext

const TodoContext = React.createContext();

function App() {
  const [todos, setTodos] = useState([]);

  const addTodo = (newTodo) => {
    setTodos([...todos, newTodo]);
  };

  return (
    <TodoContext.Provider value={{ todos, addTodo }}>
      <div className="App">
        <TodoList />
      </div>
    </TodoContext.Provider>
  );
}

export default App;
```

- á» Ä‘Ã¢y, chÃºng ta táº¡o ra má»™t `TodoContext.Provider` Ä‘á»ƒ chá»©a toÃ n bá»™ dá»¯ liá»‡u liÃªn quan Ä‘áº¿n danh sÃ¡ch cÃ¡c cÃ´ng viá»‡c cáº§n lÃ m, bao gá»“m `danh sÃ¡ch cÃ¡c cÃ´ng viá»‡c` vÃ  hÃ m `addTodo` Ä‘á»ƒ thÃªm cÃ´ng viá»‡c má»›i. Sau Ä‘Ã³, chÃºng ta truyá»n toÃ n bá»™ dá»¯ liá»‡u nÃ y thÃ´ng qua giÃ¡ trá»‹ cá»§a `value prop`.

- á» component con TodoList, chÃºng ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y dá»¯ liá»‡u tá»« `TodoContext` vÃ  hiá»ƒn thá»‹ `danh sÃ¡ch cÃ¡c cÃ´ng viá»‡c`:

```jsx
import React, { useContext } from "react";
import { TodoContext } from "./TodoContext";

function TodoList() {
  const { todos, addTodo } = useContext(TodoContext);

  const handleSubmit = (e) => {
    e.preventDefault();
    const newTodo = e.target.todo.value;
    addTodo(newTodo);
    e.target.reset();
  };

  return (
    <div>
      <h1>Todo List</h1>
      <ul>
        {todos.map((todo, index) => (
          <li key={index}>{todo}</li>
        ))}
      </ul>
      <form onSubmit={handleSubmit}>
        <input type="text" name="todo" placeholder="Add todo..." />
        <button type="submit">Add</button>
      </form>
    </div>
  );
}

export default TodoList;
```

- á» Ä‘Ã¢y, chÃºng ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y dá»¯ liá»‡u tá»« `TodoContext`. Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng `todos` Ä‘á»ƒ hiá»ƒn thá»‹ danh sÃ¡ch cÃ¡c cÃ´ng viá»‡c trong má»™t tháº» ul, vÃ  sá»­ dá»¥ng `addTodo` Ä‘á»ƒ thÃªm cÃ´ng viá»‡c má»›i khi ngÆ°á»i dÃ¹ng nháº­p vÃ o form.

## VÃ­ dá»¥ cÆ¡ báº£n:

**1. Táº¡o `context` báº±ng `createContext`**

```jsx
const ThemeContext = createContext(null);

export default function MyApp() {
  return (
    <ThemeContext.Provider value="dark">
      <Form />
    </ThemeContext.Provider>
  );
}
```

- `Provider` nháº­n vÃ o má»™t prop lÃ  `value`, vÃ¬ tháº¿ Form component cÃ³ thá»ƒ nháº­n value nÃ y thÃ´ng qua `context`

**2. Nháº­n `context` báº±ng `useContext()`:**

```jsx
import { createContext, useContext } from "react";

const ThemeContext = createContext(null);

export default function MyApp() {
  return (
    <ThemeContext.Provider value="dark">
      <Form />
    </ThemeContext.Provider>
  );
}

function Form() {
  return (
    <Panel title="Welcome">
      <Button>Sign up</Button>
      <Button>Log in</Button>
    </Panel>
  );
}

function Panel({ title, children }) {
  const theme = useContext(ThemeContext);
  const className = "panel-" + theme;
  return (
    <section className={className}>
      <h1>{title}</h1>
      {children}
    </section>
  );
}

function Button({ children }) {
  const theme = useContext(ThemeContext);
  const className = "button-" + theme;
  return <button className={className}>{children}</button>;
}
```

## Nhá»¯ng lÆ°u Ã½ cÆ¡ báº£n pháº£i nhá»› khi dÃ¹ng useContext:

- Khi sá»­ dá»¥ng `useContext`, cáº§n lÆ°u Ã½ má»™t sá»‘ Ä‘iá»ƒm sau:

```md
1. `useContext` chá»‰ hoáº¡t Ä‘á»™ng vá»›i cÃ¡c `Context` Ä‘Æ°á»£c táº¡o báº±ng phÆ°Æ¡ng thá»©c `React.createContext`.
2. Khi sá»­ dá»¥ng `useContext`, nÃªn Ä‘áº·t `Context Provider` bÃªn ngoÃ i cÃ¡c `Component` muá»‘n sá»­ dá»¥ng `Context`.
3. CÃ¡c giÃ¡ trá»‹ cá»§a `Context` Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  cáº­p nháº­t trong `Provider`, vÃ  chá»‰ Ä‘Æ°á»£c truyá»n xuá»‘ng cÃ¡c `Component` con Ä‘Æ°á»£c bao bá»c bá»Ÿi `Provider` Ä‘Ã³.
4. Khi giÃ¡ trá»‹ cá»§a `Context` thay Ä‘á»•i, táº¥t cáº£ cÃ¡c `Component` con sá»­ dá»¥ng `Context` Ä‘Ã³ sáº½ Ä‘Æ°á»£c cáº­p nháº­t tá»± Ä‘á»™ng.
5. Náº¿u khÃ´ng cÃ³ `Provider` nÃ o bao bá»c má»™t `Component` sá»­ dá»¥ng `Context`, giÃ¡ trá»‹ máº·c Ä‘á»‹nh Ä‘Æ°á»£c tráº£ vá».
```

**- VÃ­ dá»¥ cÆ¡ báº£n, chi tiáº¿t, dá»… hiá»ƒu:**

```jsx
// Táº¡o Context object
const ThemeContext = React.createContext("light");

function App() {
  return (
    // Sá»­ dá»¥ng Provider Ä‘á»ƒ truyá»n giÃ¡ trá»‹ xuá»‘ng component con
    <ThemeContext.Provider value="dark">
      <Navbar />
    </ThemeContext.Provider>
  );
}

function Navbar() {
  // Sá»­ dá»¥ng useContext Ä‘á»ƒ láº¥y giÃ¡ trá»‹ Ä‘Ã£ Ä‘Æ°á»£c truyá»n xuá»‘ng tá»« Provider
  const theme = useContext(ThemeContext);

  return (
    <div>
      <p>Theme: {theme}</p>
    </div>
  );
}
```

- Trong vÃ­ dá»¥ nÃ y, Provider cá»§a `ThemeContext` Ä‘Æ°á»£c Ä‘áº·t bÃªn ngoÃ i Component `Navbar`. GiÃ¡ trá»‹ dark Ä‘Æ°á»£c truyá»n xuá»‘ng Component `Navbar` báº±ng cÃ¡ch sá»­ dá»¥ng `useContext`, vÃ  sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ ra mÃ n hÃ¬nh.

**- ğŸ‘‰Trong 5 lÆ°u Ã½ Ä‘Æ°á»£c nÃªu á»Ÿ trÃªn, cÃ³ Ã½ sá»‘ 2 nÃ y khÃ³ hiá»ƒu nÃ¨, cá»‘ gáº¯ng Ä‘á»c Ä‘i Ä‘á»c láº¡i vÃ  xem vÃ­ dá»¥ Ä‘á»ƒ hiá»ƒu nhÃ© !!**

```md
2. Khi sá»­ dá»¥ng useContext, nÃªn Ä‘áº·t Context Provider bÃªn ngoÃ i cÃ¡c Component muá»‘n sá»­ dá»¥ng Context.
```

**- Giáº£i thÃ­ch:**

- Khi sá»­ dá»¥ng `useContext`, ta nÃªn Ä‘áº·t `Context Provider` bÃªn ngoÃ i cÃ¡c `Component` muá»‘n sá»­ dá»¥ng `Context` Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng `Provider` Ä‘Ã£ cung cáº¥p giÃ¡ trá»‹ cho `Context` trÆ°á»›c khi `Component` sá»­ dá»¥ng nÃ³. Náº¿u khÃ´ng Ä‘áº·t `Provider` bÃªn ngoÃ i `Component`, `Context` sáº½ khÃ´ng cÃ³ giÃ¡ trá»‹ Ä‘á»ƒ sá»­ dá»¥ng, dáº«n Ä‘áº¿n lá»—i.

- VÃ­ dá»¥, ta cÃ³ má»™t `Context Provider` lÃ  `ThemeContextProvider` bao bá»c toÃ n bá»™ á»©ng dá»¥ng vÃ  má»™t `Component` lÃ  `Navbar` muá»‘n sá»­ dá»¥ng giÃ¡ trá»‹ cá»§a `ThemeContext`. Náº¿u Ä‘áº·t `Navbar` trá»±c tiáº¿p trong App `Component` mÃ  khÃ´ng Ä‘áº·t nÃ³ trong `ThemeContextProvider`, thÃ¬ `Navbar` sáº½ khÃ´ng nháº­n Ä‘Æ°á»£c giÃ¡ trá»‹ cá»§a `ThemeContext`.

**- Code vÃ­ dá»¥:**

```jsx
// Táº¡o Context object
const ThemeContext = React.createContext("light");

// Táº¡o Component sá»­ dá»¥ng Context
function Navbar() {
  // Sá»­ dá»¥ng useContext Ä‘á»ƒ láº¥y giÃ¡ trá»‹ Ä‘Ã£ Ä‘Æ°á»£c truyá»n xuá»‘ng tá»« Provider
  const theme = useContext(ThemeContext);

  return (
    <div>
      <p>Theme: {theme}</p>
    </div>
  );
}

// Táº¡o Context Provider bao bá»c toÃ n bá»™ á»©ng dá»¥ng
function ThemeContextProvider({ children }) {
  return <ThemeContext.Provider value="dark">{children}</ThemeContext.Provider>;
}

// Component App sá»­ dá»¥ng Context Provider vÃ  Component Navbar
function App() {
  return (
    <ThemeContextProvider>
      <Navbar />
    </ThemeContextProvider>
  );
}
```

- á» Ä‘oáº¡n code trÃªn, `Navbar` Component sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ cá»§a `ThemeContext` Ä‘Ã£ Ä‘Æ°á»£c truyá»n xuá»‘ng tá»« `ThemeContext.Provider`. Component `ThemeContextProvider` Ä‘Æ°á»£c Ä‘áº·t bÃªn ngoÃ i `Navbar` Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng `Navbar` cÃ³ thá»ƒ nháº­n Ä‘Æ°á»£c giÃ¡ trá»‹ cá»§a `ThemeContext`. Náº¿u khÃ´ng Ä‘áº·t Component `ThemeContextProvider` bÃªn ngoÃ i `Navbar`, `Navbar` sáº½ khÃ´ng nháº­n Ä‘Æ°á»£c giÃ¡ trá»‹ cá»§a `ThemeContext` vÃ  sáº½ tráº£ vá» giÃ¡ trá»‹ máº·c Ä‘á»‹nh.

**- ğŸ‘‰Trong 5 lÆ°u Ã½ Ä‘Æ°á»£c nÃªu á»Ÿ trÃªn, cÃ³ Ã½ sá»‘ 3 nÃ y khÃ³ hiá»ƒu nÃ¨, cá»‘ gáº¯ng Ä‘á»c Ä‘i Ä‘á»c láº¡i vÃ  xem vÃ­ dá»¥ Ä‘á»ƒ hiá»ƒu nhÃ© !!**

```md
3. CÃ¡c giÃ¡ trá»‹ cá»§a Context Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  cáº­p nháº­t trong Provider, vÃ  chá»‰ Ä‘Æ°á»£c truyá»n xuá»‘ng cÃ¡c Component con Ä‘Æ°á»£c bao bá»c bá»Ÿi Provider Ä‘Ã³.
```

**- Giáº£i thÃ­ch:**

- Khi sá»­ dá»¥ng `Context`, cÃ¡c giÃ¡ trá»‹ Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  cáº­p nháº­t trong `Provider`, vÃ  chá»‰ Ä‘Æ°á»£c truyá»n xuá»‘ng cÃ¡c Component con Ä‘Æ°á»£c bao bá»c bá»Ÿi `Provider` Ä‘Ã³. Äiá»u nÃ y giÃºp cho viá»‡c quáº£n lÃ½ `state` vÃ  chia sáº» dá»¯ liá»‡u giá»¯a cÃ¡c component trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n.

**- Code minh hoáº¡:**

```jsx
// Táº¡o Context object
const UserContext = React.createContext();

function App() {
  // Khá»Ÿi táº¡o state vÃ  hÃ m setState
  const [user, setUser] = useState({ name: "John", age: 30 });

  return (
    // Sá»­ dá»¥ng Provider Ä‘á»ƒ truyá»n giÃ¡ trá»‹ xuá»‘ng component con
    <UserContext.Provider value={{ user, setUser }}>
      <Navbar />
      <MainContent />
    </UserContext.Provider>
  );
}

function Navbar() {
  // Sá»­ dá»¥ng useContext Ä‘á»ƒ láº¥y giÃ¡ trá»‹ Ä‘Ã£ Ä‘Æ°á»£c truyá»n xuá»‘ng tá»« Provider
  const { user } = useContext(UserContext);

  return (
    <div>
      <p>Hi, {user.name}!</p>
    </div>
  );
}

function MainContent() {
  // Sá»­ dá»¥ng useContext Ä‘á»ƒ láº¥y giÃ¡ trá»‹ Ä‘Ã£ Ä‘Æ°á»£c truyá»n xuá»‘ng tá»« Provider
  const { user, setUser } = useContext(UserContext);

  const handleButtonClick = () => {
    setUser({ ...user, age: user.age + 1 });
  };

  return (
    <div>
      <p>Age: {user.age}</p>
      <button onClick={handleButtonClick}>Increase Age</button>
    </div>
  );
}
```

- Trong vÃ­ dá»¥ trÃªn, ta táº¡o ra má»™t `UserContext` Ä‘á»ƒ quáº£n lÃ½ thÃ´ng tin ngÆ°á»i dÃ¹ng. Ta sá»­ dá»¥ng `Provider` Ä‘á»ƒ truyá»n giÃ¡ trá»‹ cá»§a `user` vÃ  hÃ m `setUser` xuá»‘ng cho cÃ¡c component con. Component `Navbar` sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y thÃ´ng tin `user` vÃ  hiá»ƒn thá»‹ tÃªn cá»§a ngÆ°á»i dÃ¹ng. Component `MainContent` sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y thÃ´ng tin `user` vÃ  hÃ m `setUser` Ä‘á»ƒ hiá»ƒn thá»‹ tuá»•i cá»§a ngÆ°á»i dÃ¹ng vÃ  cho phÃ©p ngÆ°á»i dÃ¹ng tÄƒng tuá»•i cá»§a mÃ¬nh báº±ng cÃ¡ch `click` vÃ o nÃºt `Increase Age`. Ta cÃ³ thá»ƒ tháº¥y ráº±ng thÃ´ng tin ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c chia sáº» giá»¯a hai component `Navbar` vÃ  `MainContent` má»™t cÃ¡ch dá»… dÃ ng thÃ´ng qua `UserContext`.

**- ğŸ‘‰Trong 5 lÆ°u Ã½ Ä‘Æ°á»£c nÃªu á»Ÿ trÃªn, cÃ³ Ã½ sá»‘ 4 nÃ y khÃ³ hiá»ƒu nÃ¨, cá»‘ gáº¯ng Ä‘á»c Ä‘i Ä‘á»c láº¡i vÃ  xem vÃ­ dá»¥ Ä‘á»ƒ hiá»ƒu nhÃ© !!**

```md
4. Khi giÃ¡ trá»‹ cá»§a Context thay Ä‘á»•i, táº¥t cáº£ cÃ¡c Component con sá»­ dá»¥ng Context Ä‘Ã³ sáº½ Ä‘Æ°á»£c cáº­p nháº­t tá»± Ä‘á»™ng.
```

**- Giáº£i thÃ­ch:**

- Khi giÃ¡ trá»‹ cá»§a `Context` Ä‘Æ°á»£c thay Ä‘á»•i, React sáº½ tá»± Ä‘á»™ng cáº­p nháº­t táº¥t cáº£ cÃ¡c component con sá»­ dá»¥ng `Context` Ä‘Ã³ mÃ  khÃ´ng cáº§n pháº£i viáº¿t láº¡i code Ä‘á»ƒ cáº­p nháº­t cÃ¡c giÃ¡ trá»‹ nÃ y. Äiá»u nÃ y cho phÃ©p báº¡n dá»… dÃ ng chia sáº» dá»¯ liá»‡u vÃ  tráº¡ng thÃ¡i giá»¯a cÃ¡c component mÃ  khÃ´ng cáº§n thÃ´ng qua cÃ¡c Component trung gian.

- VÃ­ dá»¥, náº¿u chÃºng ta cÃ³ má»™t á»©ng dá»¥ng ToDo vÃ  muá»‘n chia sáº» danh sÃ¡ch cÃ¡c cÃ´ng viá»‡c giá»¯a cÃ¡c Component khÃ¡c nhau, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng `Context` Ä‘á»ƒ lÃ m Ä‘iá»u Ä‘Ã³. Trong trÆ°á»ng há»£p nÃ y, giÃ¡ trá»‹ cá»§a `Context` lÃ  má»™t máº£ng cÃ¡c cÃ´ng viá»‡c.

- Äáº§u tiÃªn, chÃºng ta táº¡o má»™t `Context` object Ä‘á»ƒ lÆ°u trá»¯ danh sÃ¡ch cÃ´ng viá»‡c.

```jsx
const TasksContext = React.createContext([]);
```

- Sau Ä‘Ã³, chÃºng ta táº¡o má»™t `Provider` Ä‘á»ƒ lÆ°u trá»¯ giÃ¡ trá»‹ cá»§a `Context` vÃ  truyá»n nÃ³ xuá»‘ng cÃ¡c Component con.

```jsx
function App() {
  const [tasks, setTasks] = useState([]);

  return (
    <TasksContext.Provider value={[tasks, setTasks]}>
      <TaskList />
      <TaskForm />
    </TasksContext.Provider>
  );
}
```

- á» Ä‘Ã¢y, giÃ¡ trá»‹ cá»§a `Context` lÃ  má»™t máº£ng gá»“m hai pháº§n tá»­: danh sÃ¡ch cÃ¡c cÃ´ng viá»‡c vÃ  hÃ m Ä‘á»ƒ thÃªm má»™t cÃ´ng viá»‡c má»›i vÃ o danh sÃ¡ch. ChÃºng ta sá»­ dá»¥ng `useState` Ä‘á»ƒ táº¡o má»™t `state` vÃ  lÆ°u trá»¯ danh sÃ¡ch cÃ´ng viá»‡c, sau Ä‘Ã³ truyá»n nÃ³ xuá»‘ng `Provider`.

- Sau Ä‘Ã³, chÃºng ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ cá»§a `Context` vÃ  sá»­ dá»¥ng nÃ³ trong cÃ¡c Component con.

```jsx
function TaskList() {
  const [tasks, setTasks] = useContext(TasksContext);

  return (
    <div>
      {tasks.map((task) => (
        <Task key={task.id} task={task} />
      ))}
    </div>
  );
}
```

- á» Ä‘Ã¢y, chÃºng ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y danh sÃ¡ch cÃ´ng viá»‡c vÃ  hÃ m `setTasks` tá»« `Context`. ChÃºng ta sá»­ dá»¥ng danh sÃ¡ch cÃ´ng viá»‡c Ä‘á»ƒ hiá»ƒn thá»‹ táº¥t cáº£ cÃ¡c cÃ´ng viá»‡c trong danh sÃ¡ch.

- Khi thÃªm má»™t cÃ´ng viá»‡c má»›i, giÃ¡ trá»‹ cá»§a `Context` sáº½ Ä‘Æ°á»£c cáº­p nháº­t vÃ  táº¥t cáº£ cÃ¡c Component sá»­ dá»¥ng `Context` Ä‘Ã³ sáº½ Ä‘Æ°á»£c cáº­p nháº­t tá»± Ä‘á»™ng.

**- VÃ­ dá»¥ tiáº¿p theo:**

-VÃ­ dá»¥, ta cÃ³ má»™t `Context` lÃ  `UserContext` lÆ°u trá»¯ thÃ´ng tin cá»§a ngÆ°á»i dÃ¹ng. Khi ngÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p vÃ o á»©ng dá»¥ng, ta sáº½ lÆ°u thÃ´ng tin cá»§a ngÆ°á»i dÃ¹ng vÃ o `UserContext` vÃ  thÃ´ng tin nÃ y sáº½ Ä‘Æ°á»£c truyá»n xuá»‘ng cÃ¡c Component con Ä‘á»ƒ hiá»ƒn thá»‹ vÃ  sá»­ dá»¥ng.

```jsx
// Táº¡o UserContext
const UserContext = React.createContext({ name: "", email: "" });

// App Component bao gá»“m cÃ¡c Component con sá»­ dá»¥ng UserContext
function App() {
  const [user, setUser] = useState({ name: "", email: "" });

  useEffect(() => {
    // Gá»i API Ä‘á»ƒ láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng
    fetch("https://api.example.com/user")
      .then((response) => response.json())
      .then((data) => setUser(data));
  }, []);

  return (
    <UserContext.Provider value={user}>
      <Profile />
      <Settings />
    </UserContext.Provider>
  );
}

// Component con sá»­ dá»¥ng UserContext
function Profile() {
  const user = useContext(UserContext);

  return (
    <div>
      <h1>Profile Page</h1>
      <p>Name: {user.name}</p>
      <p>Email: {user.email}</p>
    </div>
  );
}

// Component con sá»­ dá»¥ng UserContext
function Settings() {
  const user = useContext(UserContext);

  return (
    <div>
      <h1>Settings Page</h1>
      <p>Name: {user.name}</p>
      <p>Email: {user.email}</p>
    </div>
  );
}
```

- Äoáº¡n code trÃªn sá»­ dá»¥ng `Context API` Ä‘á»ƒ chia sáº» dá»¯ liá»‡u giá»¯a cÃ¡c component con trong má»™t á»©ng dá»¥ng React. Trong Ä‘Ã³, ta khá»Ÿi táº¡o má»™t `UserContext` báº±ng cÃ¡ch sá»­ dá»¥ng phÆ°Æ¡ng thá»©c `createContext()` cá»§a React, vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  má»™t `object` chá»©a `tÃªn` vÃ  `email` rá»—ng. Sau Ä‘Ã³, ta sá»­ dá»¥ng `UserContext.Provider` Ä‘á»ƒ bao bá»c cÃ¡c component con, trong Ä‘Ã³ `App Component` sá»­ dá»¥ng `Provider` nÃ y vÃ  cung cáº¥p cho nÃ³ giÃ¡ trá»‹ `user` thÃ´ng qua `state` Ä‘Æ°á»£c láº¥y tá»« `API`.

- Trong cÃ¡c component con, ta sá»­ dá»¥ng `useContext` Ä‘á»ƒ láº¥y giÃ¡ trá»‹ cá»§a `UserContext` Ä‘Æ°á»£c cung cáº¥p bá»Ÿi `Provider`. Trong trÆ°á»ng há»£p nÃ y, hai component con lÃ  `Profile` vÃ  `Settings` Ä‘á»u sá»­ dá»¥ng `UserContext` Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng tin vá» `user` Ä‘Ã£ láº¥y Ä‘Æ°á»£c tá»« `API`.

- Khi giÃ¡ trá»‹ cá»§a `user` thay Ä‘á»•i, toÃ n bá»™ cÃ¡c component con sá»­ dá»¥ng `UserContext` Ä‘á»u Ä‘Æ°á»£c cáº­p nháº­t tá»± Ä‘á»™ng, Ä‘á»“ng bá»™ vá»›i giÃ¡ trá»‹ má»›i nháº¥t cá»§a `user`. VÃ­ dá»¥, náº¿u ta thay Ä‘á»•i `tÃªn` hoáº·c `email` cá»§a `user`, cÃ¡c component con sá»­ dá»¥ng `UserContext` sáº½ hiá»ƒn thá»‹ giÃ¡ trá»‹ má»›i nÃ y mÃ  khÃ´ng cáº§n pháº£i lÃ m báº¥t ká»³ thao tÃ¡c cáº­p nháº­t nÃ o khÃ¡c.

## LÆ°u Ã½ khi dÃ¹ng useContext:

- Provider gáº§n nháº¥t sáº½ override Provider xa hÆ¡n. VÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y, footer sáº½ nháº­n `value` tá»« context lÃ  "light"

```jsx
<ThemeContext.Provider value="dark">
  ...
  <ThemeContext.Provider value="light">
    <Footer />
  </ThemeContext.Provider>
  ...
</ThemeContext.Provider>
```

```

```

- Nhá»› truyá»n `value` vÃ o Provider, khÃ´ng truyá»n `value` vÃ o thÃ¬ nÃ³ sáº½ láº¥y giÃ¡ trá»‹ máº·c Ä‘á»‹nh mÃ  chÃºng ta khá»Ÿi táº¡o tá»« Ä‘áº§u

- KhÃ´ng nÃªn **truyá»n tháº³ng má»™t object** vÃ o `value` á»Ÿ Provider, vÃ¬ má»—i láº§n re-render sáº½ lÃ  má»™t object má»›i, dáº«n Ä‘áº¿n component trong Provider cá»§a chÃºng ta bá»‹ re-render do value context thay Ä‘á»•i

- KhÃ´ng nÃªn truyá»n nhÆ° tháº¿ nÃ y:

```jsx
function MyApp() {
  const [currentUser, setCurrentUser] = useState(null);

  function login(response) {
    storeCredentials(response.credentials);
    setCurrentUser(response.user);
  }

  return (
    <AuthContext.Provider value={{ currentUser, login }}>
      <Page />
    </AuthContext.Provider>
  );
}
```

- NÃªn truyá»n nhÆ° tháº¿ nÃ y:

```jsx
import { useCallback, useMemo } from "react";

function MyApp() {
  const [currentUser, setCurrentUser] = useState(null);

  const login = useCallback((response) => {
    storeCredentials(response.credentials);
    setCurrentUser(response.user);
  }, []);

  const contextValue = useMemo(
    () => ({
      currentUser,
      login,
    }),
    [currentUser, login]
  );

  return (
    <AuthContext.Provider value={contextValue}>
      <Page />
    </AuthContext.Provider>
  );
}
```
