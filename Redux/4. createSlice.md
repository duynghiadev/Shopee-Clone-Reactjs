## HÃ£y Ä‘á»‹nh nghÄ©a chi tiáº¿t vÃ  rÃµ rÃ ng nháº¥t vá» `createSlice` ?

- `createSlice` lÃ  má»™t phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c cung cáº¥p bá»Ÿi `Redux Toolkit`, giÃºp Ä‘Æ¡n giáº£n hÃ³a viá»‡c táº¡o ra cÃ¡c `slice`, `reducer` vÃ  `action creators` trong Redux.

- Má»—i `slice` Ä‘áº¡i diá»‡n cho má»™t pháº§n cá»§a `state` cá»§a á»©ng dá»¥ng, bao gá»“m má»™t `reducer` vÃ  cÃ¡c `action creators` tÆ°Æ¡ng á»©ng Ä‘á»ƒ thay Ä‘á»•i `state`. Vá»›i `createSlice`, báº¡n chá»‰ cáº§n Ä‘á»‹nh nghÄ©a cÃ¡c `reducer function`, vÃ  cÃ¡c `action types` vÃ  `action creators` tÆ°Æ¡ng á»©ng sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng táº¡o ra.

- PhÆ°Æ¡ng thá»©c `createSlice` cÃ³ cÃ¡c Ä‘á»‘i sá»‘ nhÆ° sau:

  - `name`: TÃªn cá»§a slice.
  - `initialState`: GiÃ¡ trá»‹ khá»Ÿi táº¡o cho slice.
  - `reducers`: Má»™t Ä‘á»‘i tÆ°á»£ng chá»©a cÃ¡c reducer function, trong Ä‘Ã³ má»—i `key` lÃ  tÃªn cá»§a reducer function, vÃ  giÃ¡ trá»‹ (`value`) lÃ  reducer function tÆ°Æ¡ng á»©ng.

- Khi báº¡n sá»­ dá»¥ng `createSlice`, phÆ°Æ¡ng thá»©c sáº½ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng vá»›i hai thuá»™c tÃ­nh lÃ  `actions` vÃ  `reducer`, tÆ°Æ¡ng á»©ng vá»›i cÃ¡c `action creators` vÃ  `reducer` cá»§a `slice` Ä‘Æ°á»£c táº¡o ra. CÃ¡c `action creators` Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra sáº½ cÃ³ tÃªn giá»‘ng vá»›i tÃªn cá»§a `reducer function` vÃ  sáº½ tráº£ vá» má»™t `action object` cÃ³ chá»©a action `type` vÃ  `payload`.

- Sá»­ dá»¥ng `createSlice` giÃºp giáº£m thiá»ƒu Ä‘Ã¡ng ká»ƒ khá»‘i lÆ°á»£ng mÃ£ cáº§n pháº£i viáº¿t vÃ  giÃºp cho viá»‡c quáº£n lÃ½ `state` cá»§a á»©ng dá»¥ng trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n. NgoÃ i ra, phÆ°Æ¡ng thá»©c nÃ y cÃ²n cung cáº¥p cÃ¡c tiá»‡n Ã­ch Ä‘á»ƒ xá»­ lÃ½ cÃ¡c `action` cÃ³ chá»©a `side effects`, sá»­ dá»¥ng `createAsyncThunk`.

## MÃ¬nh pháº£i táº¡o `slice` vÃ  `reducer` trÆ°á»›c rá»“i má»›i táº¡o file `store` Ä‘Ãºng khÃ´ng. Ã cá»§a tÃ´i nÃ³i lÃ  `cÃ¡c bÆ°á»›c` Ä‘á»ƒ táº¡o `store` theo thá»© tá»± ?

- ÄÃºng, Ä‘á»ƒ táº¡o má»™t Redux store trong Redux Toolkit, báº¡n cáº§n thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau theo thá»© tá»±:

1. `Táº¡o slice vÃ  reducer`: Äáº§u tiÃªn, báº¡n cáº§n táº¡o cÃ¡c `slice` vÃ  `reducer` Ä‘á»ƒ quáº£n lÃ½ `state` vÃ  xá»­ lÃ½ cÃ¡c `action` tÆ°Æ¡ng á»©ng. Äiá»u nÃ y thÆ°á»ng Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `createSlice` trong Redux Toolkit. Trong slice, báº¡n Ä‘á»‹nh nghÄ©a cÃ¡c thuá»™c tÃ­nh nhÆ° `name`, `initialState` vÃ  `reducers`.

2. `Káº¿t há»£p reducer`: Sau khi táº¡o cÃ¡c reducer tá»« slice, báº¡n cáº§n káº¿t há»£p chÃºng láº¡i Ä‘á»ƒ táº¡o ra má»™t reducer duy nháº¥t. Äiá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `combineReducers` tá»« Redux Toolkit hoáº·c báº¥t ká»³ cÃ¡ch nÃ o khÃ¡c Ä‘á»ƒ káº¿t há»£p cÃ¡c reducer láº¡i vá»›i nhau.

3. `Táº¡o store`: Tiáº¿p theo, báº¡n cáº§n táº¡o má»™t Redux store báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `configureStore` tá»« Redux Toolkit. Trong hÃ m nÃ y, báº¡n truyá»n vÃ o Ä‘á»‘i sá»‘ lÃ  `reducer` Ä‘Ã£ Ä‘Æ°á»£c káº¿t há»£p.

4. `Sá»­ dá»¥ng store`: Cuá»‘i cÃ¹ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `store` trong á»©ng dá»¥ng cá»§a mÃ¬nh. CÃ¡ch sá»­ dá»¥ng `store` phá»¥ thuá»™c vÃ o framework hoáº·c thÆ° viá»‡n báº¡n Ä‘ang sá»­ dá»¥ng, nhÆ° `React`, `Angular`, `Vue`, hoáº·c `vanilla JavaScript`.

- VÃ­ dá»¥:

```jsx
import { createSlice, configureStore } from "@reduxjs/toolkit";

// Táº¡o slice vÃ  reducer
const counterSlice = createSlice({
  name: "counter",
  initialState: 0,
  reducers: {
    increment: (state) => state + 1,
    decrement: (state) => state - 1,
  },
});

// Káº¿t há»£p reducer
const rootReducer = combineReducers({
  counter: counterSlice.reducer,
  // CÃ¡c reducer khÃ¡c...
});

// Táº¡o store
const store = configureStore({
  reducer: rootReducer,
});

// Sá»­ dá»¥ng store trong á»©ng dá»¥ng
// VÃ­ dá»¥: Sá»­ dá»¥ng store trong React vá»›i react-redux
import { Provider } from "react-redux";

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById("root")
);
```

- LÆ°u Ã½ ráº±ng cÃ¡c bÆ°á»›c trÃªn Ä‘Ã¢y chá»‰ lÃ  má»™t quy trÃ¬nh tá»•ng quan Ä‘á»ƒ táº¡o má»™t Redux store trong Redux Toolkit. TÃ¹y thuá»™c vÃ o nhu cáº§u vÃ  yÃªu cáº§u cá»¥ thá»ƒ cá»§a dá»± Ã¡n cá»§a báº¡n, báº¡n cÃ³ thá»ƒ tÃ¹y chá»‰nh vÃ  má»Ÿ rá»™ng cÃ¡c bÆ°á»›c nÃ y.

## âœ…âœ…âœ…âœ… 4. `Sá»­ dá»¥ng store`: Cuá»‘i cÃ¹ng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `store` trong á»©ng dá»¥ng cá»§a mÃ¬nh. CÃ¡ch sá»­ dá»¥ng `store` phá»¥ thuá»™c vÃ o framework hoáº·c thÆ° viá»‡n báº¡n Ä‘ang sá»­ dá»¥ng, nhÆ° `React`, `Angular`, `Vue`, hoáº·c `vanilla JavaScript`. HÃ£y nÃ³i chi tiáº¿t vá» bÆ°á»›c nÃ y. TÃ´i Ä‘ang sá»­ dá»¥ng react ? âœ…âœ…âœ…âœ…

- Khi báº¡n sá»­ dá»¥ng React vÃ  Redux Toolkit, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `react-redux` Ä‘á»ƒ káº¿t ná»‘i `store` vá»›i á»©ng dá»¥ng React cá»§a báº¡n. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c bÆ°á»›c chi tiáº¿t Ä‘á»ƒ sá»­ dá»¥ng `store` trong React:

1. CÃ i Ä‘áº·t cÃ¡c package cáº§n thiáº¿t:

```jsx
npm install react-redux
```

2. Táº¡o má»™t file `store.js` Ä‘á»ƒ khá»Ÿi táº¡o vÃ  xuáº¥t `store`:

```jsx
import { configureStore } from "@reduxjs/toolkit";
import rootReducer from "./reducers";

const store = configureStore({
  reducer: rootReducer,
});

export default store;
```

3. Trong component gá»‘c cá»§a á»©ng dá»¥ng React (thÆ°á»ng lÃ  `index.js` hoáº·c `App.js`), sá»­ dá»¥ng `<Provider>` Ä‘á»ƒ cung cáº¥p `store` cho á»©ng dá»¥ng:

```jsx
import React from "react";
import ReactDOM from "react-dom";
import { Provider } from "react-redux";
import store from "./store";
import App from "./App";

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById("root")
);
```

4. Trong cÃ¡c component con cá»§a á»©ng dá»¥ng React, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng hooks nhÆ° `useDispatch` vÃ  `useSelector` Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i `store`:

- Sá»­ dá»¥ng `useDispatch` Ä‘á»ƒ dispatch action:

```jsx
import { useDispatch } from "react-redux";
import { increment } from "./reducers/counter";

const MyComponent = () => {
  const dispatch = useDispatch();

  const handleIncrement = (count) => {
    dispatch(increment(count)); // Giáº£i sá»­ increment lÃ  action vÃ  count lÃ  payload
  };

  return <button onClick={handleIncrement}>Increment</button>;
};
```

- Sá»­ dá»¥ng `useSelector` Ä‘á»ƒ láº¥y state tá»« store:

```jsx
import { useSelector } from "react-redux";
import { selectCount } from "./reducers/counter";

const CounterDisplay = () => {
  const count = useSelector(selectCount);

  return <p>Count: {count}</p>;
};
```

- Äiá»u nÃ y cho phÃ©p báº¡n sá»­ dá»¥ng `store` vÃ  tÆ°Æ¡ng tÃ¡c vá»›i `state` vÃ  `actions` cá»§a nÃ³ trong cÃ¡c component React cá»§a báº¡n. Báº¥t ká»³ thay Ä‘á»•i nÃ o trong `store` cÅ©ng sáº½ tá»± Ä‘á»™ng kÃ­ch hoáº¡t viá»‡c cáº­p nháº­t giao diá»‡n React tÆ°Æ¡ng á»©ng.

## Tháº¿ nÃ o lÃ  1 `slice` trong `createSlice` ?

- Trong Redux, "`slice`" Ä‘á» cáº­p Ä‘áº¿n má»™t pháº§n cá»§a store Redux chá»©a `state`, `reducers` vÃ  `actions` liÃªn quan Ä‘áº¿n má»™t pháº§n cá»¥ thá»ƒ cá»§a á»©ng dá»¥ng. Má»—i `slice` Ä‘áº¡i diá»‡n cho má»™t pháº§n riÃªng biá»‡t cá»§a state vÃ  cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ thay Ä‘á»•i state Ä‘Ã³.

- Slice thÆ°á»ng Ä‘Æ°á»£c táº¡o báº±ng cÃ¡ch sá»­ dá»¥ng `createSlice` tá»« Redux Toolkit hoáº·c viáº¿t cÃ¡c `reducers`, `actions` vÃ  `selectors` thá»§ cÃ´ng. Má»™t `slice` bao gá»“m cÃ¡c thÃ nh pháº§n sau:

1. `State`: ÄÃ¢y lÃ  nÆ¡i lÆ°u trá»¯ thÃ´ng tin cáº§n thiáº¿t cho pháº§n cá»§a á»©ng dá»¥ng Ä‘Æ°á»£c Ä‘áº¡i diá»‡n bá»Ÿi slice. State thÆ°á»ng Ä‘Æ°á»£c khá»Ÿi táº¡o ban Ä‘áº§u vÃ  cÃ³ thá»ƒ thay Ä‘á»•i khi cÃ¡c actions Ä‘Æ°á»£c gá»­i Ä‘áº¿n reducers cá»§a slice.

2. `Reducers`: CÃ¡c reducers Ä‘á»‹nh nghÄ©a cÃ¡ch state cá»§a slice sáº½ thay Ä‘á»•i khi nháº­n cÃ¡c actions tÆ°Æ¡ng á»©ng. Má»—i reducer nháº­n vÃ o state hiá»‡n táº¡i vÃ  má»™t action, sau Ä‘Ã³ tráº£ vá» má»™t state má»›i sau khi thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i cáº§n thiáº¿t.

3. `Actions`: Actions lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng chá»©a thÃ´ng tin vá» cÃ¡c sá»± kiá»‡n xáº£y ra trong á»©ng dá»¥ng. Má»—i action cÃ³ má»™t `type` Ä‘á»ƒ xÃ¡c Ä‘á»‹nh loáº¡i action vÃ  cÃ¡c thÃ´ng tin bá»• sung khÃ¡c cÃ³ thá»ƒ Ä‘Æ°á»£c chá»©a trong cÃ¡c thuá»™c tÃ­nh khÃ¡c cá»§a action.

4. `Selectors`: Selectors cho phÃ©p báº¡n truy cáº­p vÃ  chá»n lá»c cÃ¡c pháº§n cá»§a state tá»« store Redux. Báº±ng cÃ¡ch sá»­ dá»¥ng selectors, báº¡n cÃ³ thá»ƒ láº¥y cÃ¡c giÃ¡ trá»‹ cáº§n thiáº¿t tá»« slice Ä‘á»ƒ sá»­ dá»¥ng trong cÃ¡c component hoáº·c cÃ¡c pháº§n khÃ¡c cá»§a á»©ng dá»¥ng.

- Slice giÃºp tÃ¡ch nhá» store Redux thÃ nh cÃ¡c pháº§n nhá» hÆ¡n, dá»… quáº£n lÃ½ vÃ  tÃ¡i sá»­ dá»¥ng. Má»—i slice cÃ³ thá»ƒ chá»©a state vÃ  cÃ¡c logic riÃªng biá»‡t cho má»™t pháº§n cá»¥ thá»ƒ cá»§a á»©ng dá»¥ng, Ä‘á»“ng thá»i nÃ³ cÅ©ng giÃºp tÄƒng tÃ­nh module hÃ³a vÃ  kháº£ nÄƒng má»Ÿ rá»™ng cá»§a á»©ng dá»¥ng Redux.

- Trong Redux Toolkit, má»™t slice khÃ´ng chá»‰ chá»©a state mÃ  cÃ²n chá»©a reducer vÃ  action creators tÆ°Æ¡ng á»©ng.

- Khi sá»­ dá»¥ng `createSlice` trong Redux Toolkit, báº¡n cung cáº¥p má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ cÃ¡c thuá»™c tÃ­nh `name`, `initialState`, `reducers` vÃ  tÃ¹y chá»n `extraReducers`. HÃ m `createSlice` sáº½ tá»± Ä‘á»™ng táº¡o reducer vÃ  cÃ¡c `action creators` dá»±a trÃªn cÃ¡c thÃ´ng tin báº¡n cung cáº¥p.

  - `Reducer`: Reducer cá»§a slice sáº½ xá»­ lÃ½ cÃ¡c action tÆ°Æ¡ng á»©ng vá»›i slice Ä‘Ã³. Má»—i reducer trong slice sáº½ nháº­n vÃ o state hiá»‡n táº¡i cá»§a slice vÃ  action tÆ°Æ¡ng á»©ng, vÃ  tráº£ vá» state má»›i sau khi xá»­ lÃ½ action Ä‘Ã³. Redux Toolkit sáº½ tá»± Ä‘á»™ng táº¡o reducer dá»±a trÃªn `reducers` báº¡n Ä‘á»‹nh nghÄ©a trong slice.

  - `Action Creators`: Action creators cá»§a slice lÃ  cÃ¡c hÃ m JavaScript thÃ´ng thÆ°á»ng Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng bá»Ÿi Redux Toolkit. ChÃºng lÃ  cÃ¡c hÃ m giÃºp táº¡o ra cÃ¡c action tÆ°Æ¡ng á»©ng vá»›i slice Ä‘Ã³, vá»›i cÃ¡c thuá»™c tÃ­nh nhÆ° `type` (loáº¡i action) vÃ  `payload` (dá»¯ liá»‡u Ä‘i kÃ¨m). Action creators giÃºp báº¡n dá»… dÃ ng dispatch action mÃ  khÃ´ng cáº§n pháº£i viáº¿t thá»§ cÃ´ng cÃ¡c Ä‘á»‘i tÆ°á»£ng action.

- VÃ­ dá»¥:

```jsx
import { createSlice } from "@reduxjs/toolkit";
const counterSlice = createSlice({
  name: "counter",
  initialState: 0,
  reducers: {
    increment: (state) => {
      return state + 1;
    },
    decrement: (state) => {
      return state - 1;
    },
  },
});

export const { increment, decrement } = counterSlice.actions;
export default counterSlice.reducer;
```

- Trong vÃ­ dá»¥ trÃªn, slice cÃ³ tÃªn lÃ  '`counter`' vÃ  state ban Ä‘áº§u lÃ  `0`. Redux Toolkit tá»± Ä‘á»™ng táº¡o reducer vÃ  action creators dá»±a trÃªn `reducers` báº¡n Ä‘á»‹nh nghÄ©a trong slice. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng action creators nhÆ° `increment()` vÃ  `decrement()` Ä‘á»ƒ dispatch cÃ¡c action tÆ°Æ¡ng á»©ng vÃ  reducer sáº½ xá»­ lÃ½ nhá»¯ng action Ä‘Ã³ Ä‘á»ƒ cáº­p nháº­t state cá»§a slice.

## LÃ m sao Ä‘á»ƒ táº¡o má»™t `slice` má»›i trong Redux Toolkit ?

- Äá»ƒ táº¡o má»™t slice má»›i trong Redux Toolkit, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng hÃ m `createSlice` tá»« thÆ° viá»‡n `@reduxjs/toolkit`. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c bÆ°á»›c Ä‘á»ƒ táº¡o má»™t slice má»›i:

1. Import `createSlice` tá»« `@reduxjs/toolkit`:

```jsx
import { createSlice } from "@reduxjs/toolkit";
```

2. Sá»­ dá»¥ng hÃ m `createSlice` Ä‘á»ƒ táº¡o slice má»›i. HÃ m nÃ y nháº­n vÃ o má»™t Ä‘á»‘i tÆ°á»£ng cáº¥u hÃ¬nh (configuration object) chá»©a thÃ´ng tin vá» slice.

```jsx
const mySlice = createSlice({
  name: "mySlice", // TÃªn cá»§a slice
  initialState: initialStateValue, // GiÃ¡ trá»‹ ban Ä‘áº§u cá»§a state
  reducers: {
    // CÃ¡c reducers Ä‘á»ƒ xá»­ lÃ½ cÃ¡c action
    reducer1: (state, action) => {
      // Xá»­ lÃ½ action vÃ  cáº­p nháº­t state
    },
    reducer2: (state, action) => {
      // Xá»­ lÃ½ action vÃ  cáº­p nháº­t state
    },
    // ...
  },
});
```

3. Export cÃ¡c action creators vÃ  reducer tá»« slice:

```jsx
export const { reducer1, reducer2 } = mySlice.actions;
export default mySlice.reducer;
```

- Sau khi táº¡o slice, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng reducer vÃ  action creators Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng bá»Ÿi Redux Toolkit Ä‘á»ƒ thao tÃ¡c vá»›i state trong Redux.

- VÃ­ dá»¥:

```jsx
import { createSlice } from "@reduxjs/toolkit";

const counterSlice = createSlice({
  name: "counter",
  initialState: 0,
  reducers: {
    increment: (state) => {
      state += 1;
    },
    decrement: (state) => {
      state -= 1;
    },
  },
});

export const { increment, decrement } = counterSlice.actions;
export default counterSlice.reducer;
```

- TrÃªn Ä‘Ã¢y lÃ  cÃ¡ch táº¡o má»™t slice má»›i trong Redux Toolkit báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `createSlice`.

- ğŸ‘‡ 1 `slice` cÃ³ nghÄ©a lÃ  má»—i cÃ¡i `object` trong reducers pháº£i khÃ´ng ğŸ‘‡?

```jsx
const mySlice = createSlice({
  reducers: {
    // CÃ¡c reducers Ä‘á»ƒ xá»­ lÃ½ cÃ¡c action
    reducer1: (state, action) => {
      // Xá»­ lÃ½ action vÃ  cáº­p nháº­t state
    },
    reducer2: (state, action) => {
      // Xá»­ lÃ½ action vÃ  cáº­p nháº­t state
    },
    // ...
  },
});
```

- Trong Redux Toolkit, má»™t slice khÃ´ng chá»‰ Ä‘áº¡i diá»‡n cho má»—i object, mÃ  thá»±c táº¿ nÃ³ Ä‘áº¡i diá»‡n cho má»™t pháº§n cá»§a state vÃ  cÃ¡c reducers liÃªn quan Ä‘áº¿n pháº§n Ä‘Ã³.

- Trong vÃ­ dá»¥ cá»§a báº¡n, `reducers` lÃ  má»™t object chá»©a cÃ¡c reducers Ä‘á»ƒ xá»­ lÃ½ cÃ¡c action. Má»—i reducer lÃ  má»™t hÃ m JavaScript nháº­n vÃ o hai Ä‘á»‘i sá»‘ lÃ  `state` vÃ  `action`, vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cáº­p nháº­t state dá»±a trÃªn action tÆ°Æ¡ng á»©ng.

- VÃ­ dá»¥:

```jsx
const mySlice = createSlice({
  name: "mySlice",
  initialState: { count: 0, name: "" },
  reducers: {
    increment: (state, action) => {
      state.count += action.payload;
    },
    setName: (state, action) => {
      state.name = action.payload;
    },
  },
});
```

- Trong vÃ­ dá»¥ trÃªn, slice "mySlice" bao gá»“m hai reducers lÃ  "increment" vÃ  "setName". Má»—i reducer Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cáº­p nháº­t má»™t pháº§n cá»§a state. VÃ­ dá»¥, reducer "increment" tÄƒng giÃ¡ trá»‹ cá»§a `count` trong state cá»§a slice, vÃ  reducer "setName" Ä‘áº·t giÃ¡ trá»‹ cá»§a `name` trong state.

- Tá»« Ä‘Ã³, má»™t slice trong Redux Toolkit khÃ´ng chá»‰ Ä‘áº¡i diá»‡n cho má»—i object mÃ  chá»©a cÃ¡c reducers, mÃ  thá»±c táº¿ nÃ³ Ä‘áº¡i diá»‡n cho má»™t pháº§n cá»§a state vÃ  cÃ¡c reducers liÃªn quan Ä‘á»ƒ cáº­p nháº­t pháº§n Ä‘Ã³ cá»§a state.

âœ…âœ…âœ…âœ… NhÆ° váº­y káº¿t luáº­n âœ…âœ…âœ…âœ…

- NhÆ° váº­y thÃ¬ 1 `slice` lÃ  1 pháº§n chá»©a trong `createSlice` Ä‘Ãºng khÃ´ng ?

```jsx
const mySlice = createSlice({
  name: "mySlice",
  initialState: { count: 0, name: "" },
  reducers: {
    increment: (state, action) => {
      state.count += action.payload;
    },
    setName: (state, action) => {
      state.name = action.payload;
    },
  },
});
```

- ÄÃºng, trong Redux Toolkit, má»™t slice lÃ  má»™t pháº§n tá»­ chá»©a trong hÃ m `createSlice`. Má»—i slice Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bá»Ÿi má»™t object cÃ³ cÃ¡c thuá»™c tÃ­nh nhÆ° `name`, `initialState` vÃ  `reducers`.

- Trong vÃ­ dá»¥ cá»§a báº¡n, object `{ name: 'mySlice', initialState: { count: 0, name: '' }, reducers: { ... } }` Ä‘áº¡i diá»‡n cho má»™t slice cÃ³ tÃªn lÃ  "mySlice". NÃ³ bao gá»“m má»™t initialState ban Ä‘áº§u lÃ  `{ count: 0, name: '' }` vÃ  má»™t object reducers chá»©a cÃ¡c reducers Ä‘á»ƒ xá»­ lÃ½ cÃ¡c action tÆ°Æ¡ng á»©ng.

- Khi chÃºng ta sá»­ dá»¥ng hÃ m `createSlice` vÃ  truyá»n vÃ o object Ä‘á»‹nh nghÄ©a slice, Redux Toolkit sáº½ tá»± Ä‘á»™ng táº¡o ra má»™t reducer duy nháº¥t cho slice Ä‘Ã³, cÃ¹ng vá»›i cÃ¡c action creators tÆ°Æ¡ng á»©ng.

- VÃ­ dá»¥, trong trÆ°á»ng há»£p cá»§a báº¡n, Redux Toolkit sáº½ tá»± Ä‘á»™ng táº¡o ra reducer cho slice "`mySlice`" vÃ  cÃ¡c action creators lÃ  "`increment`" vÃ  "`setName`" thÃ´ng qua 2 cÃ¢u lá»‡nh.

```jsx
export const { increment, decrement } = counterSlice.actions;
export default counterSlice.reducer;
```

- TÃ³m láº¡i, má»™t slice trong Redux Toolkit lÃ  má»™t pháº§n tá»­ Ä‘áº¡i diá»‡n cho má»™t pháº§n cá»§a state vÃ  cÃ¡c reducers liÃªn quan Ä‘á»ƒ cáº­p nháº­t pháº§n Ä‘Ã³ cá»§a state. NÃ³ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `createSlice` vÃ  truyá»n vÃ o má»™t object Ä‘á»‹nh nghÄ©a slice.

âœ…âœ…âœ…âœ… Giáº£i thÃ­ch vá» Ä‘oáº¡n code á»Ÿ trÃªn ? chÃº Ã½ Ä‘áº¿n `action.payload` bá»Ÿi vÃ¬ nÃ³ Ä‘Æ°á»£c dÃ¹ng nhiá»u trong redux âœ…âœ…âœ…âœ…

```jsx
state.count += action.payload;
```

- Trong Ä‘oáº¡n mÃ£ `state.count += action.payload;`, cÃ¢u lá»‡nh nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cáº­p nháº­t giÃ¡ trá»‹ cá»§a thuá»™c tÃ­nh `count` trong Ä‘á»‘i tÆ°á»£ng `state`.

  - `state` lÃ  tham chiáº¿u Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng state hiá»‡n táº¡i.
  - `state.count` truy cáº­p thuá»™c tÃ­nh `count` trong Ä‘á»‘i tÆ°á»£ng state.
  - `action.payload` lÃ  giÃ¡ trá»‹ Ä‘Æ°á»£c truyá»n vÃ o thÃ´ng qua thuá»™c tÃ­nh `payload` cá»§a action.
  - ToÃ¡n tá»­ `+=` Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thÃªm giÃ¡ trá»‹ cá»§a `action.payload` vÃ o giÃ¡ trá»‹ hiá»‡n táº¡i cá»§a `state.count`. NÃ³ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c `state.count = state.count + action.payload`.

- VÃ­ dá»¥: Náº¿u `state.count` ban Ä‘áº§u lÃ  5 vÃ  `action.payload` lÃ  3, sau khi thá»±c hiá»‡n cÃ¢u lá»‡nh `state.count += action.payload;`, giÃ¡ trá»‹ cá»§a `state.count` sáº½ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh 8.

- LÆ°u Ã½ ráº±ng trong `Redux Toolkit`, viá»‡c cáº­p nháº­t trá»±c tiáº¿p trÃªn `state` Ä‘Æ°á»£c há»— trá»£ bá»Ÿi thÆ° viá»‡n `Immer` Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh báº¥t biáº¿n (`immutable`) cá»§a state. Thay vÃ¬ thay Ä‘á»•i trá»±c tiáº¿p giÃ¡ trá»‹, `Immer` sáº½ táº¡o ra má»™t báº£n sao khÃ´ng thay Ä‘á»•i cá»§a state vÃ  Ã¡p dá»¥ng cÃ¡c thay Ä‘á»•i lÃªn báº£n sao Ä‘Ã³, tá»« Ä‘Ã³ tráº£ vá» má»™t `state` má»›i Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t.

âœ…âœ…âœ…âœ… NÃ³i 1 cÃ¡ch bao quÃ¡t `action.payload` lÃ  Ä‘á»ƒ láº¥y dá»¯ liá»‡u háº£ ? âœ…âœ…âœ…âœ…

- ÄÃºng, `action.payload` trong Redux Toolkit Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº¥y dá»¯ liá»‡u tá»« `action` gá»­i vÃ o `reducer`. Khi `dispatch` má»™t `action`, ta cÃ³ thá»ƒ gá»­i thÃ´ng tin hoáº·c dá»¯ liá»‡u bá»• sung cáº§n thiáº¿t Ä‘á»ƒ thay Ä‘á»•i `state`. Äiá»u nÃ y giÃºp `reducer` biáº¿t Ä‘Æ°á»£c nhá»¯ng thÃ´ng tin cáº§n thiáº¿t Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c `logic` xá»­ lÃ½ vÃ  cáº­p nháº­t `state` phÃ¹ há»£p.

- Vá» vÃ­ dá»¥ cá»§a báº¡n, trong reducer `addTodo` cá»§a vÃ­ dá»¥ dÆ°á»›i cáº£u báº¡n ğŸ‘‡, `action.payload` cÃ³ thá»ƒ lÃ  má»™t Ä‘á»‘i tÆ°á»£ng chá»©a thÃ´ng tin vá» todo má»›i cáº§n Ä‘Æ°á»£c thÃªm vÃ o `state`. Trong reducer `toggleTodo`, `action.payload` cÃ³ thá»ƒ chá»©a má»™t thuá»™c tÃ­nh `id` Ä‘á»ƒ xÃ¡c Ä‘á»‹nh todo cáº§n thay Ä‘á»•i tráº¡ng thÃ¡i.

- `action.payload` lÃ  má»™t thuá»™c tÃ­nh linh hoáº¡t vÃ  cÃ³ thá»ƒ mang theo báº¥t ká»³ dá»¯ liá»‡u nÃ o cáº§n thiáº¿t cho `reducer`. CÃ¡ch sá»­ dá»¥ng vÃ  ná»™i dung cá»§a `action.payload` phá»¥ thuá»™c vÃ o cÃ¡ch báº¡n Ä‘á»‹nh nghÄ©a vÃ  gá»­i cÃ¡c `action` trong á»©ng dá»¥ng cá»§a báº¡n.

## hÆ°á»›ng dáº«n sá»­ dá»¥ng thÆ° viá»‡n `Immerjs` Ä‘á»ƒ giÃºp xá»­ lÃ½ `state` trong redux toolkit ?

- `Immer` khÃ´ng pháº£i lÃ  má»™t thÆ° viá»‡n cÃ³ sáºµn cá»§a Redux, mÃ  lÃ  má»™t thÆ° viá»‡n JavaScript Ä‘á»™c láº­p Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÃ m viá»‡c vá»›i state khÃ´ng thay Ä‘á»•i (immutable state) má»™t cÃ¡ch dá»… dÃ ng.

- `Immer` cung cáº¥p má»™t cÃ¡ch tiáº¿p cáº­n dá»… hiá»ƒu vÃ  thuáº­n tiá»‡n Ä‘á»ƒ táº¡o vÃ  cáº­p nháº­t `state immutable`. Thay vÃ¬ báº¡n pháº£i táº¡o ra cÃ¡c báº£n sao cá»§a state vÃ  sá»­ dá»¥ng cÃ¡c phÃ©p toÃ¡n khÃ´ng thay Ä‘á»•i (immutability operators) Ä‘á»ƒ táº¡o ra state má»›i, `Immer` cho phÃ©p báº¡n thay Ä‘á»•i state trá»±c tiáº¿p má»™t cÃ¡ch tÆ°á»ng minh, nhÆ°ng nÃ³ sáº½ tá»± Ä‘á»™ng xá»­ lÃ½ viá»‡c táº¡o báº£n sao vÃ  Ã¡p dá»¥ng cÃ¡c thay Ä‘á»•i má»™t cÃ¡ch an toÃ n.

- Má»™t trong nhá»¯ng cÃ¡ch phá»• biáº¿n nháº¥t Ä‘á»ƒ sá»­ dá»¥ng `Immer` trong Redux lÃ  thÃ´ng qua `Redux Toolkit`. Redux Toolkit tÃ­ch há»£p `Immer` sáºµn cÃ³ vÃ  sá»­ dá»¥ng `Immer` Ä‘á»ƒ xá»­ lÃ½ state trong reducers má»™t cÃ¡ch tiá»‡n lá»£i.

- Khi báº¡n sá»­ dá»¥ng `Redux Toolkit` vÃ  táº¡o `reducers` báº±ng cÃ¡ch sá»­ dá»¥ng `createSlice`, Redux Toolkit sáº½ tá»± Ä‘á»™ng sá»­ dá»¥ng `Immer` Ä‘á»ƒ xá»­ lÃ½ `state`. Báº¡n khÃ´ng cáº§n pháº£i lo láº¯ng vá» viá»‡c táº¡o báº£n sao cá»§a state vÃ  cung cáº¥p reducers dá»±a trÃªn `Immer`.

- VÃ­ dá»¥:

```jsx
import { createSlice } from "@reduxjs/toolkit";

const counterSlice = createSlice({
  name: "counter",
  initialState: 0,
  reducers: {
    increment: (state) => {
      state += 1; // Sá»­ dá»¥ng Immer Ä‘á»ƒ thay Ä‘á»•i state trá»±c tiáº¿p
    },
    decrement: (state) => {
      state -= 1;
    },
  },
});

export const { increment, decrement } = counterSlice.actions;
export default counterSlice.reducer;
```

- Trong vÃ­ dá»¥ trÃªn, Redux Toolkit sá»­ dá»¥ng `Immer` Ä‘á»ƒ tá»± Ä‘á»™ng xá»­ lÃ½ viá»‡c táº¡o báº£n sao vÃ  Ã¡p dá»¥ng cÃ¡c thay Ä‘á»•i vÃ o state khi báº¡n thay Ä‘á»•i trá»±c tiáº¿p `state` bÃªn trong reducers.

## Cho vÃ­ dá»¥ khÃ¡c vá» viá»‡c sá»­ dá»¥ng `immer` trong redux toolkit ?

- Trong vÃ­ dá»¥ nÃ y chÃºng ta sá»­ dá»¥ng cÃº phÃ¡p gÃ¡n (assignment syntax) Ä‘á»ƒ táº¡o má»™t báº£n sao má»›i cá»§a state vÃ  thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i trÃªn báº£n sao Ä‘Ã³. DÆ°á»›i Ä‘Ã¢y lÃ  vÃ­ dá»¥ sá»­ dá»¥ng cÃº phÃ¡p gÃ¡n trong Redux Toolkit:

```jsx
import { createSlice } from "@reduxjs/toolkit";

// Táº¡o slice
const todosSlice = createSlice({
  name: "todos",
  initialState: [],
  reducers: {
    addTodo: (state, action) => {
      // ThÃªm má»™t todo vÃ o state
      state.push(action.payload);
    },
    toggleTodo: (state, action) => {
      const { id } = action.payload;
      // Thay Ä‘á»•i tráº¡ng thÃ¡i cá»§a má»™t todo trong state
      const todo = state.find((todo) => todo.id === id);
      if (todo) {
        todo.completed = !todo.completed;
      }
    },
    // CÃ¡c reducers khÃ¡c...
  },
});

// Export action creators
export const { addTodo, toggleTodo } = todosSlice.actions;

// Export reducer
export default todosSlice.reducer;
```

- âœ…âœ…âœ…âœ… Giáº£i thÃ­ch code: âœ…âœ…âœ…âœ…

- vÃ­ dá»¥ trÃªn sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p `state mutable`, tá»©c lÃ  `state` Ä‘Æ°á»£c thay Ä‘á»•i trá»±c tiáº¿p mÃ  khÃ´ng táº¡o báº£n sao. Äiá»u nÃ y cÃ³ thá»ƒ nhÃ¬n tháº¥y trong viá»‡c sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c `mutable` nhÆ° `push` vÃ  gÃ¡n trá»±c tiáº¿p cÃ¡c thuá»™c tÃ­nh cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng trong `state`. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch phÆ°Æ¡ng phÃ¡p nÃ y hoáº¡t Ä‘á»™ng:

1. Khá»Ÿi táº¡o slice sá»­ dá»¥ng `createSlice` tá»« Redux Toolkit. `Slice` lÃ  má»™t cÃ¡ch tá»• chá»©c `state` vÃ  cÃ¡c `reducers` tÆ°Æ¡ng á»©ng cá»§a nÃ³. Trong vÃ­ dá»¥, `slice` cÃ³ tÃªn lÃ  "`todos`".

2. Äá»‹nh nghÄ©a `initialState` ban Ä‘áº§u cá»§a `slice` lÃ  má»™t máº£ng rá»—ng `[]`.

3. Äá»‹nh nghÄ©a cÃ¡c `reducers` báº±ng cÃ¡ch sá»­ dá»¥ng cÃº phÃ¡p rÃºt gá»n cá»§a Redux Toolkit. VÃ­ dá»¥:

- `addTodo`: Nháº­n `state` vÃ  `action` lÃ m tham sá»‘. Trong reducers nÃ y, chÃºng ta thÃªm má»™t todo má»›i vÃ o máº£ng `state` báº±ng cÃ¡ch sá»­ dá»¥ng `push`. PhÆ°Æ¡ng phÃ¡p nÃ y thay Ä‘á»•i trá»±c tiáº¿p máº£ng state.

- `toggleTodo`: Nháº­n `state` vÃ  `action` lÃ m tham sá»‘. Trong reducers nÃ y, chÃºng ta tÃ¬m todo cÃ³ `id` tÆ°Æ¡ng á»©ng trong máº£ng `state` vÃ  thay Ä‘á»•i tráº¡ng thÃ¡i hoÃ n thÃ nh (`completed`) cá»§a nÃ³ báº±ng cÃ¡ch Ä‘áº£o ngÆ°á»£c giÃ¡ trá»‹ hiá»‡n táº¡i. LÆ°u Ã½ lÃ  chÃºng ta khÃ´ng thay Ä‘á»•i máº£ng `state` mÃ  chá»‰ thay Ä‘á»•i cÃ¡c thuá»™c tÃ­nh bÃªn trong cÃ¡c Ä‘á»‘i tÆ°á»£ng todo.

4. Export cÃ¡c action creators tÆ°Æ¡ng á»©ng (`addTodo`, `toggleTodo`) Ä‘Æ°á»£c táº¡o ra bá»Ÿi Redux Toolkit tá»« slice. CÃ¡c action creators nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ dispatch cÃ¡c action tÆ°Æ¡ng á»©ng trong á»©ng dá»¥ng React.

5. Export reducer cá»§a slice (`todosSlice.reducer`). Reducer nÃ y sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ quáº£n lÃ½ state cá»§a slice trong Redux store.

- PhÆ°Æ¡ng phÃ¡p nÃ y sá»­ dá»¥ng cÆ¡ cháº¿ táº¡o ra state má»›i báº±ng cÃ¡ch táº¡o ra má»™t báº£n sao (copy) cá»§a state hiá»‡n táº¡i vÃ  thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i trÃªn báº£n sao Ä‘Ã³. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o tÃ­nh khÃ´ng thay Ä‘á»•i cá»§a state ban Ä‘áº§u vÃ  kháº¯c phá»¥c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n mutable state trong Redux.

- Trong vÃ­ dá»¥ nÃ y, chÃºng ta thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i trá»±c tiáº¿p trÃªn `state` báº±ng cÃ¡ch sá»­ dá»¥ng cÃº phÃ¡p gÃ¡n (`=`) Ä‘á»ƒ táº¡o báº£n sao má»›i cá»§a `state` vÃ  thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i trÃªn báº£n sao Ä‘Ã³. LÆ°u Ã½ ráº±ng Ä‘iá»u nÃ y Ä‘Ã²i há»i `state` trong Redux Toolkit pháº£i lÃ  `mutable` (cÃ³ thá»ƒ thay Ä‘á»•i trá»±c tiáº¿p).

- Trong vÃ­ dá»¥ trÃªn, khÃ´ng sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p `state immutable` mÃ  sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p `state mutable`.

- Khi thay Ä‘á»•i `state`, chÃºng ta thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i trá»±c tiáº¿p trÃªn `state` hiá»‡n táº¡i báº±ng cÃ¡ch sá»­ dá»¥ng cÃº phÃ¡p gÃ¡n (`=`) Ä‘á»ƒ thay Ä‘á»•i giÃ¡ trá»‹ cá»§a thuá»™c tÃ­nh trong `state`.

- PhÆ°Æ¡ng phÃ¡p `state mutable` cÃ³ Ã½ nghÄ©a lÃ  chÃºng ta thay Ä‘á»•i trá»±c tiáº¿p giÃ¡ trá»‹ cá»§a `state` hiá»‡n táº¡i mÃ  khÃ´ng táº¡o ra má»™t báº£n sao má»›i cá»§a `state`. Äiá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n cÃ¡c váº¥n Ä‘á» nhÆ° lÃ m thay Ä‘á»•i `state gá»‘c` mÃ  khÃ´ng thá»ƒ theo dÃµi Ä‘Æ°á»£c lá»‹ch sá»­ thay Ä‘á»•i, gÃ¢y khÃ³ khÄƒn trong viá»‡c quáº£n lÃ½ vÃ  gá»¡ lá»—i.

- NgÆ°á»£c láº¡i, phÆ°Æ¡ng phÃ¡p `state immutable` yÃªu cáº§u chÃºng ta táº¡o ra má»™t báº£n sao má»›i cá»§a state má»—i khi thay Ä‘á»•i state. Thay Ä‘á»•i giÃ¡ trá»‹ trong báº£n sao má»›i nÃ y Ä‘áº£m báº£o ráº±ng `state gá»‘c` khÃ´ng bá»‹ thay Ä‘á»•i, vÃ  ta cÃ³ thá»ƒ theo dÃµi vÃ  quáº£n lÃ½ lá»‹ch sá»­ thay Ä‘á»•i cá»§a state má»™t cÃ¡ch dá»… dÃ ng. Redux Toolkit sá»­ dá»¥ng thÆ° viá»‡n Immer Ä‘á»ƒ há»— trá»£ viá»‡c lÃ m viá»‡c vá»›i `state immutable` má»™t cÃ¡ch thuáº­n tiá»‡n vÃ  tá»± Ä‘á»™ng.

## HÃ£y giáº£i thÃ­ch cÃ¢u nÃ y: `Redux Toolkit` sá»­ dá»¥ng thÆ° viá»‡n `Immer` Ä‘á»ƒ há»— trá»£ viá»‡c lÃ m viá»‡c vá»›i `state immutable` má»™t cÃ¡ch thuáº­n tiá»‡n vÃ  tá»± Ä‘á»™ng:

- Khi lÃ m viá»‡c vá»›i state immutable, nghÄ©a lÃ  state khÃ´ng thay Ä‘á»•i trá»±c tiáº¿p, ta thÆ°á»ng pháº£i táº¡o báº£n sao cá»§a state vÃ  thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i trÃªn báº£n sao Ä‘Ã³. Äiá»u nÃ y Ä‘áº£m báº£o ráº±ng state gá»‘c khÃ´ng bá»‹ thay Ä‘á»•i vÃ  ta cÃ³ thá»ƒ theo dÃµi lá»‹ch sá»­ cÃ¡c thay Ä‘á»•i.

- Tuy nhiÃªn, viá»‡c táº¡o báº£n sao vÃ  thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i trÃªn báº£n sao cÃ³ thá»ƒ tá»‘n nhiá»u cÃ´ng sá»©c vÃ  dá»… gÃ¢y nháº§m láº«n. ÄÃ³ lÃ  khi Immer Ä‘áº¿n cá»©u giÃºp. Immer giÃºp ta lÃ m viá»‡c vá»›i state immutable má»™t cÃ¡ch dá»… dÃ ng hÆ¡n báº±ng cÃ¡ch cho phÃ©p ta thay Ä‘á»•i state trá»±c tiáº¿p mÃ  khÃ´ng cáº§n pháº£i táº¡o báº£n sao.

- Khi ta sá»­ dá»¥ng Immer, ta cÃ³ thá»ƒ thay Ä‘á»•i state trá»±c tiáº¿p, nhÆ°ng Immer sáº½ tá»± Ä‘á»™ng táº¡o ra má»™t báº£n sao áº©n cá»§a state vÃ  Ã¡p dá»¥ng cÃ¡c thay Ä‘á»•i lÃªn báº£n sao Ä‘Ã³. Äiá»u nÃ y Ä‘áº£m báº£o ráº±ng state gá»‘c khÃ´ng bá»‹ thay Ä‘á»•i vÃ  ta váº«n cÃ³ thá»ƒ theo dÃµi lá»‹ch sá»­ thay Ä‘á»•i cá»§a state.

- VÃ¬ váº­y, thÆ° viá»‡n Immer giÃºp ta lÃ m viá»‡c vá»›i state immutable má»™t cÃ¡ch thuáº­n tiá»‡n vÃ  tá»± Ä‘á»™ng, mÃ  khÃ´ng cáº§n pháº£i táº¡o báº£n sao vÃ  lÃ m viá»‡c vá»›i nÃ³ trá»±c tiáº¿p.

=> TÃ³m láº¡i, khi lÃ m viá»‡c vá»›i `immutable state`, ta cáº§n táº¡o báº£n sao Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i vÃ  Ä‘áº£m báº£o tÃ­nh khÃ´ng thay Ä‘á»•i cá»§a state gá»‘c. Trong khi Ä‘Ã³, khi lÃ m viá»‡c vá»›i `mutable state`, ta thay Ä‘á»•i trá»±c tiáº¿p giÃ¡ trá»‹ cá»§a state mÃ  khÃ´ng cáº§n táº¡o báº£n sao.

## ÄÃ¢y lÃ  vÃ­ dá»¥ nhá» vá» `createSlice` trong redux toolkit:

```jsx
import { createSlice } from "@reduxjs/toolkit";

const counterSlice = createSlice({
  name: "counter",
  initialState: 0,
  reducers: {
    increment: (state) => {
      return state + 1;
    },
    decrement: (state) => {
      return state - 1;
    },
    reset: () => {
      return 0;
    },
  },
});

export const { increment, decrement, reset } = counterSlice.actions;
export default counterSlice.reducer;
```

- Trong vÃ­ dá»¥ trÃªn, chÃºng ta táº¡o má»™t slice cÃ³ tÃªn lÃ  'counter'. State ban Ä‘áº§u cá»§a slice Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ  0. CÃ¡c reducers Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `reducers` object. Má»—i reducer nháº­n state hiá»‡n táº¡i vÃ  tráº£ vá» má»™t state má»›i sau khi thá»±c hiá»‡n cÃ¡c thay Ä‘á»•i.

- CÃ¡c action tÆ°Æ¡ng á»©ng vá»›i reducers Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng bá»Ÿi Redux Toolkit vÃ  xuáº¥t ra bÃªn ngoÃ i (`export const { increment, decrement, reset } = counterSlice.actions`). Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c action nÃ y Ä‘á»ƒ gá»i cÃ¡c reducers tÆ°Æ¡ng á»©ng trong store Redux.

- Khi slice Ä‘Æ°á»£c káº¿t há»£p vÃ o rootReducer cá»§a báº¡n, state cá»§a slice sáº½ Ä‘Æ°á»£c quáº£n lÃ½ trong store chung vÃ  báº¡n cÃ³ thá»ƒ truy cáº­p nÃ³ tá»« cÃ¡c component trong á»©ng dá»¥ng.

## ÄÃ¢y lÃ  khÃ¡i niá»‡m vá» `createSlice` nhÆ°ng cÃ³ kÃ¨m vÃ­ dá»¥ cho dá»… hÃ¬nh dung:

- `createSlice` lÃ  má»™t phÆ°Æ¡ng thá»©c cá»§a `Redux Toolkit`, cho phÃ©p báº¡n táº¡o ra má»™t `slice`, bao gá»“m má»™t `reducer` vÃ  cÃ¡c `action creators` tÆ°Æ¡ng á»©ng, chá»‰ trong má»™t bÆ°á»›c. Má»—i `slice` Ä‘áº¡i diá»‡n cho má»™t pháº§n cá»§a `state` cá»§a á»©ng dá»¥ng vÃ  chá»©a cÃ¡c hÃ nh Ä‘á»™ng (`action`) vÃ  `reducer` liÃªn quan Ä‘áº¿n pháº§n Ä‘Ã³ cá»§a `state`.

- Äá»ƒ sá»­ dá»¥ng `createSlice`, báº¡n cáº§n `import` nÃ³ tá»« `@reduxjs/toolkit`.

```jsx
import { createSlice } from "@reduxjs/toolkit";
```

- Sau Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `createSlice` Ä‘á»ƒ táº¡o ra má»™t `slice` cá»§a `state` vá»›i cÃº phÃ¡p nhÆ° sau:

```jsx
const sliceName = createSlice({
  name: 'sliceName',
  initialState: initialStateValue,
  reducers: {
    reducerFunction1: (state, action) => { ... },
    reducerFunction2: (state, action) => { ... },
    ...
  }
})
```

- Trong Ä‘Ã³ cÃ³:

  - `name`: lÃ  tÃªn cá»§a slice.
  - `initialState`: lÃ  giÃ¡ trá»‹ khá»Ÿi táº¡o cho slice Ä‘Ã³.
  - `reducers`: lÃ  má»™t Ä‘á»‘i tÆ°á»£ng (`object`) chá»©a cÃ¡c `reducer functions` vÃ  `action creators` tÆ°Æ¡ng á»©ng. Báº¡n cáº§n Ä‘áº·t tÃªn cho cÃ¡c `reducer functions` vÃ  `Redux Toolkit` sáº½ tá»± Ä‘á»™ng táº¡o ra cÃ¡c `action types` tÆ°Æ¡ng á»©ng.

- Má»—i `reducer function` nháº­n vÃ o hai Ä‘á»‘i sá»‘: `state` vÃ  `action`. `state` Ä‘áº¡i diá»‡n cho `giÃ¡ trá»‹ hiá»‡n táº¡i` cá»§a `slice`, vÃ  `action` Ä‘áº¡i diá»‡n cho `hÃ nh Ä‘á»™ng` Ä‘Æ°á»£c gá»­i Ä‘áº¿n `reducer`. Trong `reducer function`, báº¡n cáº§n thay Ä‘á»•i `state` cá»§a `slice` dá»±a trÃªn hÃ nh Ä‘á»™ng Ä‘Æ°á»£c gá»­i Ä‘áº¿n.

- Sau khi sá»­ dá»¥ng `createSlice`, báº¡n sáº½ nháº­n Ä‘Æ°á»£c má»™t Ä‘á»‘i tÆ°á»£ng (`object`) cÃ³ hai thuá»™c tÃ­nh lÃ  `actions` vÃ  `reducer`, tÆ°Æ¡ng á»©ng vá»›i cÃ¡c `action creators` vÃ  `reducer` cá»§a `slice` Ä‘Ã³.

```jsx
console.log(sliceName.actions);
console.log(sliceName.reducer);
```

- Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c `action creators` Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ gá»­i cÃ¡c hÃ nh Ä‘á»™ng (`action`) Ä‘áº¿n `reducer`, vÃ  sá»­ dá»¥ng `reducer` Ä‘á»ƒ thay Ä‘á»•i `state` cá»§a `slice`.

- Vá»›i `createSlice`, viá»‡c táº¡o `reducer` vÃ  cÃ¡c `action creators` trá»Ÿ nÃªn dá»… dÃ ng vÃ  tá»± Ä‘á»™ng hÆ¡n, giÃºp giáº£m thiá»ƒu khá»‘i lÆ°á»£ng mÃ£ cáº§n pháº£i viáº¿t vÃ  giÃºp cho viá»‡c quáº£n lÃ½ `state` cá»§a á»©ng dá»¥ng trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n.

**cho phÃ©p báº¡n táº¡o ra má»™t `slice`, bao gá»“m má»™t `reducer` vÃ  cÃ¡c `action creators` tÆ°Æ¡ng á»©ng...**

- TÃ´i chÆ°a hiá»ƒu dÃ²ng Ä‘Ã³. HÃ£y giáº£i thÃ­ch chi tiáº¿t hÆ¡n:

  - Trong `Redux`, má»™t `slice` Ä‘áº¡i diá»‡n cho má»™t pháº§n cá»§a `state` cá»§a á»©ng dá»¥ng vÃ  bao gá»“m má»™t `reducer function` vÃ  cÃ¡c `action creators` tÆ°Æ¡ng á»©ng Ä‘á»ƒ thay Ä‘á»•i `state` Ä‘Ã³.

  - `createSlice` sáº½ tá»± Ä‘á»™ng táº¡o ra cÃ¡c `action creators` tÆ°Æ¡ng á»©ng cho má»—i `reducer function` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `reducers`. CÃ¡c `action creators` nÃ y sáº½ cÃ³ tÃªn `giá»‘ng` vá»›i tÃªn cá»§a `reducer function` vÃ  tráº£ vá» má»™t `action object` chá»©a thÃ´ng tin vá» `action type` vÃ  `payload`. Báº±ng cÃ¡ch sá»­ dá»¥ng cÃ¡c `action creators` nÃ y, báº¡n cÃ³ thá»ƒ gá»­i cÃ¡c `action` tá»›i `reducer` Ä‘á»ƒ thay Ä‘á»•i `state` cá»§a á»©ng dá»¥ng.

  - `createSlice` lÃ  má»™t phÆ°Æ¡ng thá»©c cá»§a `Redux Toolkit` giÃºp táº¡o ra má»™t `slice` Ä‘Æ¡n giáº£n hÆ¡n. Báº±ng cÃ¡ch sá»­ dá»¥ng `createSlice`, báº¡n cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a má»™t Ä‘á»‘i tÆ°á»£ng `reducers` gá»“m cÃ¡c `reducer function`. Má»—i `reducer function` Ä‘áº¡i diá»‡n cho má»™t pháº§n cá»§a `state` vÃ  xá»­ lÃ½ cÃ¡c `action` liÃªn quan Ä‘áº¿n pháº§n Ä‘Ã³ cá»§a `state`.

  - Cuá»‘i cÃ¹ng, `createSlice` tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng `slice` chá»©a `reducer function` vÃ  cÃ¡c `action creators` tÆ°Æ¡ng á»©ng, giÃºp cho viá»‡c quáº£n lÃ½ `state` cá»§a á»©ng dá»¥ng trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n.

## `reducer function` vÃ  cÃ¡c `action creators` lÃ  gÃ¬ ?

- Trong `Redux`, má»™t `reducer function` lÃ  má»™t hÃ m xá»­ lÃ½ cÃ¡c `action` vÃ  thay Ä‘á»•i `state` cá»§a á»©ng dá»¥ng. `Reducer function` nháº­n vÃ o hai Ä‘á»‘i sá»‘ lÃ  `state hiá»‡n táº¡i` vÃ  má»™t `action`, vÃ  tráº£ vá» `state má»›i` cá»§a á»©ng dá»¥ng.

- CÃ¡c `action creators` lÃ  cÃ¡c hÃ m Ä‘Æ¡n giáº£n tráº£ vá» má»™t `action object`, chá»©a thÃ´ng tin vá» `action type` vÃ  `payload`. `Action object` nÃ y Ä‘Æ°á»£c gá»­i tá»›i `reducer` Ä‘á»ƒ thay Ä‘á»•i `state` cá»§a á»©ng dá»¥ng. Viá»‡c sá»­ dá»¥ng `action creators` giÃºp cho viá»‡c quáº£n lÃ½ `action types` cá»§a á»©ng dá»¥ng trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n vÃ  giÃºp trÃ¡nh viá»‡c lá»—i chÃ­nh táº£ trong viá»‡c gá»­i `action` tá»›i `reducer`.

- Khi sá»­ dá»¥ng `Redux Toolkit`, viá»‡c táº¡o `reducer function` vÃ  cÃ¡c `action creators` trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n nhá» cÃ¡c phÆ°Æ¡ng thá»©c nhÆ° `createSlice` vÃ  `createAction`. CÃ¡c phÆ°Æ¡ng thá»©c nÃ y giÃºp tá»± Ä‘á»™ng táº¡o ra cÃ¡c `action types` vÃ  `action creators` tÆ°Æ¡ng á»©ng, giÃºp cho viá»‡c xá»­ lÃ½ `state` cá»§a á»©ng dá»¥ng trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n.

## Trong `action creators` lÃ  nÃ³ chá»©a gÃ¬ ?

- `Action creators` lÃ  cÃ¡c hÃ m tráº£ vá» má»™t `action object`, chá»©a thÃ´ng tin vá» `action type` vÃ  `payload`.

- Trong Redux, má»™t `action object` bao gá»“m hai thuá»™c tÃ­nh chÃ­nh lÃ  `type` vÃ  `payload`. Thuá»™c tÃ­nh `type` xÃ¡c Ä‘á»‹nh loáº¡i cá»§a `action`, thÆ°á»ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a báº±ng má»™t `string`, vÃ  lÃ  má»™t trong cÃ¡c `action types` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong á»©ng dá»¥ng. Thuá»™c tÃ­nh `payload` chá»©a dá»¯ liá»‡u cáº§n thiáº¿t Ä‘á»ƒ xá»­ lÃ½ `action`, vÃ  cÃ³ thá»ƒ lÃ  báº¥t ká»³ kiá»ƒu dá»¯ liá»‡u nÃ o tÃ¹y thuá»™c vÃ o tá»«ng trÆ°á»ng há»£p cá»¥ thá»ƒ.

- VÃ­ dá»¥, náº¿u báº¡n muá»‘n Ä‘á»‹nh nghÄ©a má»™t `action creator` cho viá»‡c thÃªm má»™t `todo item` vÃ o danh sÃ¡ch `todos`, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `createAction` Ä‘á»ƒ táº¡o ra `action creator` vÃ  `action object` tÆ°Æ¡ng á»©ng:

```jsx
import { createAction } from "@reduxjs/toolkit";

export const addTodo = createAction("todos/add", (title) => {
  return {
    payload: {
      id: Date.now(),
      title,
      completed: false,
    },
  };
});
```

- Trong Ä‘oáº¡n mÃ£ trÃªn, `createAction` Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o ra má»™t `action creator` cho viá»‡c thÃªm má»™t `todo item` vÃ o danh sÃ¡ch `todos`. `Action type` cá»§a action nÃ y lÃ  `'todos/add'`. `Action creator` tráº£ vá» má»™t `action object` vá»›i thuá»™c tÃ­nh type lÃ  `'todos/add'` vÃ  thuá»™c tÃ­nh `payload` chá»©a dá»¯ liá»‡u cá»§a `todo item` cáº§n thÃªm vÃ o danh sÃ¡ch.

## Äoáº¡n code nÃ y Ä‘Æ°á»£c láº¥y tá»« `file` blog.slice.ts trong `folder` local-blog:

```jsx
const blogSlice = createSlice({
  name: "blog",
  initialState,
  reducers: {
    deletePost: (state, action: PayloadAction<string>) => {
      const postId = action.payload;
      const foundPostIndex = state.postList.findIndex(
        (post) => post.id === postId
      );
      if (foundPostIndex !== -1) {
        state.postList.splice(foundPostIndex, 1);
      }
    },
  },
});
```

- **Trong Ä‘oáº¡n code nÃ y. HÃ£y chá»‰ ra Ä‘Ã¢u lÃ  `name`, `initialState`, `reducers`, `reducer functions`, `action creators` ?**

- Trong Ä‘oáº¡n code trÃªn:

  - `name` lÃ  chuá»—i Ä‘á»‹nh danh cho `slice`, cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ phÃ¢n biá»‡t slice nÃ y vá»›i cÃ¡c slice khÃ¡c.

  - `initialState` lÃ  tráº¡ng thÃ¡i ban Ä‘áº§u cá»§a slice, Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ khá»Ÿi táº¡o `store`.

  - `reducers` lÃ  má»™t Ä‘á»‘i tÆ°á»£ng chá»©a cÃ¡c `reducer function` Ä‘Æ°á»£c táº¡o ra bá»Ÿi `slice`. Má»—i thuá»™c tÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng nÃ y lÃ  má»™t reducer function Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a Ä‘á»ƒ xá»­ lÃ½ má»™t `action` cá»¥ thá»ƒ.

  - `deletePost` lÃ  má»™t `reducer function`, Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a Ä‘á»ƒ xá»­ lÃ½ `action` cÃ³ `type` lÃ  `'blog/deletePost'`. Reducer function nÃ y nháº­n vÃ o hai Ä‘á»‘i sá»‘ lÃ  `state` vÃ  `action`, vÃ  tráº£ vá» state má»›i cá»§a slice sau khi thá»±c hiá»‡n xá»­ lÃ½ `action`.

  - `PayloadAction` lÃ  má»™t kiá»ƒu Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi `Redux Toolkit`, vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a kiá»ƒu dá»¯ liá»‡u cá»§a `payload` trong cÃ¡c `action` tÆ°Æ¡ng á»©ng vá»›i `reducer function`. Trong trÆ°á»ng há»£p nÃ y, `deletePost` reducer function sá»­ dá»¥ng `PayloadAction<string>` Ä‘á»ƒ chá»‰ ra ráº±ng `payload` cá»§a `action` cÃ³ kiá»ƒu lÃ  `string`.

- LÆ°u Ã½ ráº±ng, `createSlice` tá»± Ä‘á»™ng táº¡o ra cÃ¡c `action creators` tÆ°Æ¡ng á»©ng cho má»—i `reducer function` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `reducers`, vÃ¬ váº­y chÃºng ta khÃ´ng cáº§n pháº£i táº¡o cÃ¡c `action creators` thá»§ cÃ´ng nhÆ° trong `Redux` truyá»n thá»‘ng.

## Äoáº¡n code nÃ y Ä‘Æ°á»£c láº¥y tá»« `file` blog.slice.ts trong `folder` local-blog:

```jsx
export const {
  addPost,
  cancelEditingPost,
  deletePost,
  finishEditingPost,
  startEditingPost,
} = blogSlice.actions;
```

- VÃ¬ sao pháº£i khai bÃ¡o dÃ²ng code nÃ y ?

  - Khi chÃºng ta sá»­ dá»¥ng `createSlice()` Ä‘á»ƒ táº¡o má»™t `slice`, nÃ³ sáº½ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ chá»©a cÃ¡c `action creators` tÆ°Æ¡ng á»©ng vá»›i cÃ¡c `reducer functions` Ä‘Ã£ khai bÃ¡o. CÃ¡c `action creator` nÃ y Ä‘Æ°á»£c táº¡o ra tá»± Ä‘á»™ng dá»±a trÃªn tÃªn vÃ  ná»™i dung cá»§a cÃ¡c `reducer function`.

  - Trong trÆ°á»ng há»£p cá»§a Ä‘oáº¡n code báº¡n Ä‘Æ°a ra, cÃ¡c `action creator` Ä‘Æ°á»£c táº¡o ra trong `slice` `blogSlice` sáº½ cÃ³ cÃ¡c tÃªn tÆ°Æ¡ng á»©ng vá»›i cÃ¡c `reducer function` lÃ  `addPost`, `cancelEditingPost`, `deletePost`, `finishEditingPost`, vÃ  `startEditingPost`.

  - Tuy nhiÃªn, Ä‘á»ƒ sá»­ dá»¥ng Ä‘Æ°á»£c cÃ¡c `action creator` nÃ y trong cÃ¡c `component` khÃ¡c, chÃºng ta cáº§n pháº£i `export` chÃºng ra ngoÃ i báº±ng cÃº phÃ¡p:

  ```jsx
  export const { action1, action2, ... } = slice.actions
  ```

  - VÃ¬ váº­y, dÃ²ng lá»‡nh nÃ y:

  ```jsx
  export const {
    addPost,
    cancelEditingPost,
    deletePost,
    finishEditingPost,
    startEditingPost,
  } = blogSlice.actions;
  ```

  - Sáº½ `export` cÃ¡c `action creator` cá»§a `slice` `blogSlice` Ä‘á»ƒ chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng chÃºng trong cÃ¡c component khÃ¡c cá»§a á»©ng dá»¥ng.

## Äoáº¡n code nÃ y Ä‘Æ°á»£c láº¥y tá»« `file` blog.slice.ts trong `folder` local-blog:

```jsx
const blogReducer = blogSlice.reducer;
export default blogReducer;
```

- Giáº£i thÃ­ch 2 dÃ²ng code nÃ y táº¡i sao láº¡i pháº£i cÃ³ ?

  - Trong `Redux Toolkit`, Ä‘á»ƒ sá»­ dá»¥ng `slice`, ta cáº§n pháº£i trÃ­ch xuáº¥t ra Ä‘Æ°á»£c `reducer` tá»« `slice` Ä‘Ã³. Äá»ƒ lÃ m Ä‘iá»u nÃ y, ta sá»­ dá»¥ng thuá»™c tÃ­nh `reducer` cá»§a `slice`.

  - Trong trÆ°á»ng há»£p cá»§a Ä‘oáº¡n code trÃªn, ta Ä‘Ã£ táº¡o má»™t `slice` lÃ  `blogSlice` báº±ng cÃ¡ch sá»­ dá»¥ng hÃ m `createSlice`. Sau Ä‘Ã³, ta trÃ­ch xuáº¥t `reducer` tá»« `slice` báº±ng cÃ¡ch gÃ¡n giÃ¡ trá»‹ cá»§a thuá»™c tÃ­nh `reducer` cá»§a `slice` cho má»™t biáº¿n má»›i lÃ  `blogReducer`. Äiá»u nÃ y giÃºp ta cÃ³ thá»ƒ sá»­ dá»¥ng `reducer` nÃ y Ä‘á»ƒ Ä‘Æ°a vÃ o `store` cá»§a `Redux`.

  - Äá»ƒ sá»­ dá»¥ng `reducer` nÃ y trong á»©ng dá»¥ng cá»§a ta, ta cáº§n xuáº¥t nÃ³ ra báº±ng cÃ¡ch sá»­ dá»¥ng tá»« khoÃ¡ `export default`. NhÆ° váº­y, khi `import reducer` cá»§a `slice` nÃ y á»Ÿ nÆ¡i khÃ¡c trong á»©ng dá»¥ng, ta cÃ³ thá»ƒ `import reducer` Ä‘Ã³ vá»›i cÃº phÃ¡p:

  ```jsx
  import blogReducer from './blogSlice'.
  ```

- Vá» pháº§n thá»© hai cá»§a cÃ¢u há»i cá»§a báº¡n, Ä‘Ã³ lÃ  vá» dÃ²ng code:

```jsx
export const {
  addPost,
  cancelEditingPost,
  deletePost,
  finishEditingPost,
  startEditingPost,
} = blogSlice.actions;
```

- DÃ²ng Ä‘Ã³ lÃ  Ä‘á»ƒ `xuáº¥t` ra cÃ¡c `action creators` tÆ°Æ¡ng á»©ng vá»›i cÃ¡c `reducer` Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `slice`, tá»« Ä‘Ã³ sá»­ dá»¥ng chÃºng Ä‘á»ƒ gá»­i cÃ¡c `action` Ä‘áº¿n `reducer`. Ta sá»­ dá»¥ng cÃº phÃ¡p nÃ y Ä‘á»ƒ `trÃ­ch xuáº¥t` cÃ¡c `action creators` tá»« `slice` Ä‘á»ƒ cÃ³ thá»ƒ sá»­ dá»¥ng chÃºng trong á»©ng dá»¥ng cá»§a ta.

## Äoáº¡n code nÃ y Ä‘Æ°á»£c láº¥y tá»« `file` blog.slice.ts trong `folder` local-blog:

- DÃ²ng code 1:

```jsx
export const {
  addPost,
  cancelEditingPost,
  deletePost,
  finishEditingPost,
  startEditingPost,
} = blogSlice.actions;
```

- DÃ²ng code 2:

```jsx
const blogReducer = blogSlice.reducer;
```

- Trong 2 dÃ²ng code nÃ y nÃ³ cÃ³ chá»©a: `blogSlice.reducer` vÃ  `blogSlice.actions`

- NhÆ° váº­y thÃ¬ chÃºng ta cÃ³ `reducer` vÃ  `action` nÃ³ Ä‘á»u `trá»` Ä‘áº¿n `1 vá»‹ trÃ­` háº£ ? VÃ­ dá»¥ `deletePost` vá»«a lÃ  `reducer` vá»«a lÃ  `action` ?

  - ÄÃºng váº­y, khi sá»­ dá»¥ng `createSlice` Ä‘á»ƒ táº¡o má»™t `slice`, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng `slice.actions` Ä‘á»ƒ truy cáº­p vÃ o cÃ¡c `action` Ä‘Æ°á»£c táº¡o ra bá»Ÿi `slice` Ä‘Ã³. Do Ä‘Ã³, dÃ²ng code:

  ```jsx
  export const {
    addPost,
    cancelEditingPost,
    deletePost,
    finishEditingPost,
    startEditingPost,
  } = blogSlice.actions;
  ```

  - cÃ³ nhiá»‡m vá»¥ `xuáº¥t` cÃ¡c `action` nÃ y Ä‘á»ƒ chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng trong cÃ¡c `component khÃ¡c`.

  - CÃ¡c `reducer function` Ä‘Æ°á»£c táº¡o ra bá»Ÿi `createSlice` cÅ©ng Ä‘Æ°á»£c lÆ°u trong `slice`, vÃ  cÃ³ thá»ƒ truy cáº­p thÃ´ng qua `slice.reducer`. DÃ²ng code

  ```jsx
  const blogReducer = blogSlice.reducer;
  ```

  - cÃ³ nhiá»‡m vá»¥ gÃ¡n `reducer function` cá»§a `slice` nÃ y vÃ o biáº¿n `blogReducer` Ä‘á»ƒ sá»­ dá»¥ng trong viá»‡c táº¡o `store` trong `Redux`.

  - VÃ¬ cÃ¡c `action` vÃ  `reducer function` Ä‘á»u Ä‘Æ°á»£c táº¡o ra tá»« `slice` nÃ y, nÃªn chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng cáº£ `action` vÃ  `reducer function` trong má»™t file khÃ¡c, vÃ  chÃºng Ä‘á»u sáº½ `trá»` Ä‘áº¿n cÃ¹ng má»™t `slice`.

  - VÃ­ dá»¥, `deletePost` vá»«a lÃ  má»™t `reducer function` Ä‘á»ƒ xá»­ lÃ½ `action`

  ```jsx
  blogSlice.actions.deletePost();
  ```

  - vÃ  cÅ©ng lÃ  má»™t `action creator` Ä‘á»ƒ táº¡o ra `action`

  ```jsx
  dispatch(blogSlice.actions.deletePost());
  ```

## `export const` vÃ  `export default` nÃ³ cÃ³ khÃ¡c nhau cÃ¡i gÃ¬ khÃ´ng ?

- export const vÃ  export default lÃ  `khÃ¡c nhau`.

- `export const` Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xuáº¥t má»™t `biáº¿n`, `hÃ m` hoáº·c `Ä‘á»‘i tÆ°á»£ng` cá»¥ thá»ƒ tá»« má»™t `module`, nÃ³ cho phÃ©p ta sá»­ dá»¥ng `tÃªn cá»¥ thá»ƒ` Ä‘á»ƒ `import` trong cÃ¡c `module` khÃ¡c. VÃ­ dá»¥:

```jsx
// file module.js
export const PI = 3.14;
export const double = (num) => num * 2;

// file main.js
import { PI, double } from "./module.js";

console.log(PI); // output: 3.14
console.log(double(5)); // output: 10
```

- `export default` cÅ©ng lÃ  má»™t cÃ¡ch Ä‘á»ƒ `xuáº¥t` giÃ¡ trá»‹ cá»§a má»™t `module`, nhÆ°ng khÃ¡c vá»›i `export const`, nÃ³ chá»‰ cho phÃ©p xuáº¥t má»™t giÃ¡ trá»‹ duy nháº¥t tá»« má»™t `module`. VÃ  khi `import` giÃ¡ trá»‹ Ä‘Ã³ trong má»™t `module` khÃ¡c, ta khÃ´ng cáº§n pháº£i sá»­ dá»¥ng `tÃªn cá»¥ thá»ƒ` cá»§a nÃ³. VÃ­ dá»¥:

```jsx
// file module.js
const PI = 3.14;
const double = (num) => num * 2;
export default { PI, double };

// file main.js
import myModule from "./module.js";

console.log(myModule.PI); // output: 3.14
console.log(myModule.double(5)); // output: 10
```

- LÆ°u Ã½ ráº±ng, ta cÃ³ thá»ƒ sá»­ dá»¥ng `export default` vÃ  `export const` trong cÃ¹ng má»™t `module`. Tuy nhiÃªn, khi import cÃ¡c giÃ¡ trá»‹ Ä‘Ã³ vÃ o module khÃ¡c, ta pháº£i tuÃ¢n thá»§ cÃº phÃ¡p tÆ°Æ¡ng á»©ng.

## `reducers` lÃ  má»™t Ä‘á»‘i tÆ°á»£ng chá»©a cÃ¡c `reducer function` Ä‘Æ°á»£c táº¡o ra bá»Ÿi `slice`... ?

- Váº­y `slice` lÃ  cÃ¡i nÃ o ? TÃ´i chá»‰ tháº¥y `createSlice` thÃ´i. `Slice` lÃ  cÃ¡i nÃ o mÃ  tÃ´i khÃ´ng tháº¥y trong Ä‘oáº¡n code:

- Trong Ä‘oáº¡n code trÃªn, `slice` Ä‘Æ°á»£c táº¡o ra bá»Ÿi hÃ m `createSlice`, vÃ  nÃ³ chá»©a thÃ´ng tin vá» `name`, `initialState` vÃ  cÃ¡c `reducer functions`.

- VÃ¬ váº­y, khi báº¡n sá»­ dá»¥ng `createSlice`, báº¡n sáº½ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng `slice` Ä‘á»ƒ quáº£n lÃ½ tráº¡ng thÃ¡i (`state`) vÃ  cÃ¡c `logic` xá»­ lÃ½ trÃªn tráº¡ng thÃ¡i cá»§a á»©ng dá»¥ng.

- TÃ³m láº¡i, `slice` vÃ  `createSlice` lÃ  hai khÃ¡i niá»‡m liÃªn quan Ä‘áº¿n `Redux Toolkit`, trong Ä‘Ã³ `createSlice` Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o ra `slice` chá»©a cÃ¡c `reducer function` vÃ  `action creators` tÆ°Æ¡ng á»©ng, giÃºp cho viá»‡c quáº£n lÃ½ tráº¡ng thÃ¡i vÃ  xá»­ lÃ½ logic trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n.

## vÃ  tráº£ vá» state má»›i cá»§a slice sau khi thá»±c hiá»‡n xá»­ lÃ½ `action`... ?

- Xá»­ lÃ½ `action` lÃ  chá»— nÃ o trong Ä‘oáº¡n code, hÃ£y nÃªu rÃµ vÃ  giáº£i thÃ­ch chi tiáº¿t nÃ³:

  - Trong Ä‘oáº¡n code nÃ y, xá»­ lÃ½ `action` Ä‘Æ°á»£c thá»±c hiá»‡n bá»Ÿi cÃ¡c `reducer function` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong Ä‘á»‘i tÆ°á»£ng `reducers` cá»§a `createSlice`. CÃ¡c `reducer function` nÃ y nháº­n vÃ o `state` hiá»‡n táº¡i cá»§a `slice` vÃ  má»™t `action` tÆ°Æ¡ng á»©ng, sau Ä‘Ã³ thá»±c hiá»‡n viá»‡c cáº­p nháº­t `state` dá»±a trÃªn thÃ´ng tin trong `action`, vÃ  tráº£ vá» `state` má»›i.

  - VÃ­ dá»¥, trong Ä‘oáº¡n code, `reducer function` lÃ  `deletePost` nháº­n vÃ o `state` hiá»‡n táº¡i vÃ  má»™t `action` cÃ³ `type` lÃ  `'blog/deletePost'` vÃ  `payload` lÃ  `id` cá»§a bÃ i viáº¿t cáº§n xÃ³a. Sau Ä‘Ã³, nÃ³ tÃ¬m vá»‹ trÃ­ cá»§a bÃ i viáº¿t trong danh sÃ¡ch `postList` cá»§a `state` vÃ  xÃ³a bÃ i viáº¿t Ä‘Ã³ khá»i danh sÃ¡ch.

  - Cuá»‘i cÃ¹ng, nÃ³ tráº£ vá» `state` má»›i, Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t. TÆ°Æ¡ng tá»±, cÃ¡c `reducer function` khÃ¡c cÅ©ng thá»±c hiá»‡n cÃ¡c xá»­ lÃ½ tÆ°Æ¡ng á»©ng vá»›i `action` tÆ°Æ¡ng á»©ng vÃ  tráº£ vá» `state` má»›i.

## Trong Ä‘oáº¡n code trÃªn thÃ¬ `action` nÃ³ tá»± Ä‘á»™ng táº¡o `action creator` lun háº£ ?

- ÄÃºng, `createSlice` tá»± Ä‘á»™ng táº¡o cÃ¡c `action creators` tÆ°Æ¡ng á»©ng cho má»—i `reducer function` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `reducers`.

- VÃ¬ váº­y, trong vÃ­ dá»¥ trÃªn, khi báº¡n Ä‘á»‹nh nghÄ©a `reducer function` `deletePost` trong `reducers`, `createSlice` sáº½ tá»± Ä‘á»™ng táº¡o ra má»™t `action creator` tÃªn lÃ  `deletePost` cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ `dispatch` `action` tÆ°Æ¡ng á»©ng vá»›i `reducer function` nÃ y.

- Náº¿u báº¡n xem ká»¹ hÆ¡n trong Ä‘oáº¡n code trÃªn, báº¡n sáº½ khÃ´ng tháº¥y má»™t Ä‘oáº¡n mÃ£ nÃ o liÃªn quan Ä‘áº¿n viá»‡c táº¡o ra cÃ¡c `action creators`, nhÆ°ng báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng chÃºng báº±ng cÃ¡ch `import` cÃ¡c `action creators` tá»« `slice` tÆ°Æ¡ng á»©ng, vÃ­ dá»¥ nhÆ° sau:

```jsx
import { blogSlice } from "./blogSlice";

// Dispatch action by calling action creator
dispatch(blogSlice.actions.deletePost(postId));
```

- `blogSlice.actions.deletePost` sáº½ tráº£ vá» má»™t `action` vá»›i `type` lÃ  `'blog/deletePost'` vÃ  `payload` tÆ°Æ¡ng á»©ng vá»›i Ä‘á»‘i sá»‘ Ä‘Æ°á»£c truyá»n vÃ o `action creator`. Viá»‡c táº¡o cÃ¡c `action creators` nÃ y Ä‘Æ°á»£c thá»±c hiá»‡n `tá»± Ä‘á»™ng` bá»Ÿi `createSlice`.

## `action creator` cÃ³ tÃªn giá»‘ng vá»›i `reducer function` lun háº£ ?

- ÄÃºng, máº·c Ä‘á»‹nh khi sá»­ dá»¥ng `createSlice`, tÃªn cá»§a `reducer function` trong `reducers` sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘áº·t tÃªn cho `action creator` tÆ°Æ¡ng á»©ng. VÃ­ dá»¥, trong Ä‘oáº¡n mÃ£:

```jsx
const blogSlice = createSlice({
  name: "blog",
  initialState,
  reducers: {
    deletePost: (state, action) => {
      // ...
    },
  },
});
```

- `deletePost` lÃ  tÃªn cá»§a `reducer function` vÃ  cÅ©ng lÃ  tÃªn cá»§a `action creator` Ä‘Æ°á»£c táº¡o ra bá»Ÿi `createSlice`. Náº¿u muá»‘n Ä‘áº·t tÃªn khÃ¡c cho `action creator`, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃº phÃ¡p sau:

```jsx
const blogSlice = createSlice({
  name: "blog",
  initialState,
  reducers: {
    deletePostActionCreator: {
      reducer: (state, action) => {
        // ...
      },
      prepare: (postId) => ({ payload: postId }),
    },
  },
});
```

- Trong Ä‘oáº¡n mÃ£ trÃªn, `deletePostActionCreator` lÃ  tÃªn cá»§a `action creator` Ä‘Æ°á»£c táº¡o ra bá»Ÿi `createSlice`. ChÃº Ã½ ráº±ng báº¡n pháº£i Ä‘á»‹nh nghÄ©a cáº£ `reducer function` vÃ  `prepare method` (náº¿u cáº§n) trong `object` tÆ°Æ¡ng á»©ng vá»›i `action creator` nÃ y.

## Táº¡i sao `deletePost` vá»«a lÃ  `reducer function` vá»«a lÃ  `action creator` ?

- Trong `Redux Toolkit`, `createSlice` cho phÃ©p báº¡n Ä‘á»‹nh nghÄ©a `reducer function` vÃ  cÃ¡c `action creators` tÆ°Æ¡ng á»©ng trong má»™t Ä‘á»‘i tÆ°á»£ng gá»i lÃ  `"reducers"`. Má»—i `reducer function` sáº½ nháº­n vÃ o `state` hiá»‡n táº¡i vÃ  má»™t `action` Ä‘Æ°á»£c `dispatch` vÃ  tráº£ vá» má»™t `state` má»›i náº¿u cáº§n thiáº¿t. Trong khi Ä‘Ã³, cÃ¡c `action creators` lÃ  cÃ¡c `hÃ m` giÃºp táº¡o ra cÃ¡c `action` vá»›i cÃ¡c `type` vÃ  `payload` tÆ°Æ¡ng á»©ng.

- Trong Ä‘oáº¡n mÃ£ mÃ  báº¡n Ä‘Æ°a ra, `deletePost` lÃ  má»™t `reducer function` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `reducers object` cá»§a `slice` thÃ´ng qua `createSlice`. NÃ³ nháº­n vÃ o `state` hiá»‡n táº¡i vÃ  má»™t `action` cÃ³ kiá»ƒu `PayloadAction<string>` (cÃ³ chá»©a `payload` dáº¡ng `string`) vÃ  xá»­ lÃ½ logic xÃ³a bÃ i Ä‘Äƒng khá»i danh sÃ¡ch.

- Trong khi Ä‘Ã³, `deletePost` cÅ©ng Ä‘Æ°á»£c táº¡o ra nhÆ° má»™t `action creator` thÃ´ng qua `createSlice`, nÃ³ sáº½ tráº£ vá» má»™t `action object` vá»›i kiá»ƒu tÆ°Æ¡ng á»©ng vÃ  `payload` lÃ  má»™t chuá»—i ID cá»§a bÃ i Ä‘Äƒng cáº§n xÃ³a.

# createSlice:

- `createSlice` lÃ  sá»± káº¿t há»£p cá»§a `createReducer` vÃ  `createAction`

- MÃ¬nh khuyÃªn cÃ¡c báº¡n nÃªn dÃ¹ng `createSlice` thay vÃ¬ `createReducer` vÃ¬ cÃ¡c báº¡n khÃ´ng cáº§n táº¡o `action`, `action` sáº½ tá»± Ä‘á»™ng `generate` ra cho cÃ¡c báº¡n.

```jsx
import { createSlice } from "@reduxjs/toolkit";
import type { PayloadAction } from "@reduxjs/toolkit";

interface CounterState {
  value: number;
}

const initialState = { value: 0 } as CounterState;

const counterSlice = createSlice({
  name: "counter", // ÄÃ¢y lÃ  prefix cho action type cá»§a báº¡n
  initialState, // GiÃ¡ trá»‹ khá»Ÿi táº¡o state cho reducer, cÅ©ng cÃ³ thá»ƒ lÃ  function khá»Ÿi táº¡o
  reducers: {
    // key name sáº½ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ generate ra action
    increment(state) {
      state.value++;
    },
    decrement(state) {
      state.value--;
    },
    incrementByAmount(state, action: PayloadAction<number>) {
      state.value += action.payload;
    },
  },
});

// export action Ä‘Æ°á»£c generate ra tá»« slice
export const { increment, decrement, incrementByAmount } = counterSlice.actions;

// export reducer Ä‘Æ°á»£c generate ra tá»« slice
export default counterSlice.reducer;
```

- Vá»›i `reducers` trÃªn thÃ¬ ta khÃ´ng dÃ¹ng Ä‘Æ°á»£c vá»›i nhá»¯ng trÆ°á»ng há»£p

  - default case
  - matcher case

=> NÃªn dÃ¹ng `extraReducers` trong 2 trÆ°á»ng há»£p nÃ y

- VÃ¬ Ä‘áº·c tÃ­nh tá»± Ä‘á»™ng `generate` ra `action` khi dÃ¹ng `reducers` nÃªn náº¿u chÃºng ta sá»­ dá»¥ng má»™t thunk thÃ¬ khÃ´ng nÃªn check trong `reducers` mÃ  hÃ£y check trong `extraReducers`

## HÃ£y Ä‘á»‹nh nghÄ©a `extraReducers` ?

- `extraReducers` lÃ  má»™t thuá»™c tÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c truyá»n vÃ o `createSlice()` Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ¡c `reducer function` bá»• sung khÃ¡c, ngoÃ i cÃ¡c `reducer function` Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh trong thuá»™c tÃ­nh `reducers`.

- CÃ¡c `extraReducers` cho phÃ©p báº¡n sá»­ dá»¥ng cÃ¡c `reducer function` Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trÆ°á»›c Ä‘Ã³ trong á»©ng dá»¥ng cá»§a báº¡n, khÃ´ng nháº¥t thiáº¿t pháº£i gáº¯n chÃºng vÃ o `slice` cá»§a báº¡n. Viá»‡c sá»­ dá»¥ng `extraReducers` cho phÃ©p báº¡n tÃ¡ch biá»‡t cÃ¡c `reducer function` ra khá»i `slice`, lÃ m cho code cá»§a báº¡n trá»Ÿ nÃªn dá»… quáº£n lÃ½ vÃ  tÃ¡i sá»­ dá»¥ng hÆ¡n.

- Má»—i `extraReducers` lÃ  má»™t Ä‘á»‘i tÆ°á»£ng (`object`) vá»›i cÃ¡c thuá»™c tÃ­nh lÃ  cÃ¡c `action type` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a, vÃ  cÃ¡c giÃ¡ trá»‹ tÆ°Æ¡ng á»©ng lÃ  cÃ¡c `reducer function` Ä‘á»ƒ xá»­ lÃ½ cÃ¡c `action` Ä‘Ã³. CÃ¡c `reducer function` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `extraReducers` cÅ©ng nháº­n vÃ o `state` vÃ  `action` giá»‘ng nhÆ° `reducer function` trong `reducers` vÃ  tráº£ vá» má»™t `state` má»›i náº¿u cáº§n thiáº¿t.

- VÃ­ dá»¥, náº¿u báº¡n cÃ³ má»™t `action type` lÃ  `"users/deleteUser"`, báº¡n cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a má»™t `reducer function` Ä‘á»ƒ xá»­ lÃ½ `action` nÃ y vÃ  tráº£ vá» má»™t `state` má»›i, sau Ä‘Ã³ Ä‘Æ°a nÃ³ vÃ o `extraReducers` cá»§a `slice`. Khi má»™t `action` cÃ³ kiá»ƒu `"users/deleteUser"` Ä‘Æ°á»£c gá»­i Ä‘áº¿n `store`, `reducer function` cá»§a báº¡n sáº½ Ä‘Æ°á»£c gá»i vÃ  cáº­p nháº­t `state` cá»§a `slice` tÆ°Æ¡ng á»©ng.

# extraReducers

- `extraReducers` cÅ©ng giá»‘ng `reducers` nhÆ°ng nÃ³ sáº½ khÃ´ng `generate` ra `actions`. `extraReducers` cho phÃ©p dÃ¹ng má»™t sá»‘ tÃ­nh nÄƒng nhÆ° `addMatcher` hay `addDefaultCase`

> `extraReducers` chÃ­nh xÃ¡c giá»‘ng nhÆ° `reducer` trong `createReducer()`

```jsx
import { createAction, createSlice, Action, AnyAction } from "@reduxjs/toolkit";
const incrementBy = createAction<number>("incrementBy");
const decrement = createAction("decrement");

interface RejectedAction extends Action {
  error: Error;
}

function isRejectedAction(action: AnyAction): action is RejectedAction {
  return action.type.endsWith("rejected");
}

createSlice({
  name: "counter",
  initialState: 0,
  reducers: {},
  extraReducers: (builder) => {
    builder
      .addCase(incrementBy, (state, action) => {})

      .addCase(decrement, (state, action) => {})
      .addMatcher(isRejectedAction, (state, action) => {})
      .addDefaultCase((state, action) => {});
  },
});
```

- `extraReducers` cho phÃ©p dÃ¹ng cÃº phÃ¡p "map object" nhÆ°ng vá»›i `typescript` thÃ¬ chÃºng ta nÃªn dÃ¹ng `builder callback`

## TÃ³m láº¡i khi nÃ o dÃ¹ng `reducers`, khi nÃ o dÃ¹ng `extraReducers`

- DÃ¹ng `reducers` khi muá»‘n:

- generate ra action

- DÃ¹ng `extraReducers` khi:

  - KhÃ´ng muá»‘n generate action
  - muá»‘n dÃ¹ng addMatcher, addDefaultCase
  - Khi dÃ¹ng vá»›i createAsyncThunk

## NÃªn dÃ¹ng `extraReducers` hay `reducer` trong createSlice ?

- Viá»‡c sá»­ dá»¥ng `extraReducers` hay `reducers` trong `createSlice` phá»¥ thuá»™c vÃ o trÆ°á»ng há»£p cá»¥ thá»ƒ mÃ  báº¡n Ä‘ang giáº£i quyáº¿t.

  - Náº¿u báº¡n Ä‘ang táº¡o má»™t `slice` má»›i vÃ  chá»‰ cáº§n Ä‘á»‹nh nghÄ©a cÃ¡c `reducers` cho `slice` Ä‘Ã³, thÃ¬ sá»­ dá»¥ng `reducers` lÃ  phÃ¹ há»£p nháº¥t.

  - Tuy nhiÃªn, náº¿u báº¡n muá»‘n thá»±c hiá»‡n cÃ¡c xá»­ lÃ½ `logic` khÃ¡c, vÃ­ dá»¥ nhÆ° cáº­p nháº­t `state` cá»§a má»™t `slice` khÃ¡c, sau khi xá»­ lÃ½ xong `action` cá»§a `slice` hiá»‡n táº¡i, hoáº·c cáº§n pháº£i xá»­ lÃ½ cÃ¡c `action` cá»§a `slice` khÃ¡c, thÃ¬ báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `extraReducers`.

  - `extraReducers` cho phÃ©p báº¡n thÃªm cÃ¡c `reducers` cho cÃ¡c `action` cá»§a cÃ¡c `slice` khÃ¡c, hoáº·c thá»±c hiá»‡n cÃ¡c xá»­ lÃ½ khÃ¡c trÃªn `state`.

- TÃ³m láº¡i, viá»‡c sá»­ dá»¥ng `extraReducers` hay `reducers` phá»¥ thuá»™c vÃ o nhu cáº§u cá»§a báº¡n.

## Trong cÃ¡c dá»± Ã¡n thÃ¬ `reducer` sá»­ dá»¥ng nhiá»u hÆ¡n `extraReducers` Ä‘Ãºng khÃ´ng ?

- ÄÃºng, trong cÃ¡c dá»± Ã¡n thÆ°á»ng sá»­ dá»¥ng `reducer` nhiá»u hÆ¡n `extraReducers` vÃ¬ `reducer` lÃ  pháº§n chÃ­nh cá»§a `slice` vÃ  thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c `action` tÆ°Æ¡ng á»©ng vá»›i `slice` Ä‘Ã³.

- Tuy nhiÃªn, khi cáº§n xá»­ lÃ½ cÃ¡c `action` liÃªn quan Ä‘áº¿n nhiá»u `slice`, hoáº·c cáº§n sá»­ dá»¥ng cÃ¡c `logic` phá»©c táº¡p hÆ¡n, sá»­ dá»¥ng `extraReducers` cÃ³ thá»ƒ giÃºp quáº£n lÃ½ `state` vÃ  xá»­ lÃ½ `action` dá»… dÃ ng hÆ¡n.

- TÃ¹y vÃ o tá»«ng trÆ°á»ng há»£p cá»¥ thá»ƒ mÃ  ngÆ°á»i láº­p trÃ¬nh cÃ³ thá»ƒ lá»±a chá»n sá»­ dá»¥ng `reducer` hoáº·c `extraReducers` trong `createSlice`.
